import{r as t,a as e,u as n,L as s,R as i,b as r,c as o,B as a,d as l,e as c}from"./vendor-GRMUY80k.js";import{X as u,M as h,A as d,S as m,B as p,a as f,U as g,D as y,b as v,c as x,Q as w,L as b,d as T,e as E,C as S,Z as N,f as j,R as C,g as A,h as k,i as I,E as _,T as P,j as D,k as R,P as M,l as L,m as V,I as O}from"./ui-C9UnPhY5.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const n of t)if("childList"===n.type)for(const t of n.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();var F={exports:{}},B={},U=t,$=Symbol.for("react.element"),q=Symbol.for("react.fragment"),z=Object.prototype.hasOwnProperty,K=U.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,G={key:!0,ref:!0,__self:!0,__source:!0};function H(t,e,n){var s,i={},r=null,o=null;for(s in void 0!==n&&(r=""+n),void 0!==e.key&&(r=""+e.key),void 0!==e.ref&&(o=e.ref),e)z.call(e,s)&&!G.hasOwnProperty(s)&&(i[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps)void 0===i[s]&&(i[s]=e[s]);return{$$typeof:$,type:t,key:r,ref:o,props:i,_owner:K.current}}B.Fragment=q,B.jsx=H,B.jsxs=H,F.exports=B;var W,Q=F.exports,Y=e;W=Y.createRoot,Y.hydrateRoot;var X={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&s+1<t.length&&56320==(64512&t.charCodeAt(s+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++s)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},Z={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const e=t[i],r=i+1<t.length,o=r?t[i+1]:0,a=i+2<t.length,l=a?t[i+2]:0,c=e>>2,u=(3&e)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,r||(h=64)),s.push(n[c],n[u],n[h],n[d])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(J(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=t[n++];e[s++]=String.fromCharCode((31&i)<<6|63&r)}else if(i>239&&i<365){const r=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[s++]=String.fromCharCode(55296+(r>>10)),e[s++]=String.fromCharCode(56320+(1023&r))}else{const r=t[n++],o=t[n++];e[s++]=String.fromCharCode((15&i)<<12|(63&r)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const e=n[t.charAt(i++)],r=i<t.length?n[t.charAt(i)]:0;++i;const o=i<t.length?n[t.charAt(i)]:64;++i;const a=i<t.length?n[t.charAt(i)]:64;if(++i,null==e||null==r||null==o||null==a)throw new tt;const l=e<<2|r>>4;if(s.push(l),64!==o){const t=r<<4&240|o>>2;if(s.push(t),64!==a){const t=o<<6&192|a;s.push(t)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const et=function(t){return function(t){const e=J(t);return Z.encodeByteArray(e,!0)}(t).replace(/\./g,"")};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const nt=()=>
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,st=()=>{if("undefined"==typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&function(t){try{return Z.decodeString(t,!0)}catch(n){}return null}(t[1]);return e&&JSON.parse(e)},it=()=>{try{return nt()||(()=>{if("undefined"==typeof process)return;const t=X.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||st()}catch(t){return}},rt=t=>{const e=(t=>{var e,n;return null===(n=null===(e=it())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]})(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),s]:[e.substring(0,n),s]},ot=()=>{var t;return null===(t=it())||void 0===t?void 0:t.config};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class at{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(){return!function(){var t;const e=null===(t=it())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(n){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ct(){try{return"object"==typeof indexedDB}catch(t){return!1}}function ut(){return new Promise(((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}}))}class ht extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ht.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dt.prototype.create)}}class dt{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},s=`${this.service}/${t}`,i=this.errors[t],r=i?function(t,e){return t.replace(mt,((t,n)=>{const s=e[n];return null!=s?String(s):`<${n}?>`}))}(i,n):"Error",o=`${this.serviceName}: ${r} (${s}).`;return new ht(s,o,n)}}const mt=/\{\$([^}]+)}/g;function pt(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const n=t[i],r=e[i];if(ft(n)&&ft(r)){if(!pt(n,r))return!1}else if(n!==r)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function ft(t){return null!==t&&"object"==typeof t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t,e=1e3,n=2){const s=e*Math.pow(n,t),i=Math.round(.5*s*(Math.random()-.5)*2);return Math.min(144e5,s+i)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t){return t&&t._delegate?t._delegate:t}class vt{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new at;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(n){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),s=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(s)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService({instanceIdentifier:xt})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:s});n.resolve(t)}catch(e){}}}}clearInstance(t=xt){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=xt){return this.instances.has(t)}getOptions(t=xt){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[i,r]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&r.resolve(s)}return s}onInit(t,e){var n;const s=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(s))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(s,i);const r=this.instances.get(s);return r&&t(r,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(s){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===xt?void 0:s),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(i){}var s;return n||null}normalizeInstanceIdentifier(t=xt){return this.component?this.component.multipleInstances?t:xt:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class bt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new wt(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt,Et;(Et=Tt||(Tt={}))[Et.DEBUG=0]="DEBUG",Et[Et.VERBOSE=1]="VERBOSE",Et[Et.INFO=2]="INFO",Et[Et.WARN=3]="WARN",Et[Et.ERROR=4]="ERROR",Et[Et.SILENT=5]="SILENT";const St={debug:Tt.DEBUG,verbose:Tt.VERBOSE,info:Tt.INFO,warn:Tt.WARN,error:Tt.ERROR,silent:Tt.SILENT},Nt=Tt.INFO,jt={[Tt.DEBUG]:"log",[Tt.VERBOSE]:"log",[Tt.INFO]:"info",[Tt.WARN]:"warn",[Tt.ERROR]:"error"},Ct=(t,e,...n)=>{if(e<t.logLevel)return;(new Date).toISOString();if(!jt[e])throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class At{constructor(t){this.name=t,this._logLevel=Nt,this._logHandler=Ct,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Tt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?St[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Tt.DEBUG,...t),this._logHandler(this,Tt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Tt.VERBOSE,...t),this._logHandler(this,Tt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Tt.INFO,...t),this._logHandler(this,Tt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Tt.WARN,...t),this._logHandler(this,Tt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Tt.ERROR,...t),this._logHandler(this,Tt.ERROR,...t)}}let kt,It;const _t=new WeakMap,Pt=new WeakMap,Dt=new WeakMap,Rt=new WeakMap,Mt=new WeakMap;let Lt={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return Pt.get(t);if("objectStoreNames"===e)return t.objectStoreNames||Dt.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ft(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Vt(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(It||(It=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(Bt(this),e),Ft(_t.get(this))}:function(...e){return Ft(t.apply(Bt(this),e))}:function(e,...n){const s=t.call(Bt(this),e,...n);return Dt.set(s,e.sort?e.sort():[e]),Ft(s)}}function Ot(t){return"function"==typeof t?Vt(t):(t instanceof IDBTransaction&&function(t){if(Pt.has(t))return;const e=new Promise(((e,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",r),t.removeEventListener("abort",r)},i=()=>{e(),s()},r=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",r),t.addEventListener("abort",r)}));Pt.set(t,e)}(t),e=t,(kt||(kt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((t=>e instanceof t))?new Proxy(t,Lt):t);var e}function Ft(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",r)},i=()=>{e(Ft(t.result)),s()},r=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",r)}));return e.then((e=>{e instanceof IDBCursor&&_t.set(e,t)})).catch((()=>{})),Mt.set(e,t),e}(t);if(Rt.has(t))return Rt.get(t);const e=Ot(t);return e!==t&&(Rt.set(t,e),Mt.set(e,t)),e}const Bt=t=>Mt.get(t);function Ut(t,e,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(t,e),a=Ft(o);return s&&o.addEventListener("upgradeneeded",(t=>{s(Ft(o.result),t.oldVersion,t.newVersion,Ft(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{r&&t.addEventListener("close",(()=>r())),i&&t.addEventListener("versionchange",(t=>i(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}const $t=["get","getKey","getAll","getAllKeys","count"],qt=["put","add","delete","clear"],zt=new Map;function Kt(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(zt.get(e))return zt.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=qt.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!i&&!$t.includes(n))return;const r=async function(t,...e){const r=this.transaction(t,i?"readwrite":"readonly");let o=r.store;return s&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),i&&r.done]))[0]};return zt.set(e,r),r}Lt=(t=>({...t,get:(e,n,s)=>Kt(e,n)||t.get(e,n,s),has:(e,n)=>!!Kt(e,n)||t.has(e,n)}))(Lt);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Gt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map((t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}const Ht="@firebase/app",Wt="0.10.13",Qt=new At("@firebase/app"),Yt="@firebase/app-compat",Xt="@firebase/analytics-compat",Jt="@firebase/analytics",Zt="@firebase/app-check-compat",te="@firebase/app-check",ee="@firebase/auth",ne="@firebase/auth-compat",se="@firebase/database",ie="@firebase/data-connect",re="@firebase/database-compat",oe="@firebase/functions",ae="@firebase/functions-compat",le="@firebase/installations",ce="@firebase/installations-compat",ue="@firebase/messaging",he="@firebase/messaging-compat",de="@firebase/performance",me="@firebase/performance-compat",pe="@firebase/remote-config",fe="@firebase/remote-config-compat",ge="@firebase/storage",ye="@firebase/storage-compat",ve="@firebase/firestore",xe="@firebase/vertexai-preview",we="@firebase/firestore-compat",be="firebase",Te="[DEFAULT]",Ee={[Ht]:"fire-core",[Yt]:"fire-core-compat",[Jt]:"fire-analytics",[Xt]:"fire-analytics-compat",[te]:"fire-app-check",[Zt]:"fire-app-check-compat",[ee]:"fire-auth",[ne]:"fire-auth-compat",[se]:"fire-rtdb",[ie]:"fire-data-connect",[re]:"fire-rtdb-compat",[oe]:"fire-fn",[ae]:"fire-fn-compat",[le]:"fire-iid",[ce]:"fire-iid-compat",[ue]:"fire-fcm",[he]:"fire-fcm-compat",[de]:"fire-perf",[me]:"fire-perf-compat",[pe]:"fire-rc",[fe]:"fire-rc-compat",[ge]:"fire-gcs",[ye]:"fire-gcs-compat",[ve]:"fire-fst",[we]:"fire-fst-compat",[xe]:"fire-vertex","fire-js":"fire-js",[be]:"fire-js-all"},Se=new Map,Ne=new Map,je=new Map;function Ce(t,e){try{t.container.addComponent(e)}catch(n){Qt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ae(t){const e=t.name;if(je.has(e))return Qt.debug(`There were multiple attempts to register component ${e}.`),!1;je.set(e,t);for(const n of Se.values())Ce(n,t);for(const n of Ne.values())Ce(n,t);return!0}function ke(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie=new dt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class _e{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new vt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ie.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t,e={}){let n=t;if("object"!=typeof e){e={name:e}}const s=Object.assign({name:Te,automaticDataCollectionEnabled:!1},e),i=s.name;if("string"!=typeof i||!i)throw Ie.create("bad-app-name",{appName:String(i)});if(n||(n=ot()),!n)throw Ie.create("no-options");const r=Se.get(i);if(r){if(pt(n,r.options)&&pt(s,r.config))return r;throw Ie.create("duplicate-app",{appName:i})}const o=new bt(i);for(const l of je.values())o.addComponent(l);const a=new _e(n,s,o);return Se.set(i,a),a}function De(t=Te){const e=Se.get(t);if(!e&&t===Te&&ot())return Pe();if(!e)throw Ie.create("no-app",{appName:t});return e}function Re(t,e,n){var s;let i=null!==(s=Ee[t])&&void 0!==s?s:t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const t=[`Unable to register library "${i}" with version "${e}":`];return r&&t.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&t.push("and"),o&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Qt.warn(t.join(" "))}Ae(new vt(`${i}-version`,(()=>({library:i,version:e})),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Me="firebase-heartbeat-store";let Le=null;function Ve(){return Le||(Le=Ut("firebase-heartbeat-database",1,{upgrade:(t,e)=>{if(0===e)try{t.createObjectStore(Me)}catch(n){}}}).catch((t=>{throw Ie.create("idb-open",{originalErrorMessage:t.message})}))),Le}async function Oe(t,e){try{const n=(await Ve()).transaction(Me,"readwrite"),s=n.objectStore(Me);await s.put(e,Fe(t)),await n.done}catch(n){if(n instanceof ht)Qt.warn(n.message);else{const t=Ie.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});Qt.warn(t.message)}}}function Fe(t){return`${t.name}!${t.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new $e(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ue();if(null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some((t=>t.date===s)))return;return this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(n){Qt.warn(n)}}async getHeartbeatsHeader(){var t;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=Ue(),{heartbeatsToSend:n,unsentEntries:s}=function(t,e=1024){const n=[];let s=t.slice();for(const i of t){const t=n.find((t=>t.agent===i.agent));if(t){if(t.dates.push(i.date),qe(n)>e){t.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),qe(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}(this._heartbeatsCache.heartbeats),i=et(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Qt.warn(e),""}}}function Ue(){return(new Date).toISOString().substring(0,10)}class $e{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!ct()&&ut().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const t=await async function(t){try{const e=(await Ve()).transaction(Me),n=await e.objectStore(Me).get(Fe(t));return await e.done,n}catch(e){if(e instanceof ht)Qt.warn(e.message);else{const t=Ie.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});Qt.warn(t.message)}}}(this.app);return(null==t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Oe(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;if(await this._canUseIndexedDBPromise){const n=await this.read();return Oe(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function qe(t){return et(JSON.stringify({version:2,heartbeats:t})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;ze="",Ae(new vt("platform-logger",(t=>new Gt(t)),"PRIVATE")),Ae(new vt("heartbeat",(t=>new Be(t)),"PRIVATE")),Re(Ht,Wt,ze),Re(Ht,Wt,"esm2017"),Re("fire-js","");var Ke,Ge,He="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var t;
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */function e(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(t,e,n){n||(n=0);var s=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)s[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)s[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var r=t.g[3],o=e+(r^n&(i^r))+s[0]+3614090360&4294967295;o=(n=(i=(r=(e=(n=(i=(r=(e=(n=(i=(r=(e=(n=(i=(r=(e=(n=(i=(r=(e=(n=(i=(r=(e=(n=(i=(r=(e=(n=(i=(r=(e=(n=(i=(r=(e=(n=(i=(r=(e=(n=(i=(r=(e=(n=(i=(r=(e=(n=(i=(r=(e=(n=(i=(r=(e=(n=(i=(r=(e=n+(o<<7&4294967295|o>>>25))+((o=r+(i^e&(n^i))+s[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^r&(e^n))+s[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(r^e))+s[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^n&(i^r))+s[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=r+(i^e&(n^i))+s[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^r&(e^n))+s[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(r^e))+s[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^n&(i^r))+s[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=r+(i^e&(n^i))+s[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^r&(e^n))+s[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(r^e))+s[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^n&(i^r))+s[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=r+(i^e&(n^i))+s[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^r&(e^n))+s[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^i&(r^e))+s[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^r&(n^i))+s[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=r+(n^i&(e^n))+s[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(r^e))+s[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(r^e&(i^r))+s[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^r&(n^i))+s[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=r+(n^i&(e^n))+s[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(r^e))+s[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(r^e&(i^r))+s[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^r&(n^i))+s[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=r+(n^i&(e^n))+s[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(r^e))+s[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(r^e&(i^r))+s[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^r&(n^i))+s[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=r+(n^i&(e^n))+s[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^n&(r^e))+s[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(r^e&(i^r))+s[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^i^r)+s[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=r+(e^n^i)+s[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(r^e^n)+s[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^r^e)+s[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^r)+s[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=r+(e^n^i)+s[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(r^e^n)+s[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^r^e)+s[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^r)+s[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=r+(e^n^i)+s[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(r^e^n)+s[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^r^e)+s[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^i^r)+s[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=r+(e^n^i)+s[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(r^e^n)+s[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^r^e)+s[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(n|~r))+s[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=r+(n^(e|~i))+s[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(r|~n))+s[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(r^(i|~e))+s[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~r))+s[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=r+(n^(e|~i))+s[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(r|~n))+s[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(r^(i|~e))+s[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(n|~r))+s[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=r+(n^(e|~i))+s[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(r|~n))+s[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(r^(i|~e))+s[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((r=(e=n+((o=e+(i^(n|~r))+s[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=r+(n^(e|~i))+s[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=r+((o=i+(e^(r|~n))+s[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+s[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+r&4294967295}function s(t,e){this.h=e;for(var n=[],s=!0,i=t.length-1;0<=i;i--){var r=0|t[i];s&&r==e||(n[i]=r,s=!1)}this.g=n}!function(t,e){function n(){}n.prototype=e.prototype,t.D=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.C=function(t,n,s){for(var i=Array(arguments.length-2),r=2;r<arguments.length;r++)i[r-2]=arguments[r];return e.prototype[n].apply(t,i)}}(e,(function(){this.blockSize=-1})),e.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},e.prototype.u=function(t,e){void 0===e&&(e=t.length);for(var s=e-this.blockSize,i=this.B,r=this.h,o=0;o<e;){if(0==r)for(;o<=s;)n(this,t,o),o+=this.blockSize;if("string"==typeof t){for(;o<e;)if(i[r++]=t.charCodeAt(o++),r==this.blockSize){n(this,i),r=0;break}}else for(;o<e;)if(i[r++]=t[o++],r==this.blockSize){n(this,i),r=0;break}}this.h=r,this.o+=e},e.prototype.v=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.o;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.u(t),t=Array(16),e=n=0;4>e;++e)for(var s=0;32>s;s+=8)t[n++]=this.g[e]>>>s&255;return t};var i={};function r(t){return-128<=t&&128>t?function(t,e){var n=i;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(t){return new s([0|t],0>t?-1:0)})):new s([0|t],0>t?-1:0)}function o(t){if(isNaN(t)||!isFinite(t))return a;if(0>t)return d(o(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=4294967296;return new s(e,0)}var a=r(0),l=r(1),c=r(16777216);function u(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function h(t){return-1==t.h}function d(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new s(n,~t.h).add(l)}function m(t,e){return t.add(d(e))}function p(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function f(t,e){this.g=t,this.h=e}function g(t,e){if(u(e))throw Error("division by zero");if(u(t))return new f(a,a);if(h(t))return e=g(d(t),e),new f(d(e.g),d(e.h));if(h(e))return e=g(t,d(e)),new f(d(e.g),e.h);if(30<t.g.length){if(h(t)||h(e))throw Error("slowDivide_ only works with positive integers.");for(var n=l,s=e;0>=s.l(t);)n=y(n),s=y(s);var i=v(n,1),r=v(s,1);for(s=v(s,2),n=v(n,2);!u(s);){var c=r.add(s);0>=c.l(t)&&(i=i.add(n),r=c),s=v(s,1),n=v(n,1)}return e=m(t,i.j(e)),new f(i,e)}for(i=a;0<=t.l(e);){for(n=Math.max(1,Math.floor(t.m()/e.m())),s=48>=(s=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,s-48),c=(r=o(n)).j(e);h(c)||0<c.l(t);)c=(r=o(n-=s)).j(e);u(r)&&(r=l),i=i.add(r),t=m(t,c)}return new f(i,t)}function y(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.i(i)<<1|t.i(i-1)>>>31;return new s(n,t.h)}function v(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],o=0;o<i;o++)r[o]=0<e?t.i(o+n)>>>e|t.i(o+n+1)<<32-e:t.i(o+n);return new s(r,t.h)}(t=s.prototype).m=function(){if(h(this))return-d(this).m();for(var t=0,e=1,n=0;n<this.g.length;n++){var s=this.i(n);t+=(0<=s?s:4294967296+s)*e,e*=4294967296}return t},t.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(u(this))return"0";if(h(this))return"-"+d(this).toString(t);for(var e=o(Math.pow(t,6)),n=this,s="";;){var i=g(n,e).g,r=((0<(n=m(n,i.j(e))).g.length?n.g[0]:n.h)>>>0).toString(t);if(u(n=i))return r+s;for(;6>r.length;)r="0"+r;s=r+s}},t.i=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},t.l=function(t){return h(t=m(this,t))?-1:u(t)?0:1},t.abs=function(){return h(this)?d(this):this},t.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var o=i+(65535&this.i(r))+(65535&t.i(r)),a=(o>>>16)+(this.i(r)>>>16)+(t.i(r)>>>16);i=a>>>16,o&=65535,a&=65535,n[r]=a<<16|o}return new s(n,-2147483648&n[n.length-1]?-1:0)},t.j=function(t){if(u(this)||u(t))return a;if(h(this))return h(t)?d(this).j(d(t)):d(d(this).j(t));if(h(t))return d(this.j(d(t)));if(0>this.l(c)&&0>t.l(c))return o(this.m()*t.m());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var l=this.i(i)>>>16,m=65535&this.i(i),f=t.i(r)>>>16,g=65535&t.i(r);n[2*i+2*r]+=m*g,p(n,2*i+2*r),n[2*i+2*r+1]+=l*g,p(n,2*i+2*r+1),n[2*i+2*r+1]+=m*f,p(n,2*i+2*r+1),n[2*i+2*r+2]+=l*f,p(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new s(n,0)},t.A=function(t){return g(this,t).h},t.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.i(i)&t.i(i);return new s(n,this.h&t.h)},t.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.i(i)|t.i(i);return new s(n,this.h|t.h)},t.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.i(i)^t.i(i);return new s(n,this.h^t.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,Ge=e,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=o,s.fromString=function t(e,n){if(0==e.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==e.charAt(0))return d(t(e.substring(1),n));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var s=o(Math.pow(n,8)),i=a,r=0;r<e.length;r+=8){var l=Math.min(8,e.length-r),c=parseInt(e.substring(r,r+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(s)).add(o(c))}return i},Ke=s}).apply(void 0!==He?He:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var We,Qe,Ye,Xe,Je,Ze,tn,en,nn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t};var n=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof nn&&nn];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(t,s){if(s)t:{var i=n;t=t.split(".");for(var r=0;r<t.length-1;r++){var o=t[r];if(!(o in i))break t;i=i[o]}(s=s(r=i[t=t[t.length-1]]))!=r&&null!=s&&e(i,t,{configurable:!0,writable:!0,value:s})}}("Array.prototype.values",(function(t){return t||function(){return function(t,e){t instanceof String&&(t+="");var n=0,s=!1,i={next:function(){if(!s&&n<t.length){var i=n++;return{value:e(i,t[i]),done:!1}}return s=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(t,e){return e}))}}));
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */
var s=s||{},i=this||self;function r(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function o(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function a(t,e,n){return t.call.apply(t.bind,arguments)}function l(t,e,n){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,s),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function c(t,e,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function h(t,e){function n(){}n.prototype=e.prototype,t.aa=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Qb=function(t,n,s){for(var i=Array(arguments.length-2),r=2;r<arguments.length;r++)i[r-2]=arguments[r];return e.prototype[n].apply(t,i)}}function d(t){const e=t.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=t[s];return n}return[]}function m(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(r(e)){const n=t.length||0,s=e.length||0;t.length=n+s;for(let i=0;i<s;i++)t[n+i]=e[i]}else t.push(e)}}function p(t){return/^[\s\xa0]*$/.test(t)}function f(){var t=i.navigator;return t&&(t=t.userAgent)?t:""}function g(t){return g[" "](t),t}g[" "]=function(){};var y=!(-1==f().indexOf("Gecko")||-1!=f().toLowerCase().indexOf("webkit")&&-1==f().indexOf("Edge")||-1!=f().indexOf("Trident")||-1!=f().indexOf("MSIE")||-1!=f().indexOf("Edge"));function v(t,e,n){for(const s in t)e.call(n,t[s],s,t)}function x(t){const e={};for(const n in t)e[n]=t[n];return e}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(t,e){let n,s;for(let i=1;i<arguments.length;i++){for(n in s=arguments[i],s)t[n]=s[n];for(let e=0;e<w.length;e++)n=w[e],Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}}function T(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function E(t){i.setTimeout((()=>{throw t}),0)}function S(){var t=k;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var N=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}((()=>new j),(t=>t.reset()));class j{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}let C,A=!1,k=new class{constructor(){this.h=this.g=null}add(t,e){const n=N.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}},I=()=>{const t=i.Promise.resolve(void 0);C=()=>{t.then(_)}};var _=()=>{for(var t;t=S();){try{t.h.call(t.g)}catch(n){E(n)}var e=N;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}A=!1};function P(){this.s=this.s,this.C=this.C}function D(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};i.addEventListener("test",t,e),i.removeEventListener("test",t,e)}catch(n){}return t}();function M(t,e){if(D.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(y){t:{try{g(e.nodeName);var i=!0;break t}catch(r){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:L[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&M.aa.h.call(this)}}h(M,D);var L={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var V="closure_listenable_"+(1e6*Math.random()|0),O=0;function F(t,e,n,s,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.ha=i,this.key=++O,this.da=this.fa=!1}function B(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function U(t){this.src=t,this.g={},this.h=0}function $(t,e){var n=e.type;if(n in t.g){var s,i=t.g[n],r=Array.prototype.indexOf.call(i,e,void 0);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(B(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function q(t,e,n,s){for(var i=0;i<t.length;++i){var r=t[i];if(!r.da&&r.listener==e&&r.capture==!!n&&r.ha==s)return i}return-1}U.prototype.add=function(t,e,n,s,i){var r=t.toString();(t=this.g[r])||(t=this.g[r]=[],this.h++);var o=q(t,e,s,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new F(e,this.src,r,!!s,i)).fa=n,t.push(e)),e};var z="closure_lm_"+(1e6*Math.random()|0),K={};function G(t,e,n,s,i){if(Array.isArray(e)){for(var r=0;r<e.length;r++)G(t,e[r],n,s,i);return null}return n=Z(n),t&&t[V]?t.K(e,n,o(s)?!!s.capture:!!s,i):function(t,e,n,s,i,r){if(!e)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=X(t);if(l||(t[z]=l=new U(t)),n=l.add(e,n,s,a,r),n.proxy)return n;if(s=function(){function t(n){return e.call(t.src,t.listener,n)}const e=Y;return t}(),n.proxy=s,s.src=t,s.listener=n,t.addEventListener)R||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),s,i);else if(t.attachEvent)t.attachEvent(Q(e.toString()),s);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(s)}return n}(t,e,n,!1,s,i)}function H(t,e,n,s,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)H(t,e[r],n,s,i);else s=o(s)?!!s.capture:!!s,n=Z(n),t&&t[V]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=q(r=t.g[e],n,s,i))&&(B(r[n]),Array.prototype.splice.call(r,n,1),0==r.length&&(delete t.g[e],t.h--)))):t&&(t=X(t))&&(e=t.g[e.toString()],t=-1,e&&(t=q(e,n,s,i)),(n=-1<t?e[t]:null)&&W(n))}function W(t){if("number"!=typeof t&&t&&!t.da){var e=t.src;if(e&&e[V])$(e.i,t);else{var n=t.type,s=t.proxy;e.removeEventListener?e.removeEventListener(n,s,t.capture):e.detachEvent?e.detachEvent(Q(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=X(e))?($(n,t),0==n.h&&(n.src=null,e[z]=null)):B(t)}}}function Q(t){return t in K?K[t]:K[t]="on"+t}function Y(t,e){if(t.da)t=!0;else{e=new M(e,this);var n=t.listener,s=t.ha||t.src;t.fa&&W(t),t=n.call(s,e)}return t}function X(t){return(t=t[z])instanceof U?t:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(t){return"function"==typeof t?t:(t[J]||(t[J]=function(e){return t.handleEvent(e)}),t[J])}function tt(){P.call(this),this.i=new U(this),this.M=this,this.F=null}function et(t,e){var n,s=t.F;if(s)for(n=[];s;s=s.F)n.push(s);if(t=t.M,s=e.type||e,"string"==typeof e)e=new D(e,t);else if(e instanceof D)e.target=e.target||t;else{var i=e;b(e=new D(s,t),i)}if(i=!0,n)for(var r=n.length-1;0<=r;r--){var o=e.g=n[r];i=nt(o,s,!0,e)&&i}if(i=nt(o=e.g=t,s,!0,e)&&i,i=nt(o,s,!1,e)&&i,n)for(r=0;r<n.length;r++)i=nt(o=e.g=n[r],s,!1,e)&&i}function nt(t,e,n,s){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,r=0;r<e.length;++r){var o=e[r];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&$(t.i,o),i=!1!==a.call(l,s)&&i}}return i&&!s.defaultPrevented}function st(t,e,n){if("function"==typeof t)n&&(t=c(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=c(t.handleEvent,t)}return 2147483647<Number(e)?-1:i.setTimeout(t,e||0)}function it(t){t.g=st((()=>{t.g=null,t.i&&(t.i=!1,it(t))}),t.l);const e=t.h;t.h=null,t.m.apply(null,e)}h(tt,P),tt.prototype[V]=!0,tt.prototype.removeEventListener=function(t,e,n,s){H(this,t,e,n,s)},tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],s=0;s<n.length;s++)B(n[s]);delete e.g[t],e.h--}}this.F=null},tt.prototype.K=function(t,e,n,s){return this.i.add(String(t),e,!1,n,s)},tt.prototype.L=function(t,e,n,s){return this.i.add(String(t),e,!0,n,s)};class rt extends P{constructor(t,e){super(),this.m=t,this.l=e,this.h=null,this.i=!1,this.g=null}j(t){this.h=arguments,this.g?this.i=!0:it(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ot(t){P.call(this),this.h=t,this.g={}}h(ot,P);var at=[];function lt(t){v(t.g,(function(t,e){this.g.hasOwnProperty(e)&&W(t)}),t),t.g={}}ot.prototype.N=function(){ot.aa.N.call(this),lt(this)},ot.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ct=i.JSON.stringify,ut=i.JSON.parse,ht=class{stringify(t){return i.JSON.stringify(t,void 0)}parse(t){return i.JSON.parse(t,void 0)}};function dt(){}function mt(t){return t.h||(t.h=t.i())}function pt(){}dt.prototype.h=null;var ft={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gt(){D.call(this,"d")}function yt(){D.call(this,"c")}h(gt,D),h(yt,D);var vt={},xt=null;function wt(){return xt=xt||new tt}function bt(t){D.call(this,vt.La,t)}function Tt(t){const e=wt();et(e,new bt(e))}function Et(t,e){D.call(this,vt.STAT_EVENT,t),this.stat=e}function St(t){const e=wt();et(e,new Et(e,t))}function Nt(t,e){D.call(this,vt.Ma,t),this.size=e}function jt(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){t()}),e)}function Ct(){this.g=!0}function At(t,e,n,s){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var s=n[t];if(!(2>s.length)){var i=s[1];if(Array.isArray(i)&&!(1>i.length)){var r=i[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<i.length;o++)i[o]=""}}}return ct(n)}catch(a){return e}}(t,n)+(s?" "+s:"")}))}vt.La="serverreachability",h(bt,D),vt.STAT_EVENT="statevent",h(Et,D),vt.Ma="timingevent",h(Nt,D),Ct.prototype.xa=function(){this.g=!1},Ct.prototype.info=function(){};var kt,It={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_t={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Pt(){}function Dt(t,e,n,s){this.j=t,this.i=e,this.l=n,this.R=s||1,this.U=new ot(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rt}function Rt(){this.i=null,this.g="",this.h=!1}h(Pt,dt),Pt.prototype.g=function(){return new XMLHttpRequest},Pt.prototype.i=function(){return{}},kt=new Pt;var Mt={},Lt={};function Vt(t,e,n){t.L=1,t.v=ce(ie(e)),t.m=n,t.P=!0,Ot(t,null)}function Ot(t,e){t.F=Date.now(),Ut(t),t.A=ie(t.v);var n=t.A,s=t.R;Array.isArray(s)||(s=[String(s)]),Te(n.i,"t",s),t.C=0,n=t.j.J,t.h=new Rt,t.g=xn(t.j,n?e:null,!t.m),0<t.O&&(t.M=new rt(c(t.Y,t,t.g),t.O)),e=t.U,n=t.g,s=t.ca;var i="readystatechange";Array.isArray(i)||(i&&(at[0]=i.toString()),i=at);for(var r=0;r<i.length;r++){var o=G(n,i[r],s||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}e=t.H?x(t.H):{},t.m?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.m,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Tt(),function(t,e,n,s,i,r){t.info((function(){if(t.g)if(r)for(var o="",a=r.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+s+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o}))}(t.i,t.u,t.A,t.l,t.R,t.m)}function Ft(t){return!!t.g&&("GET"==t.u&&2!=t.L&&t.j.Ca)}function Bt(t,e){var n=t.C,s=e.indexOf("\n",n);return-1==s?Lt:(n=Number(e.substring(n,s)),isNaN(n)?Mt:(s+=1)+n>e.length?Lt:(e=e.slice(s,s+n),t.C=s+n,e))}function Ut(t){t.S=Date.now()+t.I,$t(t,t.I)}function $t(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=jt(c(t.ba,t),e)}function qt(t){t.B&&(i.clearTimeout(t.B),t.B=null)}function zt(t){0==t.j.G||t.J||pn(t.j,t)}function Kt(t){qt(t);var e=t.M;e&&"function"==typeof e.ma&&e.ma(),t.M=null,lt(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.ma())}function Gt(t,e){try{var n=t.j;if(0!=n.G&&(n.g==t||Xt(n.h,t)))if(!t.K&&Xt(n.h,t)&&3==n.G){try{var s=n.Da.g.parse(e)}catch(u){s=null}if(Array.isArray(s)&&3==s.length){var i=s;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;mn(n),He(n)}un(n),St(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=jt(c(n.Za,n),6e3));if(1>=Yt(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else gn(n,11)}else if((t.K||n.g==t)&&mn(n),!p(e))for(i=n.Da.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const e=c[3];null!=e&&(n.la=e,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"==typeof u&&0<u&&(s=1.5*u,n.L=s,n.j.info("backChannelRequestTimeoutMs_="+s)),s=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var r=s.h;r.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(r.j=r.l,r.g=new Set,r.h&&(Jt(r,r.h),r.h=null))}if(s.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(s.ya=t,le(s.I,s.D,t))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-t.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=t;if((s=n).qa=vn(s,s.J?s.ia:null,s.W),o.K){Zt(s.h,o);var a=o,l=s.L;l&&(a.I=l),a.B&&(qt(a),Ut(a)),s.g=o}else cn(s);0<n.i.length&&rn(n)}else"stop"!=c[0]&&"close"!=c[0]||gn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?gn(n,7):Ge(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Tt()}catch(u){}}Dt.prototype.ca=function(t){t=t.target;const e=this.M;e&&3==$e(t)?e.j():this.Y(t)},Dt.prototype.Y=function(t){try{if(t==this.g)t:{const d=$e(this.g);var e=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||qe(this.g)))){this.J||4!=d||7==e||Tt(),qt(this);var n=this.g.Z();this.X=n;e:if(Ft(this)){var s=qe(this.g);t="";var r=s.length,o=4==$e(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Kt(this),zt(this);var a="";break e}this.h.i=new i.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(s[e],{stream:!(o&&e==r-1)});s.length=0,this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(t,e,n,s,i,r,o){t.info((function(){return"XMLHTTP RESP ("+s+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+r+" "+o}))}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){e:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break e}}u=null}if(!(n=u)){this.o=!1,this.s=3,St(12),Kt(this),zt(this);break t}At(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gt(this,n)}if(this.P){let t;for(n=!0;!this.J&&this.C<a.length;){if(t=Bt(this,a),t==Lt){4==d&&(this.s=4,St(14),n=!1),At(this.i,this.l,null,"[Incomplete Response]");break}if(t==Mt){this.s=4,St(15),At(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}At(this.i,this.l,t,null),Gt(this,t)}if(Ft(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,St(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),hn(h),h.M=!0,St(11))}}else At(this.i,this.l,a,"[Invalid Chunked Response]"),Kt(this),zt(this)}else At(this.i,this.l,a,null),Gt(this,a);4==d&&Kt(this),this.o&&!this.J&&(4==d?pn(this.j,this):(this.o=!1,Ut(this)))}else(function(t){const e={};t=(t.g&&2<=$e(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let s=0;s<t.length;s++){if(p(t[s]))continue;var n=T(t[s]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const r=e[i]||[];e[i]=r,r.push(n)}!function(t,e){for(const n in t)e.call(void 0,t[n],n,t)}(e,(function(t){return t.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,St(12)):(this.s=0,St(13)),Kt(this),zt(this)}}}catch(d){}},Dt.prototype.cancel=function(){this.J=!0,Kt(this)},Dt.prototype.ba=function(){this.B=null;const t=Date.now();0<=t-this.S?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.i,this.A),2!=this.L&&(Tt(),St(17)),Kt(this),this.s=2,zt(this)):$t(this,this.S-t)};var Ht=class{constructor(t,e){this.g=t,this.map=e}};function Wt(t){this.l=t||10,i.PerformanceNavigationTiming?t=0<(t=i.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qt(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Yt(t){return t.h?1:t.g?t.g.size:0}function Xt(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Jt(t,e){t.g?t.g.add(e):t.h=e}function Zt(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function te(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return d(t.i)}function ee(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(r(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function(t){if(t.na&&"function"==typeof t.na)return t.na();if(!t.V||"function"!=typeof t.V){if("undefined"!=typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!=typeof Set&&t instanceof Set)){if(r(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const s in t)e[n++]=s;return e}}}(t),s=function(t){if(t.V&&"function"==typeof t.V)return t.V();if("undefined"!=typeof Map&&t instanceof Map||"undefined"!=typeof Set&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(r(t)){for(var e=[],n=t.length,s=0;s<n;s++)e.push(t[s]);return e}for(s in e=[],n=0,t)e[n++]=t[s];return e}(t),i=s.length,o=0;o<i;o++)e.call(void 0,s[o],n&&n[o],t)}Wt.prototype.cancel=function(){if(this.i=te(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var ne=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function se(t){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,t instanceof se){this.h=t.h,re(this,t.j),this.o=t.o,this.g=t.g,oe(this,t.s),this.l=t.l;var e=t.i,n=new ve;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),ae(this,n),this.m=t.m}else t&&(e=String(t).match(ne))?(this.h=!1,re(this,e[1]||"",!0),this.o=ue(e[2]||""),this.g=ue(e[3]||"",!0),oe(this,e[4]),this.l=ue(e[5]||"",!0),ae(this,e[6]||"",!0),this.m=ue(e[7]||"")):(this.h=!1,this.i=new ve(null,this.h))}function ie(t){return new se(t)}function re(t,e,n){t.j=n?ue(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function oe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.s=e}else t.s=null}function ae(t,e,n){e instanceof ve?(t.i=e,function(t,e){e&&!t.j&&(xe(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(we(this,e),Te(this,n,t))}),t)),t.j=e}(t.i,t.h)):(n||(e=he(e,ge)),t.i=new ve(e,t.h))}function le(t,e,n){t.i.set(e,n)}function ce(t){return le(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ue(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function he(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,de),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function de(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}se.prototype.toString=function(){var t=[],e=this.j;e&&t.push(he(e,me,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.o)&&t.push(he(e,me,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(he(n,"/"==n.charAt(0)?fe:pe,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.m)&&t.push("#",he(n,ye)),t.join("")};var me=/[#\/\?@]/g,pe=/[#\?:]/g,fe=/[#\?]/g,ge=/[#\?@]/g,ye=/#/g;function ve(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function xe(t){t.g||(t.g=new Map,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var s=t[n].indexOf("="),i=null;if(0<=s){var r=t[n].substring(0,s);i=t[n].substring(s+1)}else r=t[n];e(r,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function we(t,e){xe(t),e=Ee(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function be(t,e){return xe(t),e=Ee(t,e),t.g.has(e)}function Te(t,e,n){we(t,e),0<n.length&&(t.i=null,t.g.set(Ee(t,e),d(n)),t.h+=n.length)}function Ee(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Se(t,e,n,s,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),s(n)}catch(r){}}function Ne(){this.g=new ht}function je(t,e,n){const s=n||"";try{ee(t,(function(t,n){let i=t;o(t)&&(i=ct(t)),e.push(s+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(s+"type="+encodeURIComponent("_badmap")),i}}function Ce(t){this.l=t.Ub||null,this.j=t.eb||!1}function Ae(t,e){tt.call(this),this.D=t,this.o=e,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function ke(t){t.j.read().then(t.Pa.bind(t)).catch(t.ga.bind(t))}function Ie(t){t.readyState=4,t.l=null,t.j=null,t.v=null,_e(t)}function _e(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Pe(t){let e="";return v(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function De(t,e,n){t:{for(s in n){var s=!1;break t}s=!0}s||(n=Pe(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):le(t,e,n))}function Re(t){tt.call(this),this.headers=new Map,this.o=t||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=ve.prototype).add=function(t,e){xe(this),this.i=null,t=Ee(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},t.forEach=function(t,e){xe(this),this.g.forEach((function(n,s){n.forEach((function(n){t.call(e,n,s,this)}),this)}),this)},t.na=function(){xe(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let s=0;s<e.length;s++){const i=t[s];for(let t=0;t<i.length;t++)n.push(e[s])}return n},t.V=function(t){xe(this);let e=[];if("string"==typeof t)be(this,t)&&(e=e.concat(this.g.get(Ee(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},t.set=function(t,e){return xe(this),this.i=null,be(this,t=Ee(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var s=e[n];const r=encodeURIComponent(String(s)),o=this.V(s);for(s=0;s<o.length;s++){var i=r;""!==o[s]&&(i+="="+encodeURIComponent(String(o[s]))),t.push(i)}}return this.i=t.join("&")},h(Ce,dt),Ce.prototype.g=function(){return new Ae(this.l,this.j)},Ce.prototype.i=function(t){return function(){return t}}({}),h(Ae,tt),(t=Ae.prototype).open=function(t,e){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=t,this.A=e,this.readyState=1,_e(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.u,method:this.B,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||i).fetch(new Request(this.A,e)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ie(this)),this.readyState=0},t.Sa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,_e(this)),this.g&&(this.readyState=3,_e(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==i.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ke(this)}else t.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var e=t.value?t.value:new Uint8Array(0);(e=this.v.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ie(this):_e(this),3==this.readyState&&ke(this)}},t.Ra=function(t){this.g&&(this.response=this.responseText=t,Ie(this))},t.Qa=function(t){this.g&&(this.response=t,Ie(this))},t.ga=function(){this.g&&Ie(this)},t.setRequestHeader=function(t,e){this.u.append(t,e)},t.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Ae.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}}),h(Re,tt);var Me=/^https?$/i,Le=["POST","PUT"];function Ve(t,e){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=e,t.m=5,Oe(t),Be(t)}function Oe(t){t.A||(t.A=!0,et(t,"complete"),et(t,"error"))}function Fe(t){if(t.h&&void 0!==s&&(!t.v[1]||4!=$e(t)||2!=t.Z()))if(t.u&&4==$e(t))st(t.Ea,0,t);else if(et(t,"readystatechange"),4==$e(t)){t.h=!1;try{const s=t.Z();t:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var r;if(r=0===s){var o=String(t.D).match(ne)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),r=!Me.test(o?o.toLowerCase():"")}n=r}if(n)et(t,"complete"),et(t,"success");else{t.m=6;try{var a=2<$e(t)?t.g.statusText:""}catch(l){a=""}t.l=a+" ["+t.Z()+"]",Oe(t)}}finally{Be(t)}}}function Be(t,e){if(t.g){Ue(t);const s=t.g,i=t.v[0]?()=>{}:null;t.g=null,t.v=null,e||et(t,"ready");try{s.onreadystatechange=i}catch(n){}}}function Ue(t){t.I&&(i.clearTimeout(t.I),t.I=null)}function $e(t){return t.g?t.g.readyState:0}function qe(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.H){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function ze(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ke(t){this.Aa=0,this.i=[],this.j=new Ct,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ze("failFast",!1,t),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ze("baseRetryDelayMs",5e3,t),this.cb=ze("retryDelaySeedMs",1e4,t),this.Wa=ze("forwardChannelMaxRetries",2,t),this.wa=ze("forwardChannelRequestTimeoutMs",2e4,t),this.pa=t&&t.xmlHttpFactory||void 0,this.Xa=t&&t.Tb||void 0,this.Ca=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.h=new Wt(t&&t.concurrentRequestLimit),this.Da=new Ne,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=t&&t.Rb||!1,t&&t.xa&&this.j.xa(),t&&t.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&t&&t.detectBufferingProxy||!1,this.ja=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.ja=t.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Ge(t){if(sn(t),3==t.G){var e=t.U++,n=ie(t.I);if(le(n,"SID",t.K),le(n,"RID",e),le(n,"TYPE","terminate"),an(t,n),(e=new Dt(t,t.j,e)).L=2,e.v=ce(ie(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(e.v.toString(),"")}catch(s){}!n&&i.Image&&((new Image).src=e.v,n=!0),n||(e.g=xn(e.j,null),e.g.ea(e.v)),e.F=Date.now(),Ut(e)}yn(t)}function He(t){t.g&&(hn(t),t.g.cancel(),t.g=null)}function sn(t){He(t),t.u&&(i.clearTimeout(t.u),t.u=null),mn(t),t.h.cancel(),t.s&&("number"==typeof t.s&&i.clearTimeout(t.s),t.s=null)}function rn(t){if(!Qt(t.h)&&!t.s){t.s=!0;var e=t.Ga;C||I(),A||(C(),A=!0),k.add(e,t),t.B=0}}function on(t,e){var n;n=e?e.l:t.U++;const s=ie(t.I);le(s,"SID",t.K),le(s,"RID",n),le(s,"AID",t.T),an(t,s),t.m&&t.o&&De(s,t.m,t.o),n=new Dt(t,t.j,n,t.B+1),null===t.m&&(n.H=t.o),e&&(t.i=e.D.concat(t.i)),e=ln(t,n,1e3),n.I=Math.round(.5*t.wa)+Math.round(.5*t.wa*Math.random()),Jt(t.h,n),Vt(n,s,e)}function an(t,e){t.H&&v(t.H,(function(t,n){le(e,n,t)})),t.l&&ee({},(function(t,n){le(e,n,t)}))}function ln(t,e,n){n=Math.min(t.i.length,n);var s=t.l?c(t.l.Na,t.l,t):null;t:{var i=t.i;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=i[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=e,0>n)e=Math.max(0,i[a].g-100),o=!1;else try{je(l,t,"req"+n+"_")}catch(r){s&&s(l)}}if(o){s=t.join("&");break t}}}return t=t.i.splice(0,n),e.D=t,s}function cn(t){if(!t.g&&!t.u){t.Y=1;var e=t.Fa;C||I(),A||(C(),A=!0),k.add(e,t),t.v=0}}function un(t){return!(t.g||t.u||3<=t.v)&&(t.Y++,t.u=jt(c(t.Fa,t),fn(t,t.v)),t.v++,!0)}function hn(t){null!=t.A&&(i.clearTimeout(t.A),t.A=null)}function dn(t){t.g=new Dt(t,t.j,"rpc",t.Y),null===t.m&&(t.g.H=t.o),t.g.O=0;var e=ie(t.qa);le(e,"RID","rpc"),le(e,"SID",t.K),le(e,"AID",t.T),le(e,"CI",t.F?"0":"1"),!t.F&&t.ja&&le(e,"TO",t.ja),le(e,"TYPE","xmlhttp"),an(t,e),t.m&&t.o&&De(e,t.m,t.o),t.L&&(t.g.I=t.L);var n=t.g;t=t.ia,n.L=1,n.v=ce(ie(e)),n.m=null,n.P=!0,Ot(n,t)}function mn(t){null!=t.C&&(i.clearTimeout(t.C),t.C=null)}function pn(t,e){var n=null;if(t.g==e){mn(t),hn(t),t.g=null;var s=2}else{if(!Xt(t.h,e))return;n=e.D,Zt(t.h,e),s=1}if(0!=t.G)if(e.o)if(1==s){n=e.m?e.m.length:0,e=Date.now()-e.F;var i=t.B;et(s=wt(),new Nt(s,n)),rn(t)}else cn(t);else if(3==(i=e.s)||0==i&&0<e.X||!(1==s&&function(t,e){return!(Yt(t.h)>=t.h.j-(t.s?1:0)||(t.s?(t.i=e.D.concat(t.i),0):1==t.G||2==t.G||t.B>=(t.Va?0:t.Wa)||(t.s=jt(c(t.Ga,t,e),fn(t,t.B)),t.B++,0)))}(t,e)||2==s&&un(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),i){case 1:gn(t,5);break;case 4:gn(t,10);break;case 3:gn(t,6);break;default:gn(t,2)}}function fn(t,e){let n=t.Ta+Math.floor(Math.random()*t.cb);return t.isActive()||(n*=2),n*e}function gn(t,e){if(t.j.info("Error code "+e),2==e){var n=c(t.fb,t),s=t.Xa;const e=!s;s=new se(s||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||re(s,"https"),ce(s),e?function(t,e){const n=new Ct;if(i.Image){const s=new Image;s.onload=u(Se,n,"TestLoadImage: loaded",!0,e,s),s.onerror=u(Se,n,"TestLoadImage: error",!1,e,s),s.onabort=u(Se,n,"TestLoadImage: abort",!1,e,s),s.ontimeout=u(Se,n,"TestLoadImage: timeout",!1,e,s),i.setTimeout((function(){s.ontimeout&&s.ontimeout()}),1e4),s.src=t}else e(!1)}(s.toString(),n):function(t,e){new Ct;const n=new AbortController,s=setTimeout((()=>{n.abort(),Se(0,0,!1,e)}),1e4);fetch(t,{signal:n.signal}).then((t=>{clearTimeout(s),t.ok?Se(0,0,!0,e):Se(0,0,!1,e)})).catch((()=>{clearTimeout(s),Se(0,0,!1,e)}))}(s.toString(),n)}else St(2);t.G=0,t.l&&t.l.sa(e),yn(t),sn(t)}function yn(t){if(t.G=0,t.ka=[],t.l){const e=te(t.h);0==e.length&&0==t.i.length||(m(t.ka,e),m(t.ka,t.i),t.h.i.length=0,d(t.i),t.i.length=0),t.l.ra()}}function vn(t,e,n){var s=n instanceof se?ie(n):new se(n);if(""!=s.g)e&&(s.g=e+"."+s.g),oe(s,s.s);else{var r=i.location;s=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var o=new se(null);s&&re(o,s),e&&(o.g=e),r&&oe(o,r),n&&(o.l=n),s=o}return n=t.D,e=t.ya,n&&e&&le(s,n,e),le(s,"VER",t.la),an(t,s),s}function xn(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=t.Ca&&!t.pa?new Re(new Ce({eb:n})):new Re(t.pa)).Ha(t.J),e}function wn(){}function bn(){}function Tn(t,e){tt.call(this),this.g=new Ke(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.va&&(t?t["X-WebChannel-Client-Profile"]=e.va:t={"X-WebChannel-Client-Profile":e.va}),this.g.S=t,(t=e&&e.Sb)&&!p(t)&&(this.g.m=t),this.v=e&&e.supportsCrossDomainXhr||!1,this.u=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!p(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new Nn(this)}function En(t){gt.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Sn(){yt.call(this),this.status=1}function Nn(t){this.g=t}(t=Re.prototype).Ha=function(t){this.J=t},t.ea=function(t,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kt.g(),this.v=this.o?mt(this.o):mt(kt),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(e,String(t),!0),this.B=!1}catch(o){return void Ve(this,o)}if(t=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var r in s)n.set(r,s[r]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const t of s.keys())n.set(t,s.get(t))}s=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),r=i.FormData&&t instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Le,e,void 0))||s||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ue(this),this.u=!0,this.g.send(t),this.u=!1}catch(o){Ve(this,o)}},t.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=t||7,et(this,"complete"),et(this,"abort"),Be(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Be(this,!0)),Re.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Fe(this):this.bb())},t.bb=function(){Fe(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<$e(this)?this.g.status:-1}catch(t){return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},t.Oa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ut(e)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=Ke.prototype).la=8,t.G=1,t.connect=function(t,e,n,s){St(0),this.W=t,this.H=e||{},n&&void 0!==s&&(this.H.OSID=n,this.H.OAID=s),this.F=this.X,this.I=vn(this,null,this.W),rn(this)},t.Ga=function(t){if(this.s)if(this.s=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new Dt(this,this.j,t);let r=this.o;if(this.S&&(r?(r=x(r),b(r,this.S)):r=this.S),null!==this.m||this.O||(i.H=r,r=null),this.P)t:{for(var e=0,n=0;n<this.i.length;n++){var s=this.i[n];if(void 0===(s="__data__"in s.map&&"string"==typeof(s=s.map.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=n;break t}if(4096===e||n===this.i.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=ln(this,i,e),le(n=ie(this.I),"RID",t),le(n,"CVER",22),this.D&&le(n,"X-HTTP-Session-Id",this.D),an(this,n),r&&(this.O?e="headers="+encodeURIComponent(String(Pe(r)))+"&"+e:this.m&&De(n,this.m,r)),Jt(this.h,i),this.Ua&&le(n,"TYPE","init"),this.P?(le(n,"$req",e),le(n,"SID","null"),i.T=!0,Vt(i,n,null)):Vt(i,n,e),this.G=2}}else 3==this.G&&(t?on(this,t):0==this.i.length||Qt(this.h)||on(this))},t.Fa=function(){if(this.u=null,dn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var t=2*this.R;this.j.info("BP detection timer enabled: "+t),this.A=jt(c(this.ab,this),t)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,St(10),He(this),dn(this))},t.Za=function(){null!=this.C&&(this.C=null,He(this),un(this),St(19))},t.fb=function(t){t?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=wn.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},bn.prototype.g=function(t,e){return new Tn(t,e)},h(Tn,tt),Tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){Ge(this.g)},Tn.prototype.o=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.u&&((n={}).__data__=ct(t),t=n);e.i.push(new Ht(e.Ya++,t)),3==e.G&&rn(e)},Tn.prototype.N=function(){this.g.l=null,delete this.j,Ge(this.g),delete this.g,Tn.aa.N.call(this)},h(En,gt),h(Sn,yt),h(Nn,wn),Nn.prototype.ua=function(){et(this.g,"a")},Nn.prototype.ta=function(t){et(this.g,new En(t))},Nn.prototype.sa=function(t){et(this.g,new Sn)},Nn.prototype.ra=function(){et(this.g,"b")},bn.prototype.createWebChannel=bn.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,en=function(){return new bn},tn=function(){return wt()},Ze=vt,Je={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},It.NO_ERROR=0,It.TIMEOUT=8,It.HTTP_ERROR=6,Xe=It,_t.COMPLETE="complete",Ye=_t,pt.EventType=ft,ft.OPEN="a",ft.CLOSE="b",ft.ERROR="c",ft.MESSAGE="d",tt.prototype.listen=tt.prototype.K,Qe=pt,Re.prototype.listenOnce=Re.prototype.L,Re.prototype.getLastError=Re.prototype.Ka,Re.prototype.getLastErrorCode=Re.prototype.Ba,Re.prototype.getStatus=Re.prototype.Z,Re.prototype.getResponseJson=Re.prototype.Oa,Re.prototype.getResponseText=Re.prototype.oa,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Ha,We=Re}).apply(void 0!==nn?nn:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const sn="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let on="10.14.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an=new At("@firebase/firestore");function ln(){return an.logLevel}function cn(t,...e){if(an.logLevel<=Tt.DEBUG){const n=e.map(dn);an.debug(`Firestore (${on}): ${t}`,...n)}}function un(t,...e){if(an.logLevel<=Tt.ERROR){const n=e.map(dn);an.error(`Firestore (${on}): ${t}`,...n)}}function hn(t,...e){if(an.logLevel<=Tt.WARN){const n=e.map(dn);an.warn(`Firestore (${on}): ${t}`,...n)}}function dn(t){if("string"==typeof t)return t;try{
/**
    * @license
    * Copyright 2020 Google LLC
    *
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    *   http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    */
return e=t,JSON.stringify(e)}catch(n){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t="Unexpected state"){const e=`FIRESTORE (${on}) INTERNAL ASSERTION FAILED: `+t;throw un(e),new Error(e)}function pn(t,e){t||mn()}function fn(t,e){return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class yn extends ht{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class wn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(rn.UNAUTHENTICATED)))}shutdown(){}}class bn{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class Tn{constructor(t){this.t=t,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){pn(void 0===this.o);let n=this.i;const s=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let i=new vn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new vn,t.enqueueRetryable((()=>s(this.currentUser)))};const r=()=>{const e=i;t.enqueueRetryable((async()=>{await e.promise,await s(this.currentUser)}))},o=t=>{cn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.o&&(this.auth.addAuthTokenListener(this.o),r())};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(cn("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new vn)}}),0),r()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(cn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(pn("string"==typeof e.accessToken),new xn(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return pn(null===t||"string"==typeof t),new rn(t)}}class En{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Sn{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new En(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Nn{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jn{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){pn(void 0===this.o);const n=t=>{null!=t.error&&cn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,cn("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const s=t=>{cn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>s(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?s(t):cn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(pn("string"==typeof t.token),this.R=t.token,new Nn(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(256/62);let n="";for(;n.length<20;){const s=Cn(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<e&&(n+=t.charAt(s[i]%62))}return n}}function kn(t,e){return t<e?-1:t>e?1:0}function In(t,e,n){return t.length===e.length&&t.every(((t,s)=>n(t,e[s])))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new yn(gn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new yn(gn.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new yn(gn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new yn(gn.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return _n.fromMillis(Date.now())}static fromDate(t){return _n.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new _n(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?kn(this.nanoseconds,t.nanoseconds):kn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Pn(t)}static min(){return new Pn(new _n(0,0))}static max(){return new Pn(new _n(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(t,e,n){void 0===e?e=0:e>t.length&&mn(),void 0===n?n=t.length-e:n>t.length-e&&mn(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Dn.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Dn?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const n=t.get(s),i=e.get(s);if(n<i)return-1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Rn extends Dn{construct(t,e,n){return new Rn(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new yn(gn.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new Rn(e)}static emptyPath(){return new Rn([])}}const Mn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ln extends Dn{construct(t,e,n){return new Ln(t,e,n)}static isValidIdentifier(t){return Mn.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ln.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ln(["__name__"])}static fromServerFormat(t){const e=[];let n="",s=0;const i=()=>{if(0===n.length)throw new yn(gn.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let r=!1;for(;s<t.length;){const e=t[s];if("\\"===e){if(s+1===t.length)throw new yn(gn.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[s+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new yn(gn.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,s+=2}else"`"===e?(r=!r,s++):"."!==e||r?(n+=e,s++):(i(),s++)}if(i(),r)throw new yn(gn.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ln(e)}static emptyPath(){return new Ln([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(t){this.path=t}static fromPath(t){return new Vn(Rn.fromString(t))}static fromName(t){return new Vn(Rn.fromString(t).popFirst(5))}static empty(){return new Vn(Rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Rn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Rn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Vn(new Rn(t.slice()))}}function On(t){return new Fn(t.readTime,t.key,-1)}class Fn{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new Fn(Pn.min(),Vn.empty(),-1)}static max(){return new Fn(Pn.max(),Vn.empty(),-1)}}function Bn(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=Vn.comparator(t.documentKey,e.documentKey),0!==n?n:kn(t.largestBatchId,e.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class Un{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $n(t){if(t.code!==gn.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==t.message)throw t;cn("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&mn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new qn(((n,s)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,s)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,s)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof qn?e:qn.resolve(e)}catch(e){return qn.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):qn.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):qn.reject(e)}static resolve(t){return new qn(((e,n)=>{e(t)}))}static reject(t){return new qn(((e,n)=>{n(t)}))}static waitFor(t){return new qn(((e,n)=>{let s=0,i=0,r=!1;t.forEach((t=>{++s,t.next((()=>{++i,r&&i===s&&e()}),(t=>n(t)))})),r=!0,i===s&&e()}))}static or(t){let e=qn.resolve(!1);for(const n of t)e=e.next((t=>t?qn.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,s)=>{n.push(e.call(this,t,s))})),this.waitFor(n)}static mapArray(t,e){return new qn(((n,s)=>{const i=t.length,r=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;e(t[l]).next((t=>{r[l]=t,++o,o===i&&n(r)}),(t=>s(t)))}}))}static doWhile(t,e){return new qn(((n,s)=>{const i=()=>{!0===t()?e().next((()=>{i()}),s):n()};i()}))}}function zn(t){return"IndexedDbTransactionError"===t.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.ie(t),this.se=t=>e.writeSequenceNumber(t))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}function Gn(t){return null==t}function Hn(t){return 0===t&&1/t==-1/0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Wn(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qn(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Yn(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kn.oe=-1;class Xn{constructor(t,e){this.comparator=t,this.root=e||Zn.EMPTY}insert(t,e){return new Xn(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Zn.BLACK,null,null))}remove(t){return new Xn(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Zn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(0===s)return e+n.left.size;s<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Jn(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Jn(this.root,t,this.comparator,!1)}getReverseIterator(){return new Jn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Jn(this.root,t,this.comparator,!0)}}class Jn{constructor(t,e,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,e&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Zn{constructor(t,e,n,s,i){this.key=t,this.value=e,this.color=null!=n?n:Zn.RED,this.left=null!=s?s:Zn.EMPTY,this.right=null!=i?i:Zn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,s,i){return new Zn(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=s?s:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let s=this;const i=n(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,e,n),null):0===i?s.copy(null,e,null,null,null):s.copy(null,null,null,null,s.right.insert(t,e,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Zn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,s=this;if(e(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,e),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===e(t,s.key)){if(s.right.isEmpty())return Zn.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,e))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Zn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Zn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw mn();if(this.right.isRed())throw mn();const t=this.left.check();if(t!==this.right.check())throw mn();return t+(this.isRed()?0:1)}}Zn.EMPTY=null,Zn.RED=!0,Zn.BLACK=!1,Zn.EMPTY=new class{constructor(){this.size=0}get key(){throw mn()}get value(){throw mn()}get color(){throw mn()}get left(){throw mn()}get right(){throw mn()}copy(t,e,n,s,i){return this}insert(t,e,n){return new Zn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ts{constructor(t){this.comparator=t,this.data=new Xn(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,t[1])>=0)return;e(s.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new es(this.data.getIterator())}getIteratorFrom(t){return new es(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof ts))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,s=n.getNext().key;if(0!==this.comparator(t,s))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new ts(this.comparator);return e.data=t,e}}class es{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(t){this.fields=t,t.sort(Ln.comparator)}static empty(){return new ns([])}unionWith(t){let e=new ts(Ln.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new ns(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return In(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ss("Invalid base64 string: "+e):e}}(t);return new is(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new is(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return kn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}is.EMPTY_BYTE_STRING=new is("");const rs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function os(t){if(pn(!!t),"string"==typeof t){let e=0;const n=rs.exec(t);if(pn(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:as(t.seconds),nanos:as(t.nanos)}}function as(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ls(t){return"string"==typeof t?is.fromBase64String(t):is.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function us(t){const e=t.mapValue.fields.__previous_value__;return cs(e)?us(e):e}function hs(t){const e=os(t.mapValue.fields.__local_write_time__.timestampValue);return new _n(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(t,e,n,s,i,r,o,a,l){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=r,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class ms{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new ms("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof ms&&t.projectId===this.projectId&&t.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps={fields:{__type__:{stringValue:"__max__"}}};function fs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cs(t)?4:function(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)?9007199254740991:function(t){var e,n;return"__vector__"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}(t)?10:11:mn()}function gs(t,e){if(t===e)return!0;const n=fs(t);if(n!==fs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hs(t).isEqual(hs(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=os(t.timestampValue),s=os(e.timestampValue);return n.seconds===s.seconds&&n.nanos===s.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return s=e,ls(t.bytesValue).isEqual(ls(s.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return as(t.geoPointValue.latitude)===as(e.geoPointValue.latitude)&&as(t.geoPointValue.longitude)===as(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return as(t.integerValue)===as(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=as(t.doubleValue),s=as(e.doubleValue);return n===s?Hn(n)===Hn(s):isNaN(n)&&isNaN(s)}return!1}(t,e);case 9:return In(t.arrayValue.values||[],e.arrayValue.values||[],gs);case 10:case 11:return function(t,e){const n=t.mapValue.fields||{},s=e.mapValue.fields||{};if(Wn(n)!==Wn(s))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===s[i]||!gs(n[i],s[i])))return!1;return!0}(t,e);default:return mn()}var s}function ys(t,e){return void 0!==(t.values||[]).find((t=>gs(t,e)))}function vs(t,e){if(t===e)return 0;const n=fs(t),s=fs(e);if(n!==s)return kn(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return kn(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=as(t.integerValue||t.doubleValue),s=as(e.integerValue||e.doubleValue);return n<s?-1:n>s?1:n===s?0:isNaN(n)?isNaN(s)?0:-1:1}(t,e);case 3:return xs(t.timestampValue,e.timestampValue);case 4:return xs(hs(t),hs(e));case 5:return kn(t.stringValue,e.stringValue);case 6:return function(t,e){const n=ls(t),s=ls(e);return n.compareTo(s)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),s=e.split("/");for(let i=0;i<n.length&&i<s.length;i++){const t=kn(n[i],s[i]);if(0!==t)return t}return kn(n.length,s.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=kn(as(t.latitude),as(e.latitude));return 0!==n?n:kn(as(t.longitude),as(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ws(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n,s,i,r;const o=t.fields||{},a=e.fields||{},l=null===(n=o.value)||void 0===n?void 0:n.arrayValue,c=null===(s=a.value)||void 0===s?void 0:s.arrayValue,u=kn((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(r=null==c?void 0:c.values)||void 0===r?void 0:r.length)||0);return 0!==u?u:ws(l,c)}(t.mapValue,e.mapValue);case 11:return function(t,e){if(t===ps&&e===ps)return 0;if(t===ps)return 1;if(e===ps)return-1;const n=t.fields||{},s=Object.keys(n),i=e.fields||{},r=Object.keys(i);s.sort(),r.sort();for(let o=0;o<s.length&&o<r.length;++o){const t=kn(s[o],r[o]);if(0!==t)return t;const e=vs(n[s[o]],i[r[o]]);if(0!==e)return e}return kn(s.length,r.length)}(t.mapValue,e.mapValue);default:throw mn()}}function xs(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return kn(t,e);const n=os(t),s=os(e),i=kn(n.seconds,s.seconds);return 0!==i?i:kn(n.nanos,s.nanos)}function ws(t,e){const n=t.values||[],s=e.values||[];for(let i=0;i<n.length&&i<s.length;++i){const t=vs(n[i],s[i]);if(t)return t}return kn(n.length,s.length)}function bs(t){return Ts(t)}function Ts(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=os(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ls(t.bytesValue).toBase64():"referenceValue"in t?function(t){return Vn.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const s of t.values||[])n?n=!1:e+=",",e+=Ts(s);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",s=!0;for(const i of e)s?s=!1:n+=",",n+=`${i}:${Ts(t.fields[i])}`;return n+"}"}(t.mapValue):mn()}function Es(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ss(t){return!!t&&"integerValue"in t}function Ns(t){return!!t&&"arrayValue"in t}function js(t){return!!t&&"nullValue"in t}function Cs(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function As(t){return!!t&&"mapValue"in t}function ks(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Qn(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=ks(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ks(t.arrayValue.values[n]);return e}return Object.assign({},t)}class Is{constructor(t){this.value=t}static empty(){return new Is({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!As(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ks(e)}setAll(t){let e=Ln.emptyPath(),n={},s=[];t.forEach(((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,s),n={},s=[],e=i.popLast()}t?n[i.lastSegment()]=ks(t):s.push(i.lastSegment())}));const i=this.getFieldsMap(e);this.applyChanges(i,n,s)}delete(t){const e=this.field(t.popLast());As(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return gs(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let s=e.mapValue.fields[t.get(n)];As(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=s),e=s}return e.mapValue.fields}applyChanges(t,e,n){Qn(e,((e,n)=>t[e]=n));for(const s of n)delete t[s]}clone(){return new Is(ks(this.value))}}function _s(t){const e=[];return Qn(t.fields,((t,n)=>{const s=new Ln([t]);if(As(n)){const t=_s(n.mapValue).fields;if(0===t.length)e.push(s);else for(const n of t)e.push(s.child(n))}else e.push(s)})),new ns(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Ps{constructor(t,e,n,s,i,r,o){this.key=t,this.documentType=e,this.version=n,this.readTime=s,this.createTime=i,this.data=r,this.documentState=o}static newInvalidDocument(t){return new Ps(t,0,Pn.min(),Pn.min(),Pn.min(),Is.empty(),0)}static newFoundDocument(t,e,n,s){return new Ps(t,1,e,Pn.min(),n,s,0)}static newNoDocument(t,e){return new Ps(t,2,e,Pn.min(),Pn.min(),Is.empty(),0)}static newUnknownDocument(t,e){return new Ps(t,3,e,Pn.min(),Pn.min(),Is.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Pn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Is.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Is.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Ps&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ps(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(t,e){this.position=t,this.inclusive=e}}function Rs(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){const r=e[i],o=t.position[i];if(s=r.field.isKeyField()?Vn.comparator(Vn.fromName(o.referenceValue),n.key):vs(o,n.data.field(r.field)),"desc"===r.dir&&(s*=-1),0!==s)break}return s}function Ms(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!gs(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(t,e="asc"){this.field=t,this.dir=e}}function Vs(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{}class Fs extends Os{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new Gs(t,e,n):"array-contains"===e?new Ys(t,n):"in"===e?new Xs(t,n):"not-in"===e?new Js(t,n):"array-contains-any"===e?new Zs(t,n):new Fs(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new Hs(t,n):new Ws(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(vs(e,this.value)):null!==e&&fs(this.value)===fs(e)&&this.matchesComparison(vs(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return mn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bs extends Os{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new Bs(t,e)}matches(t){return Us(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Us(t){return"and"===t.op}function $s(t){return function(t){for(const e of t.filters)if(e instanceof Bs)return!1;return!0}(t)&&Us(t)}function qs(t){if(t instanceof Fs)return t.field.canonicalString()+t.op.toString()+bs(t.value);if($s(t))return t.filters.map((t=>qs(t))).join(",");{const e=t.filters.map((t=>qs(t))).join(",");return`${t.op}(${e})`}}function zs(t,e){return t instanceof Fs?(n=t,(s=e)instanceof Fs&&n.op===s.op&&n.field.isEqual(s.field)&&gs(n.value,s.value)):t instanceof Bs?function(t,e){return e instanceof Bs&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,s)=>t&&zs(n,e.filters[s])),!0)}(t,e):void mn();var n,s}function Ks(t){return t instanceof Fs?`${(e=t).field.canonicalString()} ${e.op} ${bs(e.value)}`:t instanceof Bs?function(t){return t.op.toString()+" {"+t.getFilters().map(Ks).join(" ,")+"}"}(t):"Filter";var e}class Gs extends Fs{constructor(t,e,n){super(t,e,n),this.key=Vn.fromName(n.referenceValue)}matches(t){const e=Vn.comparator(t.key,this.key);return this.matchesComparison(e)}}class Hs extends Fs{constructor(t,e){super(t,"in",e),this.keys=Qs("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class Ws extends Fs{constructor(t,e){super(t,"not-in",e),this.keys=Qs("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function Qs(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>Vn.fromName(t.referenceValue)))}class Ys extends Fs{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Ns(e)&&ys(e.arrayValue,this.value)}}class Xs extends Fs{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&ys(this.value.arrayValue,e)}}class Js extends Fs{constructor(t,e){super(t,"not-in",e)}matches(t){if(ys(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!ys(this.value.arrayValue,e)}}class Zs extends Fs{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Ns(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>ys(this.value.arrayValue,t)))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(t,e=null,n=[],s=[],i=null,r=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=r,this.endAt=o,this.ue=null}}function ei(t,e=null,n=[],s=[],i=null,r=null,o=null){return new ti(t,e,n,s,i,r,o)}function ni(t){const e=fn(t);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>qs(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>{return(e=t).field.canonicalString()+e.dir;var e})).join(","),Gn(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>bs(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>bs(t))).join(",")),e.ue=t}return e.ue}function si(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Vs(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!zs(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ms(t.startAt,e.startAt)&&Ms(t.endAt,e.endAt)}function ii(t){return Vn.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(t,e=null,n=[],s=[],i=null,r="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=r,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function oi(t){return new ri(t)}function ai(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function li(t){return null!==t.collectionGroup}function ci(t){const e=fn(t);if(null===e.ce){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(t){let e=new ts(Ln.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ls(s,n))})),t.has(Ln.keyField().canonicalString())||e.ce.push(new Ls(Ln.keyField(),n))}return e.ce}function ui(t){const e=fn(t);return e.le||(e.le=function(t,e){if("F"===t.limitType)return ei(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new Ls(t.field,e)}));const n=t.endAt?new Ds(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Ds(t.startAt.position,t.startAt.inclusive):null;return ei(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}(e,ci(t))),e.le}function hi(t,e){const n=t.filters.concat([e]);return new ri(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function di(t,e,n){return new ri(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function mi(t,e){return si(ui(t),ui(e))&&t.limitType===e.limitType}function pi(t){return`${ni(ui(t))}|lt:${t.limitType}`}function fi(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>Ks(t))).join(", ")}]`),Gn(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>{return`${(e=t).field.canonicalString()} (${e.dir})`;var e})).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>bs(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>bs(t))).join(",")),`Target(${e})`}(ui(t))}; limitType=${t.limitType})`}function gi(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Vn.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of ci(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&(s=e,!((n=t).startAt&&!function(t,e,n){const s=Rs(t,e,n);return t.inclusive?s<=0:s<0}(n.startAt,ci(n),s)||n.endAt&&!function(t,e,n){const s=Rs(t,e,n);return t.inclusive?s>=0:s>0}(n.endAt,ci(n),s)));var n,s}function yi(t){return(e,n)=>{let s=!1;for(const i of ci(t)){const t=vi(i,e,n);if(0!==t)return t;s=s||i.field.isKeyField()}return 0}}function vi(t,e,n){const s=t.field.isKeyField()?Vn.comparator(e.key,n.key):function(t,e,n){const s=e.data.field(t),i=n.data.field(t);return null!==s&&null!==i?vs(s,i):mn()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return mn()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[s,i]of n)if(this.equalsFn(s,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),s=this.inner[n];if(void 0===s)return this.inner[n]=[[t,e]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,e]);s.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],t))return 1===n.length?delete this.inner[e]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Qn(this.inner,((e,n)=>{for(const[s,i]of n)t(s,i)}))}isEmpty(){return Yn(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new Xn(Vn.comparator);function bi(){return wi}const Ti=new Xn(Vn.comparator);function Ei(...t){let e=Ti;for(const n of t)e=e.insert(n.key,n);return e}function Si(t){let e=Ti;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function Ni(){return Ci()}function ji(){return Ci()}function Ci(){return new xi((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Ai=new Xn(Vn.comparator),ki=new ts(Vn.comparator);function Ii(...t){let e=ki;for(const n of t)e=e.add(n);return e}const _i=new ts(kn);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Pi(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hn(e)?"-0":e}}function Di(t){return{integerValue:""+t}}function Ri(t,e){return function(t){return"number"==typeof t&&Number.isInteger(t)&&!Hn(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?Di(e):Pi(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(){this._=void 0}}function Li(t,e,n){return t instanceof Fi?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&cs(e)&&(e=us(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Bi?Ui(t,e):t instanceof $i?qi(t,e):function(t,e){const n=Oi(t,e),s=Ki(n)+Ki(t.Pe);return Ss(n)&&Ss(t.Pe)?Di(s):Pi(t.serializer,s)}(t,e)}function Vi(t,e,n){return t instanceof Bi?Ui(t,e):t instanceof $i?qi(t,e):n}function Oi(t,e){return t instanceof zi?Ss(n=e)||(s=n)&&"doubleValue"in s?e:{integerValue:0}:null;var n,s}class Fi extends Mi{}class Bi extends Mi{constructor(t){super(),this.elements=t}}function Ui(t,e){const n=Gi(e);for(const s of t.elements)n.some((t=>gs(t,s)))||n.push(s);return{arrayValue:{values:n}}}class $i extends Mi{constructor(t){super(),this.elements=t}}function qi(t,e){let n=Gi(e);for(const s of t.elements)n=n.filter((t=>!gs(t,s)));return{arrayValue:{values:n}}}class zi extends Mi{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function Ki(t){return as(t.integerValue||t.doubleValue)}function Gi(t){return Ns(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Hi{constructor(t,e){this.version=t,this.transformResults=e}}class Wi{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Wi}static exists(t){return new Wi(void 0,t)}static updateTime(t){return new Wi(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Qi(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Yi{}function Xi(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new ar(t.key,Wi.none()):new nr(t.key,t.data,Wi.none());{const n=t.data,s=Is.empty();let i=new ts(Ln.comparator);for(let t of e.fields)if(!i.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?s.delete(t):s.set(t,e),i=i.add(t)}return new sr(t.key,s,new ns(i.toArray()),Wi.none())}}function Ji(t,e,n){var s;t instanceof nr?function(t,e,n){const s=t.value.clone(),i=rr(t.fieldTransforms,e,n.transformResults);s.setAll(i),e.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(t,e,n):t instanceof sr?function(t,e,n){if(!Qi(t.precondition,e))return void e.convertToUnknownDocument(n.version);const s=rr(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(ir(t)),i.setAll(s),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):(s=n,e.convertToNoDocument(s.version).setHasCommittedMutations())}function Zi(t,e,n,s){return t instanceof nr?function(t,e,n,s){if(!Qi(t.precondition,e))return n;const i=t.value.clone(),r=or(t.fieldTransforms,s,e);return i.setAll(r),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null}(t,e,n,s):t instanceof sr?function(t,e,n,s){if(!Qi(t.precondition,e))return n;const i=or(t.fieldTransforms,s,e),r=e.data;return r.setAll(ir(t)),r.setAll(i),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,s):(i=e,r=n,Qi(t.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):r);var i,r}function tr(t,e){let n=null;for(const s of t.fieldTransforms){const t=e.data.field(s.field),i=Oi(s.transform,t||null);null!=i&&(null===n&&(n=Is.empty()),n.set(s.field,i))}return n||null}function er(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,s=e.fieldTransforms,!!(void 0===n&&void 0===s||n&&s&&In(n,s,((t,e)=>function(t,e){return t.field.isEqual(e.field)&&(n=t.transform,s=e.transform,n instanceof Bi&&s instanceof Bi||n instanceof $i&&s instanceof $i?In(n.elements,s.elements,gs):n instanceof zi&&s instanceof zi?gs(n.Pe,s.Pe):n instanceof Fi&&s instanceof Fi);var n,s}(t,e))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask)));var n,s}class nr extends Yi{constructor(t,e,n,s=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class sr extends Yi{constructor(t,e,n,s,i=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ir(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function rr(t,e,n){const s=new Map;pn(t.length===n.length);for(let i=0;i<n.length;i++){const r=t[i],o=r.transform,a=e.data.field(r.field);s.set(r.field,Vi(o,a,n[i]))}return s}function or(t,e,n){const s=new Map;for(const i of t){const t=i.transform,r=n.data.field(i.field);s.set(i.field,Li(t,r,e))}return s}class ar extends Yi{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lr extends Yi{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(t,e,n,s){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let s=0;s<this.mutations.length;s++){const e=this.mutations[s];e.key.isEqual(t.key)&&Ji(e,t,n[s])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Zi(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Zi(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=ji();return this.mutations.forEach((s=>{const i=t.get(s.key),r=i.overlayedDocument;let o=this.applyToLocalView(r,i.mutatedFields);o=e.has(s.key)?null:o;const a=Xi(r,o);null!==a&&n.set(s.key,a),r.isValidDocument()||r.convertToNoDocument(Pn.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Ii())}isEqual(t){return this.batchId===t.batchId&&In(this.mutations,t.mutations,((t,e)=>er(t,e)))&&In(this.baseMutations,t.baseMutations,((t,e)=>er(t,e)))}}class ur{constructor(t,e,n,s){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=s}static from(t,e,n){pn(t.mutations.length===n.length);let s=function(){return Ai}();const i=t.mutations;for(let r=0;r<i.length;r++)s=s.insert(i[r].key,n[r].version);return new ur(t,e,n,s)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(t,e){this.count=t,this.unchangedNames=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mr,pr;function fr(t){if(void 0===t)return un("GRPC error has no .code"),gn.UNKNOWN;switch(t){case mr.OK:return gn.OK;case mr.CANCELLED:return gn.CANCELLED;case mr.UNKNOWN:return gn.UNKNOWN;case mr.DEADLINE_EXCEEDED:return gn.DEADLINE_EXCEEDED;case mr.RESOURCE_EXHAUSTED:return gn.RESOURCE_EXHAUSTED;case mr.INTERNAL:return gn.INTERNAL;case mr.UNAVAILABLE:return gn.UNAVAILABLE;case mr.UNAUTHENTICATED:return gn.UNAUTHENTICATED;case mr.INVALID_ARGUMENT:return gn.INVALID_ARGUMENT;case mr.NOT_FOUND:return gn.NOT_FOUND;case mr.ALREADY_EXISTS:return gn.ALREADY_EXISTS;case mr.PERMISSION_DENIED:return gn.PERMISSION_DENIED;case mr.FAILED_PRECONDITION:return gn.FAILED_PRECONDITION;case mr.ABORTED:return gn.ABORTED;case mr.OUT_OF_RANGE:return gn.OUT_OF_RANGE;case mr.UNIMPLEMENTED:return gn.UNIMPLEMENTED;case mr.DATA_LOSS:return gn.DATA_LOSS;default:return mn()}}(pr=mr||(mr={}))[pr.OK=0]="OK",pr[pr.CANCELLED=1]="CANCELLED",pr[pr.UNKNOWN=2]="UNKNOWN",pr[pr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pr[pr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pr[pr.NOT_FOUND=5]="NOT_FOUND",pr[pr.ALREADY_EXISTS=6]="ALREADY_EXISTS",pr[pr.PERMISSION_DENIED=7]="PERMISSION_DENIED",pr[pr.UNAUTHENTICATED=16]="UNAUTHENTICATED",pr[pr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pr[pr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pr[pr.ABORTED=10]="ABORTED",pr[pr.OUT_OF_RANGE=11]="OUT_OF_RANGE",pr[pr.UNIMPLEMENTED=12]="UNIMPLEMENTED",pr[pr.INTERNAL=13]="INTERNAL",pr[pr.UNAVAILABLE=14]="UNAVAILABLE",pr[pr.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const gr=new Ke([4294967295,4294967295],0);function yr(t){const e=(new TextEncoder).encode(t),n=new Ge;return n.update(e),new Uint8Array(n.digest())}function vr(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new Ke([n,s],0),new Ke([i,r],0)]}class xr{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new wr(`Invalid padding: ${e}`);if(n<0)throw new wr(`Invalid hash count: ${n}`);if(t.length>0&&0===this.hashCount)throw new wr(`Invalid hash count: ${n}`);if(0===t.length&&0!==e)throw new wr(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=Ke.fromNumber(this.Ie)}Ee(t,e,n){let s=t.add(e.multiply(Ke.fromNumber(n)));return 1===s.compare(gr)&&(s=new Ke([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Ie)return!1;const e=yr(t),[n,s]=vr(e);for(let i=0;i<this.hashCount;i++){const t=this.Ee(n,s,i);if(!this.de(t))return!1}return!0}static create(t,e,n){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),r=new xr(i,s,e);return n.forEach((t=>r.insert(t))),r}insert(t){if(0===this.Ie)return;const e=yr(t),[n,s]=vr(e);for(let i=0;i<this.hashCount;i++){const t=this.Ee(n,s,i);this.Ae(t)}}Ae(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class wr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(t,e,n,s,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const s=new Map;return s.set(t,Tr.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new br(Pn.min(),s,new Xn(kn),bi(),Ii())}}class Tr{constructor(t,e,n,s,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new Tr(n,e,Ii(),Ii(),Ii())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(t,e,n,s){this.Re=t,this.removedTargetIds=e,this.key=n,this.Ve=s}}class Sr{constructor(t,e){this.targetId=t,this.me=e}}class Nr{constructor(t,e,n=is.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=s}}class jr{constructor(){this.fe=0,this.ge=kr(),this.pe=is.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Ii(),e=Ii(),n=Ii();return this.ge.forEach(((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:e=e.add(s);break;case 1:n=n.add(s);break;default:mn()}})),new Tr(this.pe,this.ye,t,e,n)}Ce(){this.we=!1,this.ge=kr()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,pn(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Cr{constructor(t){this.Le=t,this.Be=new Map,this.ke=bi(),this.qe=Ar(),this.Qe=new Xn(kn)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,(e=>{const n=this.Ge(e);switch(t.state){case 0:this.ze(e)&&n.De(t.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(t.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(n.Ne(),n.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),n.De(t.resumeToken));break;default:mn()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach(((t,n)=>{this.ze(n)&&e(n)}))}He(t){const e=t.targetId,n=t.me.count,s=this.Je(e);if(s){const i=s.target;if(ii(i))if(0===n){const t=new Vn(i.path);this.Ue(e,t,Ps.newNoDocument(t,Pn.min()))}else pn(1===n);else{const s=this.Ye(e);if(s!==n){const n=this.Ze(t),i=n?this.Xe(n,t,s):1;if(0!==i){this.je(e);const t=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,t)}}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=e;let r,o;try{r=ls(n).toUint8Array()}catch(a){if(a instanceof ss)return hn("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{o=new xr(r,s,i)}catch(a){return hn(a instanceof wr?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return 0===o.Ie?null:o}Xe(t,e,n){return e.me.count===n-this.nt(t,e.targetId)?0:2}nt(t,e){const n=this.Le.getRemoteKeysForTarget(e);let s=0;return n.forEach((n=>{const i=this.Le.tt(),r=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;t.mightContain(r)||(this.Ue(e,n,null),s++)})),s}rt(t){const e=new Map;this.Be.forEach(((n,s)=>{const i=this.Je(s);if(i){if(n.current&&ii(i.target)){const e=new Vn(i.target.path);null!==this.ke.get(e)||this.it(s,e)||this.Ue(s,e,Ps.newNoDocument(e,t))}n.be&&(e.set(s,n.ve()),n.Ce())}}));let n=Ii();this.qe.forEach(((t,e)=>{let s=!0;e.forEachWhile((t=>{const e=this.Je(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(s=!1,!1)})),s&&(n=n.add(t))})),this.ke.forEach(((e,n)=>n.setReadTime(t)));const s=new br(t,e,this.Qe,this.ke,n);return this.ke=bi(),this.qe=Ar(),this.Qe=new Xn(kn),s}$e(t,e){if(!this.ze(t))return;const n=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,n),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,n){if(!this.ze(t))return;const s=this.Ge(t);this.it(t,e)?s.Fe(e,1):s.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),n&&(this.ke=this.ke.insert(e,n))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new jr,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new ts(kn),this.qe=this.qe.insert(t,e)),e}ze(t){const e=null!==this.Je(t);return e||cn("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new jr),this.Le.getRemoteKeysForTarget(t).forEach((e=>{this.Ue(t,e,null)}))}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function Ar(){return new Xn(Vn.comparator)}function kr(){return new Xn(Vn.comparator)}const Ir=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),_r=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Pr=(()=>({and:"AND",or:"OR"}))();class Dr{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Rr(t,e){return t.useProto3Json||Gn(e)?e:{value:e}}function Mr(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Lr(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Vr(t,e){return Mr(t,e.toTimestamp())}function Or(t){return pn(!!t),Pn.fromTimestamp(function(t){const e=os(t);return new _n(e.seconds,e.nanos)}(t))}function Fr(t,e){return Br(t,e).canonicalString()}function Br(t,e){const n=(s=t,new Rn(["projects",s.projectId,"databases",s.database])).child("documents");var s;return void 0===e?n:n.child(e)}function Ur(t){const e=Rn.fromString(t);return pn(ro(e)),e}function $r(t,e){return Fr(t.databaseId,e.path)}function qr(t,e){const n=Ur(e);if(n.get(1)!==t.databaseId.projectId)throw new yn(gn.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new yn(gn.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Vn(Gr(n))}function zr(t,e){return Fr(t.databaseId,e)}function Kr(t){return new Rn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Gr(t){return pn(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Hr(t,e,n){return{name:$r(t,e),fields:n.value.mapValue.fields}}function Wr(t,e){return{documents:[zr(t,e.path)]}}function Qr(t,e){const n={structuredQuery:{}},s=e.path;let i;null!==e.collectionGroup?(i=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=zr(t,i);const r=function(t){if(0!==t.length)return so(Bs.create(t,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const o=function(t){if(0!==t.length)return t.map((t=>{return{field:eo((e=t).field),direction:Jr(e.dir)};var e}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Rr(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),{_t:n,parent:i};var l}function Yr(t){let e=function(t){const e=Ur(t);return 4===e.length?Rn.emptyPath():Gr(e)}(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){pn(1===s);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let r=[];n.where&&(r=function(t){const e=Xr(t);return e instanceof Bs&&$s(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((t=>{return new Ls(no((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,Gn(e)?null:e}(n.limit));let l=null;n.startAt&&(l=function(t){const e=!!t.before,n=t.values||[];return new Ds(n,e)}(n.startAt));let c=null;return n.endAt&&(c=function(t){const e=!t.before,n=t.values||[];return new Ds(n,e)}(n.endAt)),function(t,e,n,s,i,r,o,a){return new ri(t,e,n,s,i,r,o,a)}(e,i,o,r,a,"F",l,c)}function Xr(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=no(t.unaryFilter.field);return Fs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=no(t.unaryFilter.field);return Fs.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=no(t.unaryFilter.field);return Fs.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=no(t.unaryFilter.field);return Fs.create(i,"!=",{nullValue:"NULL_VALUE"});default:return mn()}}(t):void 0!==t.fieldFilter?(e=t,Fs.create(no(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mn()}}(e.fieldFilter.op),e.fieldFilter.value)):void 0!==t.compositeFilter?function(t){return Bs.create(t.compositeFilter.filters.map((t=>Xr(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return mn()}}(t.compositeFilter.op))}(t):mn();var e}function Jr(t){return Ir[t]}function Zr(t){return _r[t]}function to(t){return Pr[t]}function eo(t){return{fieldPath:t.canonicalString()}}function no(t){return Ln.fromServerFormat(t.fieldPath)}function so(t){return t instanceof Fs?function(t){if("=="===t.op){if(Cs(t.value))return{unaryFilter:{field:eo(t.field),op:"IS_NAN"}};if(js(t.value))return{unaryFilter:{field:eo(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Cs(t.value))return{unaryFilter:{field:eo(t.field),op:"IS_NOT_NAN"}};if(js(t.value))return{unaryFilter:{field:eo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eo(t.field),op:Zr(t.op),value:t.value}}}(t):t instanceof Bs?function(t){const e=t.getFilters().map((t=>so(t)));return 1===e.length?e[0]:{compositeFilter:{op:to(t.op),filters:e}}}(t):mn()}function io(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function ro(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(t,e,n,s,i=Pn.min(),r=Pn.min(),o=is.EMPTY_BYTE_STRING,a=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new oo(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new oo(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(t){this.ct=t}}function lo(t){const e=Yr({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?di(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(){this.un=new uo}addToCollectionParentIndex(t,e){return this.un.add(e),qn.resolve()}getCollectionParents(t,e){return qn.resolve(this.un.getEntries(e))}addFieldIndex(t,e){return qn.resolve()}deleteFieldIndex(t,e){return qn.resolve()}deleteAllFieldIndexes(t){return qn.resolve()}createTargetIndexes(t,e){return qn.resolve()}getDocumentsMatchingTarget(t,e){return qn.resolve(null)}getIndexType(t,e){return qn.resolve(0)}getFieldIndexes(t,e){return qn.resolve([])}getNextCollectionGroupToUpdate(t){return qn.resolve(null)}getMinOffset(t,e){return qn.resolve(Fn.min())}getMinOffsetFromCollectionGroup(t,e){return qn.resolve(Fn.min())}updateCollectionGroup(t,e,n){return qn.resolve()}updateIndexEntries(t,e){return qn.resolve()}}class uo{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),s=this.index[e]||new ts(Rn.comparator),i=!s.has(n);return this.index[e]=s.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),s=this.index[e];return s&&s.has(n)}getEntries(t){return(this.index[t]||new ts(Rn.comparator)).toArray()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new ho(0)}static kn(){return new ho(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(){this.changes=new xi((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Ps.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?qn.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(t,e,n,s){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=s}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((s=>(n=s,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&Zi(n.mutation,t,ns.empty(),_n.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,Ii()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=Ii()){const s=Ni();return this.populateOverlays(t,s,e).next((()=>this.computeViews(t,e,s,n).next((t=>{let e=Ei();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=Ni();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,Ii())))}populateOverlays(t,e,n){const s=[];return n.forEach((t=>{e.has(t)||s.push(t)})),this.documentOverlayCache.getOverlays(t,s).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,s){let i=bi();const r=Ci(),o=Ci();return e.forEach(((t,e)=>{const o=n.get(e.key);s.has(e.key)&&(void 0===o||o.mutation instanceof sr)?i=i.insert(e.key,e):void 0!==o?(r.set(e.key,o.mutation.getFieldMask()),Zi(o.mutation,e,o.mutation.getFieldMask(),_n.now())):r.set(e.key,ns.empty())})),this.recalculateAndSaveOverlays(t,i).next((t=>(t.forEach(((t,e)=>r.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new po(e,null!==(n=r.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=Ci();let s=new Xn(((t,e)=>t-e)),i=Ii();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const i of t)i.keys().forEach((t=>{const r=e.get(t);if(null===r)return;let o=n.get(t)||ns.empty();o=i.applyToLocalView(r,o),n.set(t,o);const a=(s.get(i.batchId)||Ii()).add(t);s=s.insert(i.batchId,a)}))})).next((()=>{const r=[],o=s.getReverseIterator();for(;o.hasNext();){const s=o.getNext(),a=s.key,l=s.value,c=ji();l.forEach((t=>{if(!i.has(t)){const s=Xi(e.get(t),n.get(t));null!==s&&c.set(t,s),i=i.add(t)}})),r.push(this.documentOverlayCache.saveOverlays(t,a,c))}return qn.waitFor(r)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,s){return i=e,Vn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):li(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,s):this.getDocumentsMatchingCollectionQuery(t,e,n,s);var i}getNextDocuments(t,e,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,s).next((i=>{const r=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,s-i.size):qn.resolve(Ni());let o=-1,a=i;return r.next((e=>qn.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(e)?qn.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,i))).next((()=>this.computeViews(t,a,e,Ii()))).next((t=>({batchId:o,changes:Si(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Vn(e)).next((t=>{let e=Ei();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,s){const i=e.collectionGroup;let r=Ei();return this.indexManager.getCollectionParents(t,i).next((o=>qn.forEach(o,(o=>{const a=(l=e,c=o.child(i),new ri(c,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt));var l,c;return this.getDocumentsMatchingCollectionQuery(t,a,n,s).next((t=>{t.forEach(((t,e)=>{r=r.insert(t,e)}))}))})).next((()=>r))))}getDocumentsMatchingCollectionQuery(t,e,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((r=>(i=r,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,i,s)))).next((t=>{i.forEach(((e,n)=>{const s=n.getKey();null===t.get(s)&&(t=t.insert(s,Ps.newInvalidDocument(s)))}));let n=Ei();return t.forEach(((t,s)=>{const r=i.get(t);void 0!==r&&Zi(r.mutation,s,ns.empty(),_n.now()),gi(e,s)&&(n=n.insert(t,s))})),n}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,e){return qn.resolve(this.hr.get(e))}saveBundleMetadata(t,e){return this.hr.set(e.id,{id:(n=e).id,version:n.version,createTime:Or(n.createTime)}),qn.resolve();var n}getNamedQuery(t,e){return qn.resolve(this.Pr.get(e))}saveNamedQuery(t,e){return this.Pr.set(e.name,{name:(n=e).name,query:lo(n.bundledQuery),readTime:Or(n.readTime)}),qn.resolve();var n}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(){this.overlays=new Xn(Vn.comparator),this.Ir=new Map}getOverlay(t,e){return qn.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Ni();return qn.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,s)=>{this.ht(t,e,s)})),qn.resolve()}removeOverlaysForBatchId(t,e,n){const s=this.Ir.get(n);return void 0!==s&&(s.forEach((t=>this.overlays=this.overlays.remove(t))),this.Ir.delete(n)),qn.resolve()}getOverlaysForCollection(t,e,n){const s=Ni(),i=e.length+1,r=new Vn(e.child("")),o=this.overlays.getIteratorFrom(r);for(;o.hasNext();){const t=o.getNext().value,r=t.getKey();if(!e.isPrefixOf(r.path))break;r.path.length===i&&t.largestBatchId>n&&s.set(t.getKey(),t)}return qn.resolve(s)}getOverlaysForCollectionGroup(t,e,n,s){let i=new Xn(((t,e)=>t-e));const r=this.overlays.getIterator();for(;r.hasNext();){const t=r.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=i.get(t.largestBatchId);null===e&&(e=Ni(),i=i.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=Ni(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((t,e)=>o.set(t,e))),!(o.size()>=s)););return qn.resolve(o)}ht(t,e,n){const s=this.overlays.get(n.key);if(null!==s){const t=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new hr(e,n));let i=this.Ir.get(e);void 0===i&&(i=Ii(),this.Ir.set(e,i)),this.Ir.set(e,i.add(n.key))}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(){this.sessionToken=is.EMPTY_BYTE_STRING}getSessionToken(t){return qn.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,qn.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.Tr=new ts(wo.Er),this.dr=new ts(wo.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,e){const n=new wo(t,e);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Vr(new wo(t,e))}mr(t,e){t.forEach((t=>this.removeReference(t,e)))}gr(t){const e=new Vn(new Rn([])),n=new wo(e,t),s=new wo(e,t+1),i=[];return this.dr.forEachInRange([n,s],(t=>{this.Vr(t),i.push(t.key)})),i}pr(){this.Tr.forEach((t=>this.Vr(t)))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const e=new Vn(new Rn([])),n=new wo(e,t),s=new wo(e,t+1);let i=Ii();return this.dr.forEachInRange([n,s],(t=>{i=i.add(t.key)})),i}containsKey(t){const e=new wo(t,0),n=this.Tr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class wo{constructor(t,e){this.key=t,this.wr=e}static Er(t,e){return Vn.comparator(t.key,e.key)||kn(t.wr,e.wr)}static Ar(t,e){return kn(t.wr,e.wr)||Vn.comparator(t.key,e.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Sr=1,this.br=new ts(wo.Er)}checkEmpty(t){return qn.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const r=new cr(i,e,n,s);this.mutationQueue.push(r);for(const o of s)this.br=this.br.add(new wo(o.key,i)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return qn.resolve(r)}lookupMutationBatch(t,e){return qn.resolve(this.Dr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,s=this.vr(n),i=s<0?0:s;return qn.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return qn.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(t){return qn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new wo(e,0),s=new wo(e,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],(t=>{const e=this.Dr(t.wr);i.push(e)})),qn.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new ts(kn);return e.forEach((t=>{const e=new wo(t,0),s=new wo(t,Number.POSITIVE_INFINITY);this.br.forEachInRange([e,s],(t=>{n=n.add(t.wr)}))})),qn.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,s=n.length+1;let i=n;Vn.isDocumentKey(i)||(i=i.child(""));const r=new wo(new Vn(i),0);let o=new ts(kn);return this.br.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===s&&(o=o.add(t.wr)),!0)}),r),qn.resolve(this.Cr(o))}Cr(t){const e=[];return t.forEach((t=>{const n=this.Dr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){pn(0===this.Fr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return qn.forEach(e.mutations,(s=>{const i=new wo(s.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.br=n}))}On(t){}containsKey(t,e){const n=new wo(e,0),s=this.br.firstAfterOrEqual(n);return qn.resolve(e.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,qn.resolve()}Fr(t,e){return this.vr(t)}vr(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Dr(t){const e=this.vr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(t){this.Mr=t,this.docs=new Xn(Vn.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,s=this.docs.get(n),i=s?s.size:0,r=this.Mr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:r}),this.size+=r-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return qn.resolve(n?n.document.mutableCopy():Ps.newInvalidDocument(e))}getEntries(t,e){let n=bi();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():Ps.newInvalidDocument(t))})),qn.resolve(n)}getDocumentsMatchingQuery(t,e,n,s){let i=bi();const r=e.path,o=new Vn(r.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!r.isPrefixOf(t.path))break;t.path.length>r.length+1||Bn(On(o),n)<=0||(s.has(o.key)||gi(e,o))&&(i=i.insert(o.key,o.mutableCopy()))}return qn.resolve(i)}getAllFromCollectionGroup(t,e,n,s){mn()}Or(t,e){return qn.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new Eo(this)}getSize(t){return qn.resolve(this.size)}}class Eo extends mo{constructor(t){super(),this.cr=t}applyChanges(t){const e=[];return this.changes.forEach(((n,s)=>{s.isValidDocument()?e.push(this.cr.addEntry(t,s)):this.cr.removeEntry(n)})),qn.waitFor(e)}getFromCache(t,e){return this.cr.getEntry(t,e)}getAllFromCache(t,e){return this.cr.getEntries(t,e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(t){this.persistence=t,this.Nr=new xi((t=>ni(t)),si),this.lastRemoteSnapshotVersion=Pn.min(),this.highestTargetId=0,this.Lr=0,this.Br=new xo,this.targetCount=0,this.kr=ho.Bn()}forEachTarget(t,e){return this.Nr.forEach(((t,n)=>e(n))),qn.resolve()}getLastRemoteSnapshotVersion(t){return qn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return qn.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),qn.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Lr&&(this.Lr=e),qn.resolve()}Kn(t){this.Nr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.kr=new ho(e),this.highestTargetId=e),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,e){return this.Kn(e),this.targetCount+=1,qn.resolve()}updateTargetData(t,e){return this.Kn(e),qn.resolve()}removeTargetData(t,e){return this.Nr.delete(e.target),this.Br.gr(e.targetId),this.targetCount-=1,qn.resolve()}removeTargets(t,e,n){let s=0;const i=[];return this.Nr.forEach(((r,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Nr.delete(r),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),s++)})),qn.waitFor(i).next((()=>s))}getTargetCount(t){return qn.resolve(this.targetCount)}getTargetData(t,e){const n=this.Nr.get(e)||null;return qn.resolve(n)}addMatchingKeys(t,e,n){return this.Br.Rr(e,n),qn.resolve()}removeMatchingKeys(t,e,n){this.Br.mr(e,n);const s=this.persistence.referenceDelegate,i=[];return s&&e.forEach((e=>{i.push(s.markPotentiallyOrphaned(t,e))})),qn.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.Br.gr(e),qn.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Br.yr(e);return qn.resolve(n)}containsKey(t,e){return qn.resolve(this.Br.containsKey(e))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(t,e){this.qr={},this.overlays={},this.Qr=new Kn(0),this.Kr=!1,this.Kr=!0,this.$r=new vo,this.referenceDelegate=t(this),this.Ur=new So(this),this.indexManager=new co,this.remoteDocumentCache=new To((t=>this.referenceDelegate.Wr(t))),this.serializer=new ao(e),this.Gr=new go(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new yo,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.qr[t.toKey()];return n||(n=new bo(e,this.referenceDelegate),this.qr[t.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,e,n){cn("MemoryPersistence","Starting transaction:",t);const s=new jo(this.Qr.next());return this.referenceDelegate.zr(),n(s).next((t=>this.referenceDelegate.jr(s).next((()=>t)))).toPromise().then((t=>(s.raiseOnCommittedEvent(),t)))}Hr(t,e){return qn.or(Object.values(this.qr).map((n=>()=>n.containsKey(t,e))))}}class jo extends Un{constructor(t){super(),this.currentSequenceNumber=t}}class Co{constructor(t){this.persistence=t,this.Jr=new xo,this.Yr=null}static Zr(t){return new Co(t)}get Xr(){if(this.Yr)return this.Yr;throw mn()}addReference(t,e,n){return this.Jr.addReference(n,e),this.Xr.delete(n.toString()),qn.resolve()}removeReference(t,e,n){return this.Jr.removeReference(n,e),this.Xr.add(n.toString()),qn.resolve()}markPotentiallyOrphaned(t,e){return this.Xr.add(e.toString()),qn.resolve()}removeTarget(t,e){this.Jr.gr(e.targetId).forEach((t=>this.Xr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Xr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}zr(){this.Yr=new Set}jr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qn.forEach(this.Xr,(n=>{const s=Vn.fromPath(n);return this.ei(t,s).next((t=>{t||e.removeEntry(s,Pn.min())}))})).next((()=>(this.Yr=null,e.apply(t))))}updateLimboDocument(t,e){return this.ei(t,e).next((t=>{t?this.Xr.delete(e.toString()):this.Xr.add(e.toString())}))}Wr(t){return 0}ei(t,e){return qn.or([()=>qn.resolve(this.Jr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Hr(t,e)])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(t,e,n,s){this.targetId=t,this.fromCache=e,this.$i=n,this.Ui=s}static Wi(t,e){let n=Ii(),s=Ii();for(const i of e.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ao(t,e.fromCache,n,s)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=lt()?8:function(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"")>0?6:4}initialize(t,e){this.Ji=t,this.indexManager=e,this.Gi=!0}getDocumentsMatchingQuery(t,e,n,s){const i={result:null};return this.Yi(t,e).next((t=>{i.result=t})).next((()=>{if(!i.result)return this.Zi(t,e,s,n).next((t=>{i.result=t}))})).next((()=>{if(i.result)return;const n=new ko;return this.Xi(t,e,n).next((s=>{if(i.result=s,this.zi)return this.es(t,e,n,s.size)}))})).next((()=>i.result))}es(t,e,n,s){return n.documentReadCount<this.ji?(ln()<=Tt.DEBUG&&cn("QueryEngine","SDK will not create cache indexes for query:",fi(e),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),qn.resolve()):(ln()<=Tt.DEBUG&&cn("QueryEngine","Query:",fi(e),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(ln()<=Tt.DEBUG&&cn("QueryEngine","The SDK decides to create cache indexes for query:",fi(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ui(e))):qn.resolve())}Yi(t,e){if(ai(e))return qn.resolve(null);let n=ui(e);return this.indexManager.getIndexType(t,n).next((s=>0===s?null:(null!==e.limit&&1===s&&(e=di(e,null,"F"),n=ui(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((s=>{const i=Ii(...s);return this.Ji.getDocuments(t,i).next((s=>this.indexManager.getMinOffset(t,n).next((n=>{const r=this.ts(e,s);return this.ns(e,r,i,n.readTime)?this.Yi(t,di(e,null,"F")):this.rs(t,r,e,n)}))))})))))}Zi(t,e,n,s){return ai(e)||s.isEqual(Pn.min())?qn.resolve(null):this.Ji.getDocuments(t,n).next((i=>{const r=this.ts(e,i);return this.ns(e,r,n,s)?qn.resolve(null):(ln()<=Tt.DEBUG&&cn("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),fi(e)),this.rs(t,r,e,function(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,i=Pn.fromTimestamp(1e9===s?new _n(n+1,0):new _n(n,s));return new Fn(i,Vn.empty(),e)}(s,-1)).next((t=>t)))}))}ts(t,e){let n=new ts(yi(t));return e.forEach(((e,s)=>{gi(t,s)&&(n=n.add(s))})),n}ns(t,e,n,s){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const i="F"===t.limitType?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(t,e,n){return ln()<=Tt.DEBUG&&cn("QueryEngine","Using full collection scan to execute query:",fi(e)),this.Ji.getDocumentsMatchingQuery(t,e,Fn.min(),n)}rs(t,e,n,s){return this.Ji.getDocumentsMatchingQuery(t,n,s).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(t,e,n,s){this.persistence=t,this.ss=e,this.serializer=s,this.os=new Xn(kn),this._s=new xi((t=>ni(t)),si),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(n)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new fo(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.os)))}}async function Po(t,e){const n=fn(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let s;return n.mutationQueue.getAllMutationBatches(t).next((i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const i=[],r=[];let o=Ii();for(const t of s){i.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({hs:t,removedBatchIds:i,addedBatchIds:r})))}))}))}function Do(t){const e=fn(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function Ro(t,e){const n=fn(t),s=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const r=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const o=[];e.targetChanges.forEach(((r,a)=>{const l=i.get(a);if(!l)return;o.push(n.Ur.removeMatchingKeys(t,r.removedDocuments,a).next((()=>n.Ur.addMatchingKeys(t,r.addedDocuments,a))));let c=l.withSequenceNumber(t.currentSequenceNumber);var u,h,d;null!==e.targetMismatches.get(a)?c=c.withResumeToken(is.EMPTY_BYTE_STRING,Pn.min()).withLastLimboFreeSnapshotVersion(Pn.min()):r.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(r.resumeToken,s)),i=i.insert(a,c),h=c,d=r,(0===(u=l).resumeToken.approximateByteSize()||h.snapshotVersion.toMicroseconds()-u.snapshotVersion.toMicroseconds()>=3e8||d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size>0)&&o.push(n.Ur.updateTargetData(t,c))}));let a=bi(),l=Ii();if(e.documentUpdates.forEach((s=>{e.resolvedLimboDocuments.has(s)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,s))})),o.push(function(t,e,n){let s=Ii(),i=Ii();return n.forEach((t=>s=s.add(t))),e.getEntries(t,s).next((t=>{let s=bi();return n.forEach(((n,r)=>{const o=t.get(n);r.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),r.isNoDocument()&&r.version.isEqual(Pn.min())?(e.removeEntry(n,r.readTime),s=s.insert(n,r)):!o.isValidDocument()||r.version.compareTo(o.version)>0||0===r.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(r),s=s.insert(n,r)):cn("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",r.version)})),{Ps:s,Is:i}}))}(t,r,e.documentUpdates).next((t=>{a=t.Ps,l=t.Is}))),!s.isEqual(Pn.min())){const e=n.Ur.getLastRemoteSnapshotVersion(t).next((e=>n.Ur.setTargetsMetadata(t,t.currentSequenceNumber,s)));o.push(e)}return qn.waitFor(o).next((()=>r.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,l))).next((()=>a))})).then((t=>(n.os=i,t)))}function Mo(t,e){const n=fn(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}async function Lo(t,e,n){const s=fn(t),i=s.os.get(e),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,(t=>s.persistence.referenceDelegate.removeTarget(t,i)))}catch(o){if(!zn(o))throw o;cn("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}s.os=s.os.remove(e),s._s.delete(i.target)}function Vo(t,e,n){const s=fn(t);let i=Pn.min(),r=Ii();return s.persistence.runTransaction("Execute query","readwrite",(t=>function(t,e,n){const s=fn(t),i=s._s.get(n);return void 0!==i?qn.resolve(s.os.get(i)):s.Ur.getTargetData(e,n)}(s,t,ui(e)).next((e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,s.Ur.getMatchingKeysForTargetId(t,e.targetId).next((t=>{r=t}))})).next((()=>s.ss.getDocumentsMatchingQuery(t,e,n?i:Pn.min(),n?r:Ii()))).next((t=>(function(t,e,n){let s=t.us.get(e)||Pn.min();n.forEach(((t,e)=>{e.readTime.compareTo(s)>0&&(s=e.readTime)})),t.us.set(e,s)}(s,function(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),t),{documents:t,Ts:r})))))}class Oo{constructor(){this.activeTargetIds=_i}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Fo{constructor(){this.so=new Oo,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t,e=!0){return e&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,e,n){this.oo[t]=e}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new Oo,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{_o(t){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){cn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){cn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $o=null;function qo(){return null===$o?$o=268435456+Math.round(2147483648*Math.random()):$o++,"0x"+$o.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const zo={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="WebChannelConnection";class Ho extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=e+"://"+t.host,this.vo=`projects/${n}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${s}`}get Fo(){return!1}Mo(t,e,n,s,i){const r=qo(),o=this.xo(t,e.toUriEncodedString());cn("RestConnection",`Sending RPC '${t}' ${r}:`,o,n);const a={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(a,s,i),this.No(t,o,a,n).then((e=>(cn("RestConnection",`Received RPC '${t}' ${r}: `,e),e)),(e=>{throw hn("RestConnection",`RPC '${t}' ${r} failed with error: `,e,"url: ",o,"request:",n),e}))}Lo(t,e,n,s,i,r){return this.Mo(t,e,n,s,i)}Oo(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+on,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}xo(t,e){const n=zo[t];return`${this.Do}/v1/${e}:${n}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,e,n,s){const i=qo();return new Promise(((r,o)=>{const a=new We;a.setWithCredentials(!0),a.listenOnce(Ye.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Xe.NO_ERROR:const e=a.getResponseJson();cn(Go,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(e)),r(e);break;case Xe.TIMEOUT:cn(Go,`RPC '${t}' ${i} timed out`),o(new yn(gn.DEADLINE_EXCEEDED,"Request time out"));break;case Xe.HTTP_ERROR:const n=a.getStatus();if(cn(Go,`RPC '${t}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(gn).indexOf(e)>=0?e:gn.UNKNOWN}(e.status);o(new yn(t,e.message))}else o(new yn(gn.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new yn(gn.UNAVAILABLE,"Connection failed."));break;default:mn()}}finally{cn(Go,`RPC '${t}' ${i} completed.`)}}));const l=JSON.stringify(s);cn(Go,`RPC '${t}' ${i} sending request:`,s),a.send(e,"POST",l,n,15)}))}Bo(t,e,n){const s=qo(),i=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=en(),o=tn(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const c=i.join("");cn(Go,`Creating RPC '${t}' stream ${s}: ${c}`,a);const u=r.createWebChannel(c,a);let h=!1,d=!1;const m=new Ko({Io:e=>{d?cn(Go,`Not sending because RPC '${t}' stream ${s} is closed:`,e):(h||(cn(Go,`Opening RPC '${t}' stream ${s} transport.`),u.open(),h=!0),cn(Go,`RPC '${t}' stream ${s} sending:`,e),u.send(e))},To:()=>u.close()}),p=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Qe.EventType.OPEN,(()=>{d||(cn(Go,`RPC '${t}' stream ${s} transport opened.`),m.yo())})),p(u,Qe.EventType.CLOSE,(()=>{d||(d=!0,cn(Go,`RPC '${t}' stream ${s} transport closed`),m.So())})),p(u,Qe.EventType.ERROR,(e=>{d||(d=!0,hn(Go,`RPC '${t}' stream ${s} transport errored:`,e),m.So(new yn(gn.UNAVAILABLE,"The operation could not be completed")))})),p(u,Qe.EventType.MESSAGE,(e=>{var n;if(!d){const i=e.data[0];pn(!!i);const r=i,o=r.error||(null===(n=r[0])||void 0===n?void 0:n.error);if(o){cn(Go,`RPC '${t}' stream ${s} received error:`,o);const e=o.status;let n=function(t){const e=mr[t];if(void 0!==e)return fr(e)}(e),i=o.message;void 0===n&&(n=gn.INTERNAL,i="Unknown error status: "+e+" with message "+o.message),d=!0,m.So(new yn(n,i)),u.close()}else cn(Go,`RPC '${t}' stream ${s} received:`,i),m.bo(i)}})),p(o,Ze.STAT_EVENT,(e=>{e.stat===Je.PROXY?cn(Go,`RPC '${t}' stream ${s} detected buffering proxy`):e.stat===Je.NOPROXY&&cn(Go,`RPC '${t}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{m.wo()}),0),m}}function Wo(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t){return new Dr(t,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(t,e,n=1e3,s=1.5,i=6e4){this.ui=t,this.timerId=e,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const e=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,e-n);s>0&&cn("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,(()=>(this.Uo=Date.now(),t()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(t,e,n,s,i,r,o,a){this.ui=t,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Yo(t,e)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,e){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==t?this.t_.reset():e&&e.code===gn.RESOURCE_EXHAUSTED?(un(e.toString()),un("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):e&&e.code===gn.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(e)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),e=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Yo===e&&this.P_(t,n)}),(e=>{t((()=>{const t=new yn(gn.UNKNOWN,"Fetching auth token failed: "+e.message);return this.I_(t)}))}))}P_(t,e){const n=this.h_(this.Yo);this.stream=this.T_(t,e),this.stream.Eo((()=>{n((()=>this.listener.Eo()))})),this.stream.Ro((()=>{n((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((t=>{n((()=>this.I_(t)))})),this.stream.onMessage((t=>{n((()=>1==++this.e_?this.E_(t):this.onNext(t)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(t){return cn("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return e=>{this.ui.enqueueAndForget((()=>this.Yo===t?e():(cn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Jo extends Xo{constructor(t,e,n,s,i,r){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,s,r),this.serializer=i}T_(t,e){return this.connection.Bo("Listen",t,e)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const e=function(t,e){let n;if("targetChange"in e){e.targetChange;const i="NO_CHANGE"===(s=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===s?1:"REMOVE"===s?2:"CURRENT"===s?3:"RESET"===s?4:mn(),r=e.targetChange.targetIds||[],o=function(t,e){return t.useProto3Json?(pn(void 0===e||"string"==typeof e),is.fromBase64String(e||"")):(pn(void 0===e||e instanceof Buffer||e instanceof Uint8Array),is.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(t){const e=void 0===t.code?gn.UNKNOWN:fr(t.code);return new yn(e,t.message||"")}(a);n=new Nr(i,r,o,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=qr(t,s.document.name),r=Or(s.document.updateTime),o=s.document.createTime?Or(s.document.createTime):Pn.min(),a=new Is({mapValue:{fields:s.document.fields}}),l=Ps.newFoundDocument(i,r,o,a),c=s.targetIds||[],u=s.removedTargetIds||[];n=new Er(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=qr(t,s.document),r=s.readTime?Or(s.readTime):Pn.min(),o=Ps.newNoDocument(i,r),a=s.removedTargetIds||[];n=new Er([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=qr(t,s.document),r=s.removedTargetIds||[];n=new Er([],r,i,null)}else{if(!("filter"in e))return mn();{e.filter;const t=e.filter;t.targetId;const{count:s=0,unchangedNames:i}=t,r=new dr(s,i),o=t.targetId;n=new Sr(o,r)}}var s;return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Pn.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?Pn.min():e.readTime?Or(e.readTime):Pn.min()}(t);return this.listener.d_(e,n)}A_(t){const e={};e.database=Kr(this.serializer),e.addTarget=function(t,e){let n;const s=e.target;if(n=ii(s)?{documents:Wr(t,s)}:{query:Qr(t,s)._t},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=Lr(t,e.resumeToken);const s=Rr(t,e.expectedCount);null!==s&&(n.expectedCount=s)}else if(e.snapshotVersion.compareTo(Pn.min())>0){n.readTime=Mr(t,e.snapshotVersion.toTimestamp());const s=Rr(t,e.expectedCount);null!==s&&(n.expectedCount=s)}return n}(this.serializer,t);const n=function(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return mn()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.a_(e)}R_(t){const e={};e.database=Kr(this.serializer),e.removeTarget=t,this.a_(e)}}class Zo extends Xo{constructor(t,e,n,s,i,r){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,s,r),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,e){return this.connection.Bo("Write",t,e)}E_(t){return pn(!!t.streamToken),this.lastStreamToken=t.streamToken,pn(!t.writeResults||0===t.writeResults.length),this.listener.f_()}onNext(t){pn(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const e=function(t,e){return t&&t.length>0?(pn(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?Or(t.updateTime):Or(e);return n.isEqual(Pn.min())&&(n=Or(e)),new Hi(n,t.transformResults||[])}(t,e)))):[]}(t.writeResults,t.commitTime),n=Or(t.commitTime);return this.listener.g_(n,e)}p_(){const t={};t.database=Kr(this.serializer),this.a_(t)}m_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>function(t,e){let n;if(e instanceof nr)n={update:Hr(t,e.key,e.value)};else if(e instanceof ar)n={delete:$r(t,e.key)};else if(e instanceof sr)n={update:Hr(t,e.key,e.data),updateMask:io(e.fieldMask)};else{if(!(e instanceof lr))return mn();n={verify:$r(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof Fi)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Bi)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof $i)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof zi)return{fieldPath:e.field.canonicalString(),increment:n.Pe};throw mn()}(0,t)))),e.precondition.isNone||(n.currentDocument=(s=t,void 0!==(i=e.precondition).updateTime?{updateTime:Vr(s,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:mn())),n;var s,i}(this.serializer,t)))};this.a_(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta extends class{}{constructor(t,e,n,s){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new yn(gn.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,e,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,r])=>this.connection.Mo(t,Br(e,n),s,i,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===gn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new yn(gn.UNKNOWN,t.toString())}))}Lo(t,e,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,o])=>this.connection.Lo(t,Br(e,n),s,r,o,i))).catch((t=>{throw"FirebaseError"===t.name?(t.code===gn.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new yn(gn.UNKNOWN,t.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class ea{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(t){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,"Online"===t&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(un(e),this.D_=!1):cn("OnlineStateTracker",e)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(t,e,n,s,i){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((t=>{n.enqueueAndForget((async()=>{ha(this)&&(cn("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=fn(t);e.L_.add(4),await ia(e),e.q_.set("Unknown"),e.L_.delete(4),await sa(e)}(this))}))})),this.q_=new ea(n,s)}}async function sa(t){if(ha(t))for(const e of t.B_)await e(!0)}async function ia(t){for(const e of t.B_)await e(!1)}function ra(t,e){const n=fn(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),ua(n)?ca(n):ka(n).r_()&&aa(n,e))}function oa(t,e){const n=fn(t),s=ka(n);n.N_.delete(e),s.r_()&&la(n,e),0===n.N_.size&&(s.r_()?s.o_():ha(n)&&n.q_.set("Unknown"))}function aa(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pn.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ka(t).A_(e)}function la(t,e){t.Q_.xe(e),ka(t).R_(e)}function ca(t){t.Q_=new Cr({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ka(t).start(),t.q_.v_()}function ua(t){return ha(t)&&!ka(t).n_()&&t.N_.size>0}function ha(t){return 0===fn(t).L_.size}function da(t){t.Q_=void 0}async function ma(t){t.q_.set("Online")}async function pa(t){t.N_.forEach(((e,n)=>{aa(t,e)}))}async function fa(t,e){da(t),ua(t)?(t.q_.M_(e),ca(t)):t.q_.set("Unknown")}async function ga(t,e,n){if(t.q_.set("Online"),e instanceof Nr&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const s of e.targetIds)t.N_.has(s)&&(await t.remoteSyncer.rejectListen(s,n),t.N_.delete(s),t.Q_.removeTarget(s))}(t,e)}catch(s){cn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await ya(t,s)}else if(e instanceof Er?t.Q_.Ke(e):e instanceof Sr?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Pn.min()))try{const e=await Do(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.Q_.rt(e);return n.targetChanges.forEach(((n,s)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.N_.get(s);i&&t.N_.set(s,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const s=t.N_.get(e);if(!s)return;t.N_.set(e,s.withResumeToken(is.EMPTY_BYTE_STRING,s.snapshotVersion)),la(t,e);const i=new oo(s.target,e,n,s.sequenceNumber);aa(t,i)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(i){cn("RemoteStore","Failed to raise snapshot:",i),await ya(t,i)}}async function ya(t,e,n){if(!zn(e))throw e;t.L_.add(1),await ia(t),t.q_.set("Offline"),n||(n=()=>Do(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{cn("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await sa(t)}))}function va(t,e){return e().catch((n=>ya(t,n,e)))}async function xa(t){const e=fn(t),n=Ia(e);let s=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;wa(e);)try{const t=await Mo(e.localStore,s);if(null===t){0===e.O_.length&&n.o_();break}s=t.batchId,ba(e,t)}catch(i){await ya(e,i)}Ta(e)&&Ea(e)}function wa(t){return ha(t)&&t.O_.length<10}function ba(t,e){t.O_.push(e);const n=Ia(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Ta(t){return ha(t)&&!Ia(t).n_()&&t.O_.length>0}function Ea(t){Ia(t).start()}async function Sa(t){Ia(t).p_()}async function Na(t){const e=Ia(t);for(const n of t.O_)e.m_(n.mutations)}async function ja(t,e,n){const s=t.O_.shift(),i=ur.from(s,e,n);await va(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await xa(t)}async function Ca(t,e){e&&Ia(t).V_&&await async function(t,e){if(function(t){switch(t){default:return mn();case gn.CANCELLED:case gn.UNKNOWN:case gn.DEADLINE_EXCEEDED:case gn.RESOURCE_EXHAUSTED:case gn.INTERNAL:case gn.UNAVAILABLE:case gn.UNAUTHENTICATED:return!1;case gn.INVALID_ARGUMENT:case gn.NOT_FOUND:case gn.ALREADY_EXISTS:case gn.PERMISSION_DENIED:case gn.FAILED_PRECONDITION:case gn.ABORTED:case gn.OUT_OF_RANGE:case gn.UNIMPLEMENTED:case gn.DATA_LOSS:return!0}}(n=e.code)&&n!==gn.ABORTED){const n=t.O_.shift();Ia(t).s_(),await va(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await xa(t)}var n}(t,e),Ta(t)&&Ea(t)}async function Aa(t,e){const n=fn(t);n.asyncQueue.verifyOperationInProgress(),cn("RemoteStore","RemoteStore received new credentials");const s=ha(n);n.L_.add(3),await ia(n),s&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await sa(n)}function ka(t){return t.K_||(t.K_=function(t,e,n){const s=fn(t);return s.w_(),new Jo(e,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(t.datastore,t.asyncQueue,{Eo:ma.bind(null,t),Ro:pa.bind(null,t),mo:fa.bind(null,t),d_:ga.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),ua(t)?ca(t):t.q_.set("Unknown")):(await t.K_.stop(),da(t))}))),t.K_}function Ia(t){return t.U_||(t.U_=function(t,e,n){const s=fn(t);return s.w_(),new Zo(e,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,n)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Sa.bind(null,t),mo:Ca.bind(null,t),f_:Na.bind(null,t),g_:ja.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await xa(t)):(await t.U_.stop(),t.O_.length>0&&(cn("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class _a{constructor(t,e,n,s,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new vn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,s,i){const r=Date.now()+n,o=new _a(t,e,r,s,i);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new yn(gn.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pa(t,e){if(un("AsyncQueue",`${e}: ${t}`),zn(t))return new yn(gn.UNAVAILABLE,`${e}: ${t}`);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(t){this.comparator=t?(e,n)=>t(e,n)||Vn.comparator(e.key,n.key):(t,e)=>Vn.comparator(t.key,e.key),this.keyedMap=Ei(),this.sortedSet=new Xn(this.comparator)}static emptySet(t){return new Da(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Da))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,s=n.getNext().key;if(!t.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new Da;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(){this.W_=new Xn(Vn.comparator)}track(t){const e=t.doc.key,n=this.W_.get(e);n?0!==t.type&&3===n.type?this.W_=this.W_.insert(e,t):3===t.type&&1!==n.type?this.W_=this.W_.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.W_=this.W_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.W_=this.W_.remove(e):1===t.type&&2===n.type?this.W_=this.W_.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):mn():this.W_=this.W_.insert(e,t)}G_(){const t=[];return this.W_.inorderTraversal(((e,n)=>{t.push(n)})),t}}class Ma{constructor(t,e,n,s,i,r,o,a,l){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=r,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(t,e,n,s,i){const r=[];return e.forEach((t=>{r.push({type:0,doc:t})})),new Ma(t,e,Da.emptySet(e),r,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&mi(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let s=0;s<e.length;s++)if(e[s].type!==n[s].type||!e[s].doc.isEqual(n[s].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((t=>t.J_()))}}class Va{constructor(){this.queries=Oa(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(t,e){const n=fn(t),s=n.queries;n.queries=Oa(),s.forEach(((t,n)=>{for(const s of n.j_)s.onError(e)}))}(this,new yn(gn.ABORTED,"Firestore shutting down"))}}function Oa(){return new xi((t=>pi(t)),mi)}async function Fa(t,e){const n=fn(t);let s=3;const i=e.query;let r=n.queries.get(i);r?!r.H_()&&e.J_()&&(s=2):(r=new La,s=e.J_()?0:1);try{switch(s){case 0:r.z_=await n.onListen(i,!0);break;case 1:r.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const t=Pa(o,`Initialization of query '${fi(e.query)}' failed`);return void e.onError(t)}n.queries.set(i,r),r.j_.push(e),e.Z_(n.onlineState),r.z_&&e.X_(r.z_)&&qa(n)}async function Ba(t,e){const n=fn(t),s=e.query;let i=3;const r=n.queries.get(s);if(r){const t=r.j_.indexOf(e);t>=0&&(r.j_.splice(t,1),0===r.j_.length?i=e.J_()?0:1:!r.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function Ua(t,e){const n=fn(t);let s=!1;for(const i of e){const t=i.query,e=n.queries.get(t);if(e){for(const t of e.j_)t.X_(i)&&(s=!0);e.z_=i}}s&&qa(n)}function $a(t,e,n){const s=fn(t),i=s.queries.get(e);if(i)for(const r of i.j_)r.onError(n);s.queries.delete(e)}function qa(t){t.Y_.forEach((t=>{t.next()}))}var za,Ka;(Ka=za||(za={})).ea="default",Ka.Cache="cache";class Ga{constructor(t,e,n){this.query=t,this.ta=e,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new Ma(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.na?this.ia(t)&&(this.ta.next(t),e=!0):this.sa(t,this.onlineState)&&(this.oa(t),e=!0),this.ra=t,e}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let e=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),e=!0),e}sa(t,e){if(!t.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==e;return(!this.options._a||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}ia(t){if(t.docChanges.length>0)return!0;const e=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}oa(t){t=Ma.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==za.Cache}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(t){this.key=t}}class Wa{constructor(t){this.key=t}}class Qa{constructor(t,e){this.query=t,this.Ta=e,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ii(),this.mutatedKeys=Ii(),this.Aa=yi(t),this.Ra=new Da(this.Aa)}get Va(){return this.Ta}ma(t,e){const n=e?e.fa:new Ra,s=e?e.Ra:this.Ra;let i=e?e.mutatedKeys:this.mutatedKeys,r=s,o=!1;const a="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,l="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((t,e)=>{const c=s.get(t),u=gi(this.query,e)?e:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let m=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),m=!0):this.ga(c,u)||(n.track({type:2,doc:u}),m=!0,(a&&this.Aa(u,a)>0||l&&this.Aa(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),m=!0):c&&!u&&(n.track({type:1,doc:c}),m=!0,(a||l)&&(o=!0)),m&&(u?(r=r.add(u),i=d?i.add(t):i.delete(t)):(r=r.delete(t),i=i.delete(t)))})),null!==this.query.limit)for(;r.size>this.query.limit;){const t="F"===this.query.limitType?r.last():r.first();r=r.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{Ra:r,fa:n,ns:o,mutatedKeys:i}}ga(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,s){const i=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const r=t.fa.G_();r.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mn()}};return n(t)-n(e)}(t.type,e.type)||this.Aa(t.doc,e.doc))),this.pa(n),s=null!=s&&s;const o=e&&!s?this.ya():[],a=0===this.da.size&&this.current&&!s?1:0,l=a!==this.Ea;return this.Ea=a,0!==r.length||l?{snapshot:new Ma(this.query,t.Ra,i,r,t.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ra,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=Ii(),this.Ra.forEach((t=>{this.Sa(t.key)&&(this.da=this.da.add(t.key))}));const e=[];return t.forEach((t=>{this.da.has(t)||e.push(new Wa(t))})),this.da.forEach((n=>{t.has(n)||e.push(new Ha(n))})),e}ba(t){this.Ta=t.Ts,this.da=Ii();const e=this.ma(t.documents);return this.applyChanges(e,!0)}Da(){return Ma.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Ya{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Xa{constructor(t){this.key=t,this.va=!1}}class Ja{constructor(t,e,n,s,i,r){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=r,this.Ca={},this.Fa=new xi((t=>pi(t)),mi),this.Ma=new Map,this.xa=new Set,this.Oa=new Xn(Vn.comparator),this.Na=new Map,this.La=new xo,this.Ba={},this.ka=new Map,this.qa=ho.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function Za(t,e,n=!0){const s=wl(t);let i;const r=s.Fa.get(e);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.Da()):i=await el(s,e,n,!0),i}async function tl(t,e){const n=wl(t);await el(n,e,!0,!1)}async function el(t,e,n,s){const i=await function(t,e){const n=fn(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let s;return n.Ur.getTargetData(t,e).next((i=>i?(s=i,qn.resolve(s)):n.Ur.allocateTargetId(t).next((i=>(s=new oo(e,i,"TargetPurposeListen",t.currentSequenceNumber),n.Ur.addTargetData(t,s).next((()=>s)))))))})).then((t=>{const s=n.os.get(t.targetId);return(null===s||t.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(t.targetId,t),n._s.set(e,t.targetId)),t}))}(t.localStore,ui(e)),r=i.targetId,o=t.sharedClientState.addLocalQueryTarget(r,n);let a;return s&&(a=await async function(t,e,n,s,i){t.Ka=(e,n,s)=>async function(t,e,n,s){let i=e.view.ma(n);i.ns&&(i=await Vo(t.localStore,e.query,!1).then((({documents:t})=>e.view.ma(t,i))));const r=s&&s.targetChanges.get(e.targetId),o=s&&null!=s.targetMismatches.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,r,o);return pl(t,e.targetId,a.wa),a.snapshot}(t,e,n,s);const r=await Vo(t.localStore,e,!0),o=new Qa(e,r.Ts),a=o.ma(r.documents),l=Tr.createSynthesizedTargetChangeForCurrentChange(n,s&&"Offline"!==t.onlineState,i),c=o.applyChanges(a,t.isPrimaryClient,l);pl(t,n,c.wa);const u=new Ya(e,n,o);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}(t,e,r,"current"===o,i.resumeToken)),t.isPrimaryClient&&n&&ra(t.remoteStore,i),a}async function nl(t,e,n){const s=fn(t),i=s.Fa.get(e),r=s.Ma.get(i.targetId);if(r.length>1)return s.Ma.set(i.targetId,r.filter((t=>!mi(t,e)))),void s.Fa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await Lo(s.localStore,i.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(i.targetId),n&&oa(s.remoteStore,i.targetId),dl(s,i.targetId)})).catch($n)):(dl(s,i.targetId),await Lo(s.localStore,i.targetId,!0))}async function sl(t,e){const n=fn(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),oa(n.remoteStore,s.targetId))}async function il(t,e,n){const s=function(t){const e=fn(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ll.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cl.bind(null,e),e}(t);try{const t=await function(t,e){const n=fn(t),s=_n.now(),i=e.reduce(((t,e)=>t.add(e.key)),Ii());let r,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=bi(),l=Ii();return n.cs.getEntries(t,i).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(l=l.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((i=>{r=i;const o=[];for(const t of e){const e=tr(t,r.get(t.key).overlayedDocument);null!=e&&o.push(new sr(t.key,e,_s(e.value.mapValue),Wi.exists(!0)))}return n.mutationQueue.addMutationBatch(t,s,o,e)})).next((e=>{o=e;const s=e.applyToLocalDocumentSet(r,l);return n.documentOverlayCache.saveOverlays(t,e.batchId,s)}))})).then((()=>({batchId:o.batchId,changes:Si(r)})))}(s.localStore,e);s.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let s=t.Ba[t.currentUser.toKey()];s||(s=new Xn(kn)),s=s.insert(e,n),t.Ba[t.currentUser.toKey()]=s}(s,t.batchId,n),await yl(s,t.changes),await xa(s.remoteStore)}catch(i){const t=Pa(i,"Failed to persist write");n.reject(t)}}async function rl(t,e){const n=fn(t);try{const t=await Ro(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const s=n.Na.get(e);s&&(pn(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?s.va=!0:t.modifiedDocuments.size>0?pn(s.va):t.removedDocuments.size>0&&(pn(s.va),s.va=!1))})),await yl(n,t,e)}catch(s){await $n(s)}}function ol(t,e,n){const s=fn(t);if(s.isPrimaryClient&&0===n||!s.isPrimaryClient&&1===n){const t=[];s.Fa.forEach(((n,s)=>{const i=s.view.Z_(e);i.snapshot&&t.push(i.snapshot)})),function(t,e){const n=fn(t);n.onlineState=e;let s=!1;n.queries.forEach(((t,n)=>{for(const i of n.j_)i.Z_(e)&&(s=!0)})),s&&qa(n)}(s.eventManager,e),t.length&&s.Ca.d_(t),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function al(t,e,n){const s=fn(t);s.sharedClientState.updateQueryState(e,"rejected",n);const i=s.Na.get(e),r=i&&i.key;if(r){let t=new Xn(Vn.comparator);t=t.insert(r,Ps.newNoDocument(r,Pn.min()));const n=Ii().add(r),i=new br(Pn.min(),new Map,new Xn(kn),t,n);await rl(s,i),s.Oa=s.Oa.remove(r),s.Na.delete(e),gl(s)}else await Lo(s.localStore,e,!1).then((()=>dl(s,e,n))).catch($n)}async function ll(t,e){const n=fn(t),s=e.batch.batchId;try{const t=await function(t,e){const n=fn(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(t,e,n,s){const i=n.batch,r=i.keys();let o=qn.resolve();return r.forEach((t=>{o=o.next((()=>s.getEntry(e,t))).next((e=>{const r=n.docVersions.get(t);pn(null!==r),e.version.compareTo(r)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),s.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,i)))}(n,t,e,i).next((()=>i.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=Ii();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,s)))}))}(n.localStore,e);hl(n,s,null),ul(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await yl(n,t)}catch(i){await $n(i)}}async function cl(t,e,n){const s=fn(t);try{const t=await function(t,e){const n=fn(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let s;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(pn(null!==e),s=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,s,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,s))).next((()=>n.localDocuments.getDocuments(t,s)))}))}(s.localStore,e);hl(s,e,n),ul(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await yl(s,t)}catch(i){await $n(i)}}function ul(t,e){(t.ka.get(e)||[]).forEach((t=>{t.resolve()})),t.ka.delete(e)}function hl(t,e,n){const s=fn(t);let i=s.Ba[s.currentUser.toKey()];if(i){const t=i.get(e);t&&(n?t.reject(n):t.resolve(),i=i.remove(e)),s.Ba[s.currentUser.toKey()]=i}}function dl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Ma.get(e))t.Fa.delete(s),n&&t.Ca.$a(s,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((e=>{t.La.containsKey(e)||ml(t,e)}))}function ml(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);null!==n&&(oa(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),gl(t))}function pl(t,e,n){for(const s of n)s instanceof Ha?(t.La.addReference(s.key,e),fl(t,s)):s instanceof Wa?(cn("SyncEngine","Document no longer in limbo: "+s.key),t.La.removeReference(s.key,e),t.La.containsKey(s.key)||ml(t,s.key)):mn()}function fl(t,e){const n=e.key,s=n.path.canonicalString();t.Oa.get(n)||t.xa.has(s)||(cn("SyncEngine","New document in limbo: "+n),t.xa.add(s),gl(t))}function gl(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Vn(Rn.fromString(e)),s=t.qa.next();t.Na.set(s,new Xa(n)),t.Oa=t.Oa.insert(n,s),ra(t.remoteStore,new oo(ui(oi(n.path)),s,"TargetPurposeLimboResolution",Kn.oe))}}async function yl(t,e,n){const s=fn(t),i=[],r=[],o=[];s.Fa.isEmpty()||(s.Fa.forEach(((t,a)=>{o.push(s.Ka(a,e,n).then((t=>{var e;if((t||n)&&s.isPrimaryClient){const i=t?!t.fromCache:null===(e=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===e?void 0:e.current;s.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(t){i.push(t);const e=Ao.Wi(a.targetId,t);r.push(e)}})))})),await Promise.all(o),s.Ca.d_(i),await async function(t,e){const n=fn(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>qn.forEach(e,(e=>qn.forEach(e.$i,(s=>n.persistence.referenceDelegate.addReference(t,e.targetId,s))).next((()=>qn.forEach(e.Ui,(s=>n.persistence.referenceDelegate.removeReference(t,e.targetId,s)))))))))}catch(s){if(!zn(s))throw s;cn("LocalStore","Failed to update sequence numbers: "+s)}for(const i of e){const t=i.targetId;if(!i.fromCache){const e=n.os.get(t),s=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(s);n.os=n.os.insert(t,i)}}}(s.localStore,r))}async function vl(t,e){const n=fn(t);if(!n.currentUser.isEqual(e)){cn("SyncEngine","User change. New user:",e.toKey());const t=await Po(n.localStore,e);n.currentUser=e,i="'waitForPendingWrites' promise is rejected due to a user change.",(s=n).ka.forEach((t=>{t.forEach((t=>{t.reject(new yn(gn.CANCELLED,i))}))})),s.ka.clear(),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await yl(n,t.hs)}var s,i}function xl(t,e){const n=fn(t),s=n.Na.get(e);if(s&&s.va)return Ii().add(s.key);{let t=Ii();const s=n.Ma.get(e);if(!s)return t;for(const e of s){const s=n.Fa.get(e);t=t.unionWith(s.view.Va)}return t}}function wl(t){const e=fn(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=rl.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xl.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=al.bind(null,e),e.Ca.d_=Ua.bind(null,e.eventManager),e.Ca.$a=$a.bind(null,e.eventManager),e}class bl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Qo(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),await this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)}ja(t,e){return null}Ha(t,e){return null}za(t){return function(t,e,n,s){return new _o(t,e,n,s)}(this.persistence,new Io,t.initialUser,this.serializer)}Ga(t){return new No(Co.Zr,this.serializer)}Wa(t){return new Fo}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bl.provider={build:()=>new bl};class Tl{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>ol(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=vl.bind(null,this.syncEngine),await async function(t,e){const n=fn(t);e?(n.L_.delete(2),await sa(n)):e||(n.L_.add(2),await ia(n),n.q_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new Va}createDatastore(t){const e=Qo(t.databaseInfo.databaseId),n=(s=t.databaseInfo,new Ho(s));var s;return function(t,e,n,s){return new ta(t,e,n,s)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,s=t.asyncQueue,i=t=>ol(this.syncEngine,t,0),r=Uo.D()?new Uo:new Bo,new na(e,n,s,i,r);var e,n,s,i,r}createSyncEngine(t,e){return function(t,e,n,s,i,r,o){const a=new Ja(t,e,n,s,i,r);return o&&(a.Qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(t){const e=fn(t);cn("RemoteStore","RemoteStore shutting down."),e.L_.add(5),await ia(e),e.k_.shutdown(),e.q_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate(),null===(e=this.eventManager)||void 0===e||e.terminate()}}Tl.provider={build:()=>new Tl};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class El{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):un("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,e){setTimeout((()=>{this.muted||t(e)}),0)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(t,e,n,s,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=s,this.user=rn.UNAUTHENTICATED,this.clientId=An.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async t=>{cn("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(cn("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new vn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Pa(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function Nl(t,e){t.asyncQueue.verifyOperationInProgress(),cn("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async t=>{s.isEqual(t)||(await Po(e.localStore,t),s=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function jl(t,e){t.asyncQueue.verifyOperationInProgress();const n=await async function(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){cn("FirestoreClient","Using user provided OfflineComponentProvider");try{await Nl(t,t._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!("FirebaseError"===(n=i).name?n.code===gn.FAILED_PRECONDITION||n.code===gn.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code))throw i;hn("Error using user provided cache. Falling back to memory cache: "+i),await Nl(t,new bl)}}else cn("FirestoreClient","Using default OfflineComponentProvider"),await Nl(t,new bl);var n;return t._offlineComponents}(t);cn("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>Aa(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>Aa(e.remoteStore,n))),t._onlineComponents=e}async function Cl(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(cn("FirestoreClient","Using user provided OnlineComponentProvider"),await jl(t,t._uninitializedComponentsProvider._online)):(cn("FirestoreClient","Using default OnlineComponentProvider"),await jl(t,new Tl))),t._onlineComponents}async function Al(t){const e=await Cl(t),n=e.eventManager;return n.onListen=Za.bind(null,e.syncEngine),n.onUnlisten=nl.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=tl.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=sl.bind(null,e.syncEngine),n}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function kl(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Il=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _l(t,e,n){if(!n)throw new yn(gn.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Pl(t){if(!Vn.isDocumentKey(t))throw new yn(gn.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Dl(t){if(Vn.isDocumentKey(t))throw new yn(gn.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Rl(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const n=(e=t).constructor?e.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var e;return"function"==typeof t?"a function":mn()}function Ml(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new yn(gn.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rl(t);throw new yn(gn.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new yn(gn.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new yn(gn.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}(function(t,e,n,s){if(!0===e&&!0===s)throw new yn(gn.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)})("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kl(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new yn(gn.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new yn(gn.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new yn(gn.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(e=this.experimentalLongPollingOptions,n=t.experimentalLongPollingOptions,e.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams;var e,n}}class Vl{constructor(t,e,n,s){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ll({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new yn(gn.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new yn(gn.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ll(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new wn;switch(t.type){case"firstParty":return new Sn(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new yn(gn.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Il.get(t);e&&(cn("ComponentProvider","Removing Datastore"),Il.delete(t),e.terminate())}(this),Promise.resolve()}}function Ol(t,e,n,s={}){var i;const r=(t=Ml(t,Vl))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==r.host&&r.host!==o&&hn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},r),{host:o,ssl:!1})),s.mockUserToken){let e,n;if("string"==typeof s.mockUserToken)e=s.mockUserToken,n=rn.MOCK_USER;else{e=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const r=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[et(JSON.stringify({alg:"none",type:"JWT"})),et(JSON.stringify(r)),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(s.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const r=s.mockUserToken.sub||s.mockUserToken.user_id;if(!r)throw new yn(gn.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new rn(r)}t._authCredentials=new bn(new xn(e,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Fl(this.firestore,t,this._query)}}class Bl{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ul(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Bl(this.firestore,t,this._key)}}class Ul extends Fl{constructor(t,e,n){super(t,e,oi(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Bl(this.firestore,null,new Vn(t))}withConverter(t){return new Ul(this.firestore,t,this._path)}}function $l(t,e,...n){if(t=yt(t),_l("collection","path",e),t instanceof Vl){const s=Rn.fromString(e,...n);return Dl(s),new Ul(t,null,s)}{if(!(t instanceof Bl||t instanceof Ul))throw new yn(gn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Rn.fromString(e,...n));return Dl(s),new Ul(t.firestore,null,s)}}function ql(t,e,...n){if(t=yt(t),1===arguments.length&&(e=An.newId()),_l("doc","path",e),t instanceof Vl){const s=Rn.fromString(e,...n);return Pl(s),new Bl(t,null,new Vn(s))}{if(!(t instanceof Bl||t instanceof Ul))throw new yn(gn.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(Rn.fromString(e,...n));return Pl(s),new Bl(t.firestore,t instanceof Ul?t.converter:null,new Vn(s))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Yo(this,"async_queue_retry"),this.Vu=()=>{const t=Wo();t&&cn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()},this.mu=t;const e=Wo();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;const e=Wo();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise((()=>{}));const e=new vn;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Pu.push(t),this.pu())))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!zn(t))throw t;cn("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(t){const e=this.mu.then((()=>(this.du=!0,t().catch((t=>{this.Eu=t,this.du=!1;throw un("INTERNAL UNHANDLED ERROR: ",function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((t=>(this.du=!1,t))))));return this.mu=e,e}enqueueAfterDelay(t,e,n){this.fu(),this.Ru.indexOf(t)>-1&&(e=0);const s=_a.createAndSchedule(this,t,e,n,(t=>this.yu(t)));return this.Tu.push(s),s}fu(){this.Eu&&mn()}verifyOperationInProgress(){}async wu(){let t;do{t=this.mu,await t}while(t!==this.mu)}Su(t){for(const e of this.Tu)if(e.timerId===t)return!0;return!1}bu(t){return this.wu().then((()=>{this.Tu.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.Tu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.wu()}))}Du(t){this.Ru.push(t)}yu(t){const e=this.Tu.indexOf(t);this.Tu.splice(e,1)}}class Kl extends Vl{constructor(t,e,n,s){super(t,e,n,s),this.type="firestore",this._queue=new zl,this._persistenceKey=(null==s?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new zl(t),this._firestoreClient=void 0,await t}}}function Gl(t){if(t._terminated)throw new yn(gn.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||function(t){var e,n,s;const i=t._freezeSettings(),r=(o=t._databaseId,a=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",l=t._persistenceKey,c=i,new ds(o,a,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,kl(c.experimentalLongPollingOptions),c.useFetchStreams));var o,a,l,c;t._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(s=i.localCache)||void 0===s?void 0:s._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Sl(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(t){const e=null==t?void 0:t._online.build();return{_offline:null==t?void 0:t._offline.build(e),_online:e}}(t._componentsProvider))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t),t._firestoreClient}class Hl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Hl(is.fromBase64String(t))}catch(e){throw new yn(gn.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Hl(is.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new yn(gn.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ln(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(t){this._methodName=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new yn(gn.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new yn(gn.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return kn(this._lat,t._lat)||kn(this._long,t._long)}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(t){this._values=(t||[]).map((t=>t))}toArray(){return this._values.map((t=>t))}isEqual(t){return function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}(this._values,t._values)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=/^__.*__$/;class Zl{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new sr(t,this.data,this.fieldMask,e,this.fieldTransforms):new nr(t,this.data,e,this.fieldTransforms)}}function tc(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mn()}}class ec{constructor(t,e,n,s,i,r){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=s,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=r||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new ec(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),s=this.Fu({path:n,xu:!1});return s.Ou(t),s}Nu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return dc(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(0===t.length)throw this.Bu("Document fields must not be empty");if(tc(this.Cu)&&Jl.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}}class nc{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Qo(t)}Qu(t,e,n,s=!1){return new ec({Cu:t,methodName:e,qu:n,path:Ln.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sc(t){const e=t._freezeSettings(),n=Qo(t._databaseId);return new nc(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ic(t,e,n,s,i,r={}){const o=t.Qu(r.merge||r.mergeFields?2:0,e,n,i);lc("Data must be an object, but it was:",o,s);const a=oc(s,o);let l,c;if(r.merge)l=new ns(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const t=[];for(const s of r.mergeFields){const i=cc(e,s,n);if(!o.contains(i))throw new yn(gn.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);mc(t,i)||t.push(i)}l=new ns(t),c=o.fieldTransforms.filter((t=>l.covers(t.field)))}else l=null,c=o.fieldTransforms;return new Zl(new Is(a),l,c)}function rc(t,e){if(ac(t=yt(t)))return lc("Unsupported field value:",e,t),oc(t,e);if(t instanceof Ql)return function(t,e){if(!tc(e.Cu))throw e.Bu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.Bu(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&4!==e.Cu)throw e.Bu("Nested arrays are not supported");return function(t,e){const n=[];let s=0;for(const i of t){let t=rc(i,e.Lu(s));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),s++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=yt(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ri(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=_n.fromDate(t);return{timestampValue:Mr(e.serializer,n)}}if(t instanceof _n){const n=new _n(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Mr(e.serializer,n)}}if(t instanceof Yl)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Hl)return{bytesValue:Lr(e.serializer,t._byteString)};if(t instanceof Bl){const n=e.databaseId,s=t.firestore._databaseId;if(!s.isEqual(n))throw e.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Fr(t.firestore._databaseId||e.databaseId,t._key.path)}}if(t instanceof Xl)return n=e,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:t.toArray().map((t=>{if("number"!=typeof t)throw n.Bu("VectorValues must only contain numeric values.");return Pi(n.serializer,t)}))}}}}};var n;throw e.Bu(`Unsupported field value: ${Rl(t)}`)}(t,e)}function oc(t,e){const n={};return Yn(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qn(t,((t,s)=>{const i=rc(s,e.Mu(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function ac(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof _n||t instanceof Yl||t instanceof Hl||t instanceof Bl||t instanceof Ql||t instanceof Xl)}function lc(t,e,n){if(!ac(n)||("object"!=typeof(s=n)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s))){const s=Rl(n);throw"an object"===s?e.Bu(t+" a custom object"):e.Bu(t+" "+s)}var s}function cc(t,e,n){if((e=yt(e))instanceof Wl)return e._internalPath;if("string"==typeof e)return hc(t,e);throw dc("Field path arguments must be of type string or ",t,!1,void 0,n)}const uc=new RegExp("[~\\*/\\[\\]]");function hc(t,e,n){if(e.search(uc)>=0)throw dc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Wl(...e.split("."))._internalPath}catch(s){throw dc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function dc(t,e,n,s,i){const r=s&&!s.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${s}`),o&&(l+=` in document ${i}`),l+=")"),new yn(gn.INVALID_ARGUMENT,a+t+l)}function mc(t,e){return t.some((t=>t.isEqual(e)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(t,e,n,s,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Bl(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new fc(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(gc("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class fc extends pc{data(){return super.data()}}function gc(t,e){return"string"==typeof e?hc(t,e):e instanceof Wl?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{}class vc extends yc{}class xc extends vc{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new xc(t,e,n)}_apply(t){const e=this._parse(t);return Ec(t._query,e),new Fl(t.firestore,t.converter,hi(t._query,e))}_parse(t){const e=sc(t.firestore),n=function(t,e,n,s,i,r,o){let a;if(i.isKeyField()){if("array-contains"===r||"array-contains-any"===r)throw new yn(gn.INVALID_ARGUMENT,`Invalid Query. You can't perform '${r}' queries on documentId().`);if("in"===r||"not-in"===r){Tc(o,r);const e=[];for(const n of o)e.push(bc(s,t,n));a={arrayValue:{values:e}}}else a=bc(s,t,o)}else"in"!==r&&"not-in"!==r&&"array-contains-any"!==r||Tc(o,r),a=function(t,e,n,s=!1){return rc(n,t.Qu(s?4:3,e))}(n,e,o,"in"===r||"not-in"===r);return Fs.create(i,r,a)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value);return n}}class wc extends yc{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new wc(t,e)}_parse(t){const e=this._queryConstraints.map((e=>e._parse(t))).filter((t=>t.getFilters().length>0));return 1===e.length?e[0]:Bs.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const s=e.getFlattenedFilters();for(const i of s)Ec(n,i),n=hi(n,i)}(t._query,e),new Fl(t.firestore,t.converter,hi(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function bc(t,e,n){if("string"==typeof(n=yt(n))){if(""===n)throw new yn(gn.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!li(e)&&-1!==n.indexOf("/"))throw new yn(gn.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(Rn.fromString(n));if(!Vn.isDocumentKey(s))throw new yn(gn.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Es(t,new Vn(s))}if(n instanceof Bl)return Es(t,n._key);throw new yn(gn.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rl(n)}.`)}function Tc(t,e){if(!Array.isArray(t)||0===t.length)throw new yn(gn.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ec(t,e){const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new yn(gn.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new yn(gn.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Sc{convertValue(t,e="none"){switch(fs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return as(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ls(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw mn()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Qn(t,((t,s)=>{n[t]=this.convertValue(s,e)})),n}convertVectorValue(t){var e,n,s;const i=null===(s=null===(n=null===(e=t.fields)||void 0===e?void 0:e.value.arrayValue)||void 0===n?void 0:n.values)||void 0===s?void 0:s.map((t=>as(t.doubleValue)));return new Xl(i)}convertGeoPoint(t){return new Yl(as(t.latitude),as(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=us(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(hs(t));default:return null}}convertTimestamp(t){const e=os(t);return new _n(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Rn.fromString(t);pn(ro(n));const s=new ms(n.get(1),n.get(3)),i=new Vn(n.popFirst(5));return s.isEqual(e)||un(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Nc{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class jc extends pc{constructor(t,e,n,s,i,r){super(t,e,n,s,r),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(gc("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Cc extends jc{data(t={}){return super.data(t)}}class Ac{constructor(t,e,n,s){this._firestore=t,this._userDataWriter=e,this._snapshot=s,this.metadata=new Nc(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Cc(this._firestore,this._userDataWriter,n.key,n,new Nc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new yn(gn.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const s=new Cc(t._firestore,t._userDataWriter,n.doc.key,n.doc,new Nc(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:s,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const s=new Cc(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Nc(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let i=-1,r=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),r=n.indexOf(e.doc.key)),{type:kc(e.type),doc:s,oldIndex:i,newIndex:r}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function kc(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mn()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(t){t=Ml(t,Bl);const e=Ml(t.firestore,Kl);return function(t,e,n={}){const s=new vn;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,s,i){const r=new El({next:a=>{r.Za(),e.enqueueAndForget((()=>Ba(t,o)));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new yn(gn.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&s&&"server"===s.source?i.reject(new yn(gn.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:t=>i.reject(t)}),o=new Ga(oi(n.path),r,{includeMetadataChanges:!0,_a:!0});return Fa(t,o)}(await Al(t),t.asyncQueue,e,n,s))),s.promise}(Gl(e),t._key).then((n=>function(t,e,n){const s=n.docs.get(e._key),i=new _c(t);return new jc(t,i,e._key,s,new Nc(n.hasPendingWrites,n.fromCache),e.converter)}(e,t,n)))}class _c extends Sc{constructor(t){super(),this.firestore=t}convertBytes(t){return new Hl(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Bl(this.firestore,null,e)}}function Pc(t){t=Ml(t,Fl);const e=Ml(t.firestore,Kl),n=Gl(e),s=new _c(e);return function(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new yn(gn.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query),function(t,e,n={}){const s=new vn;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,s,i){const r=new El({next:n=>{r.Za(),e.enqueueAndForget((()=>Ba(t,o))),n.fromCache&&"server"===s.source?i.reject(new yn(gn.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:t=>i.reject(t)}),o=new Ga(n,r,{includeMetadataChanges:!0,_a:!0});return Fa(t,o)}(await Al(t),t.asyncQueue,e,n,s))),s.promise}(n,t._query).then((n=>new Ac(e,s,t,n)))}function Dc(t,e){const n=Ml(t.firestore,Kl),s=ql(t),i=function(t,e){let n;return n=t?t.toFirestore(e):e,n}(t.converter,e);return function(t,e){return function(t,e){const n=new vn;return t.asyncQueue.enqueueAndForget((async()=>il(await function(t){return Cl(t).then((t=>t.syncEngine))}(t),e,n))),n.promise}(Gl(t),e)}(n,[ic(sc(t.firestore),"addDoc",s._key,i,null!==t.converter,{}).toMutation(s._key,Wi.exists(!1))]).then((()=>s))}!function(t,e=!0){on="10.14.1",Ae(new vt("firestore",((t,{instanceIdentifier:n,options:s})=>{const i=t.getProvider("app").getImmediate(),r=new Kl(new Tn(t.getProvider("auth-internal")),new jn(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new yn(gn.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ms(t.options.projectId,e)}(i,n),i);return s=Object.assign({useFetchStreams:e},s),r._setSettings(s),r}),"PUBLIC").setMultipleInstances(!0)),Re(sn,"4.7.3",t),Re(sn,"4.7.3","esm2017")}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Re("firebase","10.14.1","app");const Rc="@firebase/installations",Mc="0.6.9",Lc=1e4,Vc=`w:${Mc}`,Oc="FIS_v2",Fc=36e5,Bc=new dt("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Uc(t){return t instanceof ht&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function qc(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function zc(t,e){const n=(await e.json()).error;return Bc.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Kc({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Gc(t,{refreshToken:e}){const n=Kc(t);return n.append("Authorization",function(t){return`${Oc} ${t}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)),n}async function Hc(t){const e=await t();return e.status>=500&&e.status<600?t():e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Wc(t){return new Promise((e=>{setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Qc=/^[cdef][\w-]{21}$/;function Yc(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){const e=(n=t,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return e.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);return Qc.test(e)?e:""}catch(t){return""}}function Xc(t){return`${t.appName}!${t.appId}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=new Map;function Zc(t,e){const n=Xc(t);tu(n,e),function(t,e){const n=function(){!eu&&"BroadcastChannel"in self&&(eu=new BroadcastChannel("[Firebase] FID Change"),eu.onmessage=t=>{tu(t.data.key,t.data.fid)});return eu}();n&&n.postMessage({key:t,fid:e});0===Jc.size&&eu&&(eu.close(),eu=null)}(n,e)}function tu(t,e){const n=Jc.get(t);if(n)for(const s of n)s(e)}let eu=null;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const nu="firebase-installations-store";let su=null;function iu(){return su||(su=Ut("firebase-installations-database",1,{upgrade:(t,e)=>{if(0===e)t.createObjectStore(nu)}})),su}async function ru(t,e){const n=Xc(t),s=(await iu()).transaction(nu,"readwrite"),i=s.objectStore(nu),r=await i.get(n);return await i.put(e,n),await s.done,r&&r.fid===e.fid||Zc(t,e.fid),e}async function ou(t){const e=Xc(t),n=(await iu()).transaction(nu,"readwrite");await n.objectStore(nu).delete(e),await n.done}async function au(t,e){const n=Xc(t),s=(await iu()).transaction(nu,"readwrite"),i=s.objectStore(nu),r=await i.get(n),o=e(r);return void 0===o?await i.delete(n):await i.put(o,n),await s.done,!o||r&&r.fid===o.fid||Zc(t,o.fid),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lu(t){let e;const n=await au(t.appConfig,(n=>{const s=function(t){const e=t||{fid:Yc(),registrationStatus:0};return hu(e)}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine){return{installationEntry:e,registrationPromise:Promise.reject(Bc.create("app-offline"))}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=async function(t,e){try{const n=await async function({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const s=$c(t),i=Kc(t),r=e.getImmediate({optional:!0});if(r){const t=await r.getHeartbeatsHeader();t&&i.append("x-firebase-client",t)}const o={fid:n,authVersion:Oc,appId:t.appId,sdkVersion:Vc},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await Hc((()=>fetch(s,a)));if(l.ok){const t=await l.json();return{fid:t.fid||n,registrationStatus:2,refreshToken:t.refreshToken,authToken:qc(t.authToken)}}throw await zc("Create Installation",l)}(t,e);return ru(t.appConfig,n)}catch(n){throw Uc(n)&&409===n.customData.serverCode?await ou(t.appConfig):await ru(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}(t,n);return{installationEntry:n,registrationPromise:s}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:cu(t)}:{installationEntry:e}}(t,s);return e=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}async function cu(t){let e=await uu(t.appConfig);for(;1===e.registrationStatus;)await Wc(100),e=await uu(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=await lu(t);return n||e}return e}function uu(t){return au(t,(t=>{if(!t)throw Bc.create("installation-not-found");return hu(t)}))}function hu(t){return 1===(e=t).registrationStatus&&e.registrationTime+Lc<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}async function du({appConfig:t,heartbeatServiceProvider:e},n){const s=function(t,{fid:e}){return`${$c(t)}/${e}/authTokens:generate`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,n),i=Gc(t,n),r=e.getImmediate({optional:!0});if(r){const t=await r.getHeartbeatsHeader();t&&i.append("x-firebase-client",t)}const o={installation:{sdkVersion:Vc,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await Hc((()=>fetch(s,a)));if(l.ok){return qc(await l.json())}throw await zc("Generate Auth Token",l)}async function mu(t,e=!1){let n;const s=await au(t.appConfig,(s=>{if(!fu(s))throw Bc.create("not-registered");const i=s.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Fc}(t)}(i))return s;if(1===i.requestStatus)return n=async function(t,e){let n=await pu(t.appConfig);for(;1===n.authToken.requestStatus;)await Wc(100),n=await pu(t.appConfig);const s=n.authToken;return 0===s.requestStatus?mu(t,e):s}(t,e),s;{if(!navigator.onLine)throw Bc.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(s);return n=async function(t,e){try{const n=await du(t,e),s=Object.assign(Object.assign({},e),{authToken:n});return await ru(t.appConfig,s),n}catch(n){if(!Uc(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await ru(t.appConfig,n)}else await ou(t.appConfig);throw n}}(t,e),e}}));return n?await n:s.authToken}function pu(t){return au(t,(t=>{if(!fu(t))throw Bc.create("not-registered");const e=t.authToken;return 1===(n=e).requestStatus&&n.requestTime+Lc<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var n;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}function fu(t){return void 0!==t&&2===t.registrationStatus}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function gu(t,e=!1){const n=t;await async function(t){const{registrationPromise:e}=await lu(t);e&&await e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n);return(await mu(n,e)).token}function yu(t){return Bc.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu="installations",xu=t=>{const e=ke(t.getProvider("app").getImmediate(),vu).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:n,registrationPromise:s}=await lu(e);return s?s.catch(console.error):mu(e).catch(console.error),n.fid}(e),getToken:t=>gu(e,t)}};Ae(new vt(vu,(t=>{const e=t.getProvider("app").getImmediate(),n=function(t){if(!t||!t.options)throw yu("App Configuration");if(!t.name)throw yu("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw yu(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:ke(e,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),Ae(new vt("installations-internal",xu,"PRIVATE")),Re(Rc,Mc),Re(Rc,Mc,"esm2017");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const wu="analytics",bu="https://www.googletagmanager.com/gtag/js",Tu=new At("@firebase/analytics"),Eu=new dt("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Su(t){if(!t.startsWith(bu)){const e=Eu.create("invalid-gtag-resource",{gtagURL:t});return Tu.warn(e.message),""}return t}function Nu(t){return Promise.all(t.map((t=>t.catch((t=>t)))))}function ju(t,e){const n=function(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}("firebase-js-sdk-policy",{createScriptURL:Su}),s=document.createElement("script"),i=`${bu}?l=${t}&id=${e}`;s.src=n?null==n?void 0:n.createScriptURL(i):i,s.async=!0,document.head.appendChild(s)}function Cu(t,e,n,s){return async function(i,...r){try{if("event"===i){const[s,i]=r;await async function(t,e,n,s,i){try{let r=[];if(i&&i.send_to){let t=i.send_to;Array.isArray(t)||(t=[t]);const s=await Nu(n);for(const n of t){const t=s.find((t=>t.measurementId===n)),i=t&&e[t.appId];if(!i){r=[];break}r.push(i)}}0===r.length&&(r=Object.values(e)),await Promise.all(r),t("event",s,i||{})}catch(r){Tu.error(r)}}(t,e,n,s,i)}else if("config"===i){const[i,o]=r;await async function(t,e,n,s,i,r){const o=s[i];try{if(o)await e[o];else{const t=(await Nu(n)).find((t=>t.measurementId===i));t&&await e[t.appId]}}catch(a){Tu.error(a)}t("config",i,r)}(t,e,n,s,i,o)}else if("consent"===i){const[e,n]=r;t("consent",e,n)}else if("get"===i){const[e,n,s]=r;t("get",e,n,s)}else if("set"===i){const[e]=r;t("set",e)}else t(i,...r)}catch(o){Tu.error(o)}}}const Au=new class{constructor(t={},e=1e3){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function ku(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Iu(t,e=Au,n){const{appId:s,apiKey:i,measurementId:r}=t.options;if(!s)throw Eu.create("no-app-id");if(!i){if(r)return{measurementId:r,appId:s};throw Eu.create("no-api-key")}const o=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Pu;return setTimeout((async()=>{a.abort()}),6e4),_u({appId:s,apiKey:i,measurementId:r},o,a,e)}async function _u(t,{throttleEndTimeMillis:e,backoffCount:n},s,i=Au){var r;const{appId:o,measurementId:a}=t;try{await function(t,e){return new Promise(((n,s)=>{const i=Math.max(e-Date.now(),0),r=setTimeout(n,i);t.addEventListener((()=>{clearTimeout(r),s(Eu.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}(s,e)}catch(l){if(a)return Tu.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==l?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const e=await async function(t){var e;const{appId:n,apiKey:s}=t,i={method:"GET",headers:ku(s)},r="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(r,i);if(200!==o.status&&304!==o.status){let t="";try{const n=await o.json();(null===(e=n.error)||void 0===e?void 0:e.message)&&(t=n.error.message)}catch(a){}throw Eu.create("config-fetch-failed",{httpStatus:o.status,responseMessage:t})}return o.json()}(t);return i.deleteThrottleMetadata(o),e}catch(l){const e=l;if(!function(t){if(!(t instanceof ht&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(e)){if(i.deleteThrottleMetadata(o),a)return Tu.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:o,measurementId:a};throw l}const c=503===Number(null===(r=null==e?void 0:e.customData)||void 0===r?void 0:r.httpStatus)?gt(n,i.intervalMillis,30):gt(n,i.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return i.setThrottleMetadata(o,u),Tu.debug(`Calling attemptFetch again in ${c} millis`),_u(t,u,s,i)}}class Pu{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach((t=>t()))}}async function Du(t,e,n,s,i,r,o){var a;const l=Iu(t);l.then((e=>{n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Tu.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((t=>Tu.error(t))),e.push(l);const c=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(){if(!ct())return Tu.warn(Eu.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await ut()}catch(t){return Tu.warn(Eu.create("indexeddb-unavailable",{errorInfo:null==t?void 0:t.toString()}).message),!1}return!0}().then((t=>t?s.getId():void 0)),[u,h]=await Promise.all([l,c]);(function(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(bu)&&n.src.includes(t))return n;return null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(r)||ju(r,u.measurementId),i("js",new Date);const d=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return d.origin="firebase",d.update=!0,null!=h&&(d.firebase_id=h),i("config",u.measurementId,d),u.measurementId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(t){this.app=t}_delete(){return delete Mu[this.app.options.appId],Promise.resolve()}}let Mu={},Lu=[];const Vu={};let Ou,Fu,Bu="dataLayer",Uu=!1;function $u(){const t=[];if(function(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()&&t.push("This is a browser extension environment."),"undefined"!=typeof navigator&&navigator.cookieEnabled||t.push("Cookies are not available."),t.length>0){const e=t.map(((t,e)=>`(${e+1}) ${t}`)).join(" "),n=Eu.create("invalid-analytics-context",{errorInfo:e});Tu.warn(n.message)}}function qu(t,e,n){$u();const s=t.options.appId;if(!s)throw Eu.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Eu.create("no-api-key");Tu.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Mu[s])throw Eu.create("already-exists",{id:s});if(!Uu){!function(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(Bu);const{wrappedGtag:t,gtagCore:e}=function(t,e,n,s,i){let r=function(...t){window[s].push(arguments)};return window[i]&&"function"==typeof window[i]&&(r=window[i]),window[i]=Cu(r,t,e,n),{gtagCore:r,wrappedGtag:window[i]}}(Mu,Lu,Vu,Bu,"gtag");Fu=t,Ou=e,Uu=!0}Mu[s]=Du(t,Lu,Vu,e,Ou,Bu,n);return new Ru(t)}function zu(t,e,n,s){t=yt(t),async function(t,e,n,s,i){if(i&&i.global)t("event",n,s);else{const i=await e;t("event",n,Object.assign(Object.assign({},s),{send_to:i}))}}(Fu,Mu[t.app.options.appId],e,n,s).catch((t=>Tu.error(t)))}const Ku="@firebase/analytics",Gu="0.10.8";Ae(new vt(wu,((t,{options:e})=>qu(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),e)),"PUBLIC")),Ae(new vt("analytics-internal",(function(t){try{const e=t.getProvider(wu).getImmediate();return{logEvent:(t,n,s)=>zu(e,t,n,s)}}catch(e){throw Eu.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),Re(Ku,Gu),Re(Ku,Gu,"esm2017");const Hu={apiKey:"AIzaSyDrGPpIfS4nDy7_-lHL5pkPEXpvt_kuGFk",authDomain:"pragya-singh.firebaseapp.com",projectId:"pragya-singh",storageBucket:"pragya-singh.firebasestorage.app",messagingSenderId:"352686938461",appId:"1:352686938461:web:99c8e5971846efb3a830b4",measurementId:"G-DPED6EXPPX"},Wu=Object.entries(Hu).filter((([t,e])=>!e)).map((([t])=>t));if(Wu.length>0)throw new Error(`Missing required environment variables: ${Wu.join(", ")}. Make sure these are set in your Netlify environment variables.`);const Qu=Pe(Hu);!function(t=De()){const e=ke(t=yt(t),wu);e.isInitialized()?e.getImmediate():function(t,e={}){const n=ke(t,wu);if(n.isInitialized()){const t=n.getImmediate();if(pt(e,n.getOptions()))return t;throw Eu.create("already-initialized")}const s=n.initialize({options:e})}(t)}(Qu);const Yu=function(t){const e="string"==typeof t?t:"(default)",n=ke("object"==typeof t?t:De(),"firestore").getImmediate({identifier:e});if(!n._initialized){const t=rt("firestore");t&&Ol(n,...t)}return n}(Qu),Xu=async()=>{try{const t=(await Pc($l(Yu,"hero"))).docs[0];return t?{id:t.id,...t.data()}:null}catch(t){return null}},Ju=async()=>{try{return(await Pc($l(Yu,"projects"))).docs.map((t=>({id:t.id,...t.data()})))}catch(t){return[]}},Zu=async t=>{try{const e=function(t,e,...n){let s=[];e instanceof yc&&s.push(e),s=s.concat(n),function(t){const e=t.filter((t=>t instanceof wc)).length,n=t.filter((t=>t instanceof xc)).length;if(e>1||e>0&&n>0)throw new yn(gn.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const i of s)t=i._apply(t);return t}($l(Yu,"projects"),function(t,e,n){const s=e,i=gc("where",t);return xc._create(i,s,n)}("id","==",t)),n=await Pc(e);if(!n.empty){const t=n.docs[0];return{id:t.id,...t.data()}}return null}catch(e){return null}},th=async()=>{try{const t=(await Pc($l(Yu,"skills"))).docs[0];return t?t.data().list:[]}catch(t){return[]}},eh=async()=>{try{const t=$l(Yu,"about"),e=await Pc(t);if(!e.empty){const t=e.docs[0];return{id:t.id,...t.data()}}return null}catch(t){return null}},nh=async()=>{try{const t=ql(Yu,"stats","stats"),e=await Ic(t);return e.exists()?e.data():null}catch(t){return null}},sh=async()=>{try{return(await Pc($l(Yu,"certificates"))).docs.map((t=>({id:t.id,...t.data()})))}catch(t){return[]}},ih=async()=>{try{const t=$l(Yu,"affiliations");return(await Pc(t)).docs.map((t=>t.data()))}catch(t){return[]}},rh=async()=>{try{const t=$l(Yu,"publications"),e=await Pc(t);return e.docs.map((t=>({id:t.id,...t.data()}))).sort(((t,e)=>(t.order||0)-(e.order||0)))}catch(t){return[]}},oh=async()=>{try{const t=$l(Yu,"awards"),e=await Pc(t);return e.docs.map((t=>({id:t.id,...t.data()}))).sort(((t,e)=>(t.order||0)-(e.order||0)))}catch(t){return[]}},ah=[{path:"/",label:"Home",ariaLabel:"Go to Home page"},{path:"/projects",label:"Projects",ariaLabel:"View Architecture Projects"},{path:"/about",label:"About",ariaLabel:"Learn more about the Architect"}];function lh({isMenuOpen:e,setIsMenuOpen:i}){const r=n(),[o,a]=t.useState(null);return t.useEffect((()=>{!async function(){try{const t=await eh();a(t)}catch(t){}}()}),[]),Q.jsxs("nav",{className:"fixed w-full bg-white/90 backdrop-blur-sm z-50 border-b",children:[Q.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Q.jsxs("div",{className:"flex justify-between h-16 items-center",children:[Q.jsxs(s,{to:"/",className:"font-playfair text-xl font-bold relative group","aria-label":"Return to Homepage",children:[Q.jsx("span",{className:"relative z-10",children:null==o?void 0:o.name}),Q.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-black transition-all duration-300 group-hover:w-full"})]}),Q.jsxs("div",{className:"hidden md:flex items-center space-x-1",children:[ah.map((t=>Q.jsxs(s,{to:t.path,"aria-label":t.ariaLabel,className:`relative px-3 py-2 text-sm font-medium transition-colors duration-200\n                  ${r.pathname===t.path?"text-black":"text-gray-600 hover:text-black"}\n                  group\n                `,children:[Q.jsx("span",{className:"relative z-10",children:t.label}),Q.jsx("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-black transform origin-left transition-transform duration-200 ease-out\n                  "+(r.pathname===t.path?"scale-x-100":"scale-x-0 group-hover:scale-x-100")})]},t.path))),Q.jsx(s,{to:"/contact","aria-label":"Contact the Architect",className:"ml-4 px-6 py-2 bg-black text-white rounded-full hover:bg-gray-800 transition-colors duration-300",children:"Let's Talk"})]}),Q.jsx("button",{className:"md:hidden p-2 rounded-full hover:bg-gray-100 transition-colors",onClick:()=>i(!e),children:e?Q.jsx(u,{className:"w-6 h-6"}):Q.jsx(h,{className:"w-6 h-6"})})]})}),e&&Q.jsx("div",{className:"md:hidden absolute w-full bg-white border-b shadow-lg",children:Q.jsxs("div",{className:"px-4 py-6 space-y-4",children:[ah.map((t=>Q.jsx(s,{to:t.path,className:"block px-4 py-3 rounded-lg transition-colors "+(r.pathname===t.path?"bg-gray-100 text-black":"text-gray-600 hover:bg-gray-50"),onClick:()=>i(!1),children:t.label},t.path))),Q.jsx("div",{className:"pt-4 border-t",children:Q.jsx(s,{to:"/contact",className:"block w-full px-4 py-3 bg-black text-white text-center rounded-lg hover:bg-gray-800 transition-colors",onClick:()=>i(!1),children:"Let's Talk"})})]})})]})}const ch=[{id:"1",year:2023,event:"Lead Architect, Urban Harmony Center",description:"Leading innovative sustainable architecture projects",icon:"Building2",color:"text-emerald-600",details:"Spearheaded multiple award-winning sustainable design projects"},{id:"2",year:2021,event:"International Architecture Award",description:"Recognized for excellence in sustainable design",icon:"Award",color:"text-blue-600",details:"Received the prestigious International Architecture Award"},{id:"3",year:2019,event:"Founded Studio Arc",description:"Established independent architectural practice",icon:"Briefcase",color:"text-purple-600",details:"Launched an independent practice focusing on sustainable solutions"}],uh={id:"stats",items:[{icon:"Building2",label:"Projects",value:"50+"},{icon:"Award",label:"Awards",value:"12"},{icon:"Users",label:"Clients",value:"100+"}]};let hh=!0;(async()=>{try{await Xu(),hh=!0}catch(t){hh=!1}})();const dh=async()=>{if(hh)try{const t=await(async()=>{try{return(await Pc($l(Yu,"timeline"))).docs.map((t=>({id:t.id,...t.data()})))}catch(t){return[]}})();if(t.length>0)return t}catch(t){}return ch},mh=async()=>{if(hh)try{const t=await nh();if(t)return t}catch(t){}return uh},ph={Building2:p,Award:f,Users:g};function fh(){const[e,n]=t.useState(null),[i,r]=t.useState(null),[o,a]=t.useState(!0),[l,c]=t.useState(null);t.useEffect((()=>{(async()=>{try{const t=await mh();r(t)}catch(t){c("Failed to load stats")}finally{a(!1)}})(),async function(){try{const t=await Xu();n(t)}catch(t){c(t instanceof Error?t.message:"Failed to load hero data")}finally{a(!1)}}()}),[]);return o?Q.jsx("section",{className:"relative min-h-screen flex items-center justify-center",children:Q.jsx("div",{className:"text-white text-2xl",children:"Loading..."})}):l?Q.jsx("section",{className:"relative min-h-screen flex items-center justify-center",children:Q.jsxs("div",{className:"text-red-500 text-2xl",children:["Error: ",l]})}):Q.jsxs("section",{className:"relative min-h-screen",children:[Q.jsxs("div",{className:"absolute inset-0",children:[Q.jsxs("div",{className:"relative w-full h-full",children:[Q.jsx("img",{src:(null==e?void 0:e.backgroundImage)||"https://images.unsplash.com/photo-1637088059531-4ffcc89d0dd3",alt:"Abstract Architecture",loading:"eager",width:1920,height:1080,className:"w-full h-full object-cover",onError:t=>{t.target.src="/placeholder-hero.jpg"}}),Q.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/90 via-black/70 to-transparent"})]}),Q.jsx("div",{className:"absolute inset-0 opacity-10",children:Q.jsx("div",{className:"absolute inset-0 pattern-animate",style:{backgroundImage:"linear-gradient(90deg, #ffffff 1px, transparent 1px), linear-gradient(0deg, #ffffff 1px, transparent 1px)",backgroundSize:"50px 50px"}})})]}),Q.jsx("div",{className:"relative min-h-screen flex items-center",children:Q.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full py-20 md:py-0",children:Q.jsxs("div",{className:"max-w-3xl space-y-8",children:[Q.jsxs("div",{className:"space-y-6",children:[Q.jsxs("h1",{className:"font-cormorant text-5xl sm:text-6xl md:text-7xl lg:text-8xl font-light text-white leading-tight",children:["Hello, I'm"," ",Q.jsxs("span",{className:"relative inline-block",children:[Q.jsx("span",{className:"relative z-10 font-semibold",children:(null==e?void 0:e.name)||"Name"}),Q.jsx("span",{className:"absolute bottom-0 left-0 w-full h-1 bg-white/30 transform origin-left transition-transform duration-500 group-hover:scale-x-100"})]})]}),Q.jsx("p",{className:"font-cormorant text-2xl sm:text-2xl md:text-3xl text-white/90 font-light max-w-2xl leading-relaxed tracking-wide",children:(null==e?void 0:e.subtitle)||"Licensed architect in Manchester, specializing in sustainable design and innovative architectural solutions."})]}),Q.jsxs("div",{className:"flex flex-wrap gap-4",children:[Q.jsxs(s,{to:"/contact","aria-label":"Contact me for architectural projects",className:"group inline-flex items-center px-6 sm:px-8 py-3 sm:py-4 bg-white text-black rounded-lg hover:bg-gray-100 transition-all duration-300 transform hover:-translate-y-1",children:["Contact Me",Q.jsx(d,{className:"ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform","aria-hidden":"true"})]}),Q.jsxs("button",{onClick:()=>{const t=document.getElementById("projects");null==t||t.scrollIntoView({behavior:"smooth"})},"aria-label":"Scroll to view architecture projects",className:"group inline-flex items-center px-6 sm:px-8 py-3 sm:py-4 bg-transparent text-white border-2 border-white/30 rounded-lg hover:bg-white/10 transition-all duration-300 transform hover:-translate-y-1",children:["View Projects",Q.jsx(m,{className:"ml-2 w-5 h-5 group-hover:translate-y-1 transition-transform","aria-hidden":"true"})]})]}),Q.jsx("div",{className:"pt-12 grid grid-cols-3 gap-8 sm:gap-12 max-w-lg",children:(null==i?void 0:i.items)?i.items.map(((t,e)=>{const n=ph[t.icon]||p;return Q.jsxs("div",{className:"text-center group",children:[Q.jsx(n,{className:"w-6 h-6 mx-auto mb-3 text-white/60 group-hover:text-white transition-colors duration-300"}),Q.jsx("div",{className:"font-cormorant text-3xl sm:text-4xl font-semibold text-white mb-1",children:t.value}),Q.jsx("div",{className:"text-white/60 text-sm tracking-wider uppercase group-hover:text-white/80 transition-colors duration-300",children:t.label})]},e)})):l?Q.jsx("p",{className:"text-red-500",children:l}):null})]})})}),Q.jsxs("div",{className:"absolute left-1/2 -translate-x-1/2 bottom-8 hidden md:flex flex-col items-center animate",children:[Q.jsx("div",{className:"w-1 h-10 rounded-full bg-white/20 relative overflow-hidden",children:Q.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-white/60 transform -translate-y-1/2 animate-scroll"})}),Q.jsx("span",{className:"text-white/60 text-sm mt-4 tracking-wider uppercase",children:"Scroll Down"})]})]})}const gh={Building2:p,Award:f,Users:g};function yh(){const[e,n]=t.useState(null),[i,r]=t.useState(null),[o,a]=t.useState(!0),[l,c]=t.useState(null);return t.useEffect((()=>{(async()=>{try{const t=await eh();n(t)}catch(t){}})(),(async()=>{try{const t=await mh();r(t)}catch(t){c("Failed to load stats")}finally{a(!1)}})()}),[]),o?Q.jsx("section",{className:"py-20 bg-gray-50",children:Q.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Q.jsx("div",{className:"animate-pulse",children:"Loading..."})})}):Q.jsx("section",{className:"py-20 bg-gray-50",children:Q.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Q.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[Q.jsxs("div",{className:"relative",children:[Q.jsx("img",{src:(null==e?void 0:e.image)||"https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?auto=format&fit=crop&q=80&w=2000",alt:(null==e?void 0:e.name)||"Profile",className:"rounded-2xl shadow-2xl"}),Q.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/80 backdrop-blur-sm rounded-b-2xl p-6",children:Q.jsx("div",{className:"grid grid-cols-3 gap-4",children:(null==i?void 0:i.items)?i.items.map(((t,e)=>{const n=gh[t.icon]||p;return Q.jsxs("div",{className:"text-center text-white",children:[Q.jsx(n,{className:"w-6 h-6 mx-auto mb-2"}),Q.jsx("div",{className:"font-playfair text-2xl font-bold",children:t.value}),Q.jsx("div",{className:"text-sm text-white/80",children:t.label})]},e)})):l?Q.jsx("p",{className:"text-red-500",children:l}):null})})]}),Q.jsxs("div",{className:"space-y-6",children:[Q.jsx("h2",{className:"font-playfair text-3xl sm:text-4xl lg:text-5xl font-bold",children:"About Me"}),Q.jsx("p",{className:"text-xl text-gray-600",children:(null==e?void 0:e.title)||"Transforming spaces with innovative architectural solutions"}),Q.jsx("p",{className:"text-gray-600 leading-relaxed",children:(null==e?void 0:e.description)||"As a licensed architect with over a decade of experience, I specialize in creating sustainable, innovative spaces that harmoniously blend form and function. My approach combines traditional architectural principles with cutting-edge technology."}),Q.jsxs("div",{className:"flex flex-wrap gap-4 pt-4",children:[Q.jsxs(s,{to:"/about",className:"inline-flex items-center px-6 py-3 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors",children:["Learn More",Q.jsx(d,{className:"ml-2 w-5 h-5"})]}),Q.jsxs("a",{href:(null==e?void 0:e.resume)||"/cv.pdf",className:"px-6 py-3 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors inline-flex items-center gap-2",children:[Q.jsx(y,{size:18}),"Download CV"]})]})]})]})})})}function vh(t){if("undefined"==typeof Proxy)return t;const e=new Map;return new Proxy(((...e)=>t(...e)),{get:(n,s)=>"create"===s?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}function xh(t){return null!==t&&"object"==typeof t&&"function"==typeof t.start}const wh=t=>Array.isArray(t);function bh(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}function Th(t){return"string"==typeof t||Array.isArray(t)}function Eh(t){const e=[{},{}];return null==t||t.values.forEach(((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()})),e}function Sh(t,e,n,s){if("function"==typeof e){const[i,r]=Eh(s);e=e(void 0!==n?n:t.custom,i,r)}if("string"==typeof e&&(e=t.variants&&t.variants[e]),"function"==typeof e){const[i,r]=Eh(s);e=e(void 0!==n?n:t.custom,i,r)}return e}function Nh(t,e,n){const s=t.getProps();return Sh(s,e,void 0!==n?n:s.custom,t)}const jh=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ch=["initial",...jh],Ah=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],kh=new Set(Ah),Ih=t=>1e3*t,_h=t=>t/1e3,Ph={type:"spring",stiffness:500,damping:25,restSpeed:10},Dh={type:"keyframes",duration:.8},Rh={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Mh=(t,{keyframes:e})=>e.length>2?Dh:kh.has(t)?t.startsWith("scale")?{type:"spring",stiffness:550,damping:0===e[1]?2*Math.sqrt(550):30,restSpeed:10}:Ph:Rh;function Lh(t,e){return t?t[e]||t.default||t:void 0}const Vh=!1,Oh=t=>null!==t;function Fh(t,{repeat:e,repeatType:n="loop"},s){const i=t.filter(Oh),r=e&&"loop"!==n&&e%2==1?0:i.length-1;return r&&void 0!==s?s:i[r]}const Bh=t=>t;const Uh=["read","resolveKeyframes","update","preRender","render","postRender"];function $h(t,e){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,o=Uh.reduce(((t,e)=>(t[e]=function(t){let e=new Set,n=new Set,s=!1,i=!1;const r=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(e){r.has(e)&&(l.schedule(e),t()),e(o)}const l={schedule:(t,i=!1,o=!1)=>{const a=o&&s?e:n;return i&&r.add(t),a.has(t)||a.add(t),t},cancel:t=>{n.delete(t),r.delete(t)},process:t=>{o=t,s?i=!0:(s=!0,[e,n]=[n,e],n.clear(),e.forEach(a),s=!1,i&&(i=!1,l.process(t)))}};return l}(r),t)),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:h,postRender:d}=o,m=()=>{const r=performance.now();n=!1,i.delta=s?1e3/60:Math.max(Math.min(r-i.timestamp,40),1),i.timestamp=r,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),h.process(i),d.process(i),i.isProcessing=!1,n&&e&&(s=!1,t(m))};return{schedule:Uh.reduce(((e,r)=>{const a=o[r];return e[r]=(e,r=!1,o=!1)=>(n||(n=!0,s=!0,i.isProcessing||t(m)),a.schedule(e,r,o)),e}),{}),cancel:t=>{for(let e=0;e<Uh.length;e++)o[Uh[e]].cancel(t)},state:i,steps:o}}const{schedule:qh,cancel:zh,state:Kh,steps:Gh}=$h("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:Bh,!0),Hh=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t;function Wh(t,e,n,s){if(t===e&&n===s)return Bh;const i=e=>function(t,e,n,s,i){let r,o,a=0;do{o=e+(n-e)/2,r=Hh(o,s,i)-t,r>0?n=o:e=o}while(Math.abs(r)>1e-7&&++a<12);return o}(e,0,1,t,n);return t=>0===t||1===t?t:Hh(i(t),e,s)}const Qh=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Yh=t=>e=>1-t(1-e),Xh=Wh(.33,1.53,.69,.99),Jh=Yh(Xh),Zh=Qh(Jh),td=t=>(t*=2)<1?.5*Jh(t):.5*(2-Math.pow(2,-10*(t-1))),ed=t=>1-Math.sin(Math.acos(t)),nd=Yh(ed),sd=Qh(ed),id=t=>/^0[^.\s]+$/u.test(t);let rd=Bh;const od=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),ad=t=>e=>"string"==typeof e&&e.startsWith(t),ld=ad("--"),cd=ad("var(--"),ud=t=>!!cd(t)&&hd.test(t.split("/*")[0].trim()),hd=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,dd=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function md(t,e,n=1){const[s,i]=function(t){const e=dd.exec(t);if(!e)return[,];const[,n,s,i]=e;return[`--${null!=n?n:s}`,i]}(t);if(!s)return;const r=window.getComputedStyle(e).getPropertyValue(s);if(r){const t=r.trim();return od(t)?parseFloat(t):t}return ud(i)?md(i,e,n+1):i}const pd=(t,e,n)=>n>e?e:n<t?t:n,fd={test:t=>"number"==typeof t,parse:parseFloat,transform:t=>t},gd={...fd,transform:t=>pd(0,1,t)},yd={...fd,default:1},vd=t=>({test:e=>"string"==typeof e&&e.endsWith(t)&&1===e.split(" ").length,parse:parseFloat,transform:e=>`${e}${t}`}),xd=vd("deg"),wd=vd("%"),bd=vd("px"),Td=vd("vh"),Ed=vd("vw"),Sd={...wd,parse:t=>wd.parse(t)/100,transform:t=>wd.transform(100*t)},Nd=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),jd=t=>t===fd||t===bd,Cd=(t,e)=>parseFloat(t.split(", ")[e]),Ad=(t,e)=>(n,{transform:s})=>{if("none"===s||!s)return 0;const i=s.match(/^matrix3d\((.+)\)$/u);if(i)return Cd(i[1],e);{const e=s.match(/^matrix\((.+)\)$/u);return e?Cd(e[1],t):0}},kd=new Set(["x","y","z"]),Id=Ah.filter((t=>!kd.has(t)));const _d={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Ad(4,13),y:Ad(5,14)};_d.translateX=_d.x,_d.translateY=_d.y;const Pd=t=>e=>e.test(t),Dd=[fd,bd,wd,xd,Ed,Td,{test:t=>"auto"===t,parse:t=>t}],Rd=t=>Dd.find(Pd(t)),Md=new Set;let Ld=!1,Vd=!1;function Od(){if(Vd){const t=Array.from(Md).filter((t=>t.needsMeasurement)),e=new Set(t.map((t=>t.element))),n=new Map;e.forEach((t=>{const e=function(t){const e=[];return Id.forEach((n=>{const s=t.getValue(n);void 0!==s&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))})),e}(t);e.length&&(n.set(t,e),t.render())})),t.forEach((t=>t.measureInitialState())),e.forEach((t=>{t.render();const e=n.get(t);e&&e.forEach((([e,n])=>{var s;null===(s=t.getValue(e))||void 0===s||s.set(n)}))})),t.forEach((t=>t.measureEndState())),t.forEach((t=>{void 0!==t.suspendedScrollY&&window.scrollTo(0,t.suspendedScrollY)}))}Vd=!1,Ld=!1,Md.forEach((t=>t.complete())),Md.clear()}function Fd(){Md.forEach((t=>{t.readKeyframes(),t.needsMeasurement&&(Vd=!0)}))}class Bd{constructor(t,e,n,s,i,r=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=s,this.element=i,this.isAsync=r}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Md.add(this),Ld||(Ld=!0,qh.read(Fd),qh.resolveKeyframes(Od))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:s}=this;for(let i=0;i<t.length;i++)if(null===t[i])if(0===i){const i=null==s?void 0:s.get(),r=t[t.length-1];if(void 0!==i)t[0]=i;else if(n&&e){const s=n.readValue(e,r);null!=s&&(t[0]=s)}void 0===t[0]&&(t[0]=r),s&&void 0===i&&s.set(t[0])}else t[i]=t[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Md.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Md.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Ud=t=>Math.round(1e5*t)/1e5,$d=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const qd=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,zd=(t,e)=>n=>Boolean("string"==typeof n&&qd.test(n)&&n.startsWith(t)||e&&!function(t){return null==t}(n)&&Object.prototype.hasOwnProperty.call(n,e)),Kd=(t,e,n)=>s=>{if("string"!=typeof s)return s;const[i,r,o,a]=s.match($d);return{[t]:parseFloat(i),[e]:parseFloat(r),[n]:parseFloat(o),alpha:void 0!==a?parseFloat(a):1}},Gd={...fd,transform:t=>Math.round((t=>pd(0,255,t))(t))},Hd={test:zd("rgb","red"),parse:Kd("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+Gd.transform(t)+", "+Gd.transform(e)+", "+Gd.transform(n)+", "+Ud(gd.transform(s))+")"};const Wd={test:zd("#"),parse:function(t){let e="",n="",s="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}},transform:Hd.transform},Qd={test:zd("hsl","hue"),parse:Kd("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+wd.transform(Ud(e))+", "+wd.transform(Ud(n))+", "+Ud(gd.transform(s))+")"},Yd={test:t=>Hd.test(t)||Wd.test(t)||Qd.test(t),parse:t=>Hd.test(t)?Hd.parse(t):Qd.test(t)?Qd.parse(t):Wd.parse(t),transform:t=>"string"==typeof t?t:t.hasOwnProperty("red")?Hd.transform(t):Qd.transform(t)},Xd=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const Jd="number",Zd="color",tm=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function em(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},i=[];let r=0;const o=e.replace(tm,(t=>(Yd.test(t)?(s.color.push(r),i.push(Zd),n.push(Yd.parse(t))):t.startsWith("var(")?(s.var.push(r),i.push("var"),n.push(t)):(s.number.push(r),i.push(Jd),n.push(parseFloat(t))),++r,"${}"))).split("${}");return{values:n,split:o,indexes:s,types:i}}function nm(t){return em(t).values}function sm(t){const{split:e,types:n}=em(t),s=e.length;return t=>{let i="";for(let r=0;r<s;r++)if(i+=e[r],void 0!==t[r]){const e=n[r];i+=e===Jd?Ud(t[r]):e===Zd?Yd.transform(t[r]):t[r]}return i}}const im=t=>"number"==typeof t?0:t;const rm={test:function(t){var e,n;return isNaN(t)&&"string"==typeof t&&((null===(e=t.match($d))||void 0===e?void 0:e.length)||0)+((null===(n=t.match(Xd))||void 0===n?void 0:n.length)||0)>0},parse:nm,createTransformer:sm,getAnimatableNone:function(t){const e=nm(t);return sm(t)(e.map(im))}},om=new Set(["brightness","contrast","saturate","opacity"]);function am(t){const[e,n]=t.slice(0,-1).split("(");if("drop-shadow"===e)return t;const[s]=n.match($d)||[];if(!s)return t;const i=n.replace(s,"");let r=om.has(e)?1:0;return s!==n&&(r*=100),e+"("+r+i+")"}const lm=/\b([a-z-]*)\(.*?\)/gu,cm={...rm,getAnimatableNone:t=>{const e=t.match(lm);return e?e.map(am).join(" "):t}},um={borderWidth:bd,borderTopWidth:bd,borderRightWidth:bd,borderBottomWidth:bd,borderLeftWidth:bd,borderRadius:bd,radius:bd,borderTopLeftRadius:bd,borderTopRightRadius:bd,borderBottomRightRadius:bd,borderBottomLeftRadius:bd,width:bd,maxWidth:bd,height:bd,maxHeight:bd,top:bd,right:bd,bottom:bd,left:bd,padding:bd,paddingTop:bd,paddingRight:bd,paddingBottom:bd,paddingLeft:bd,margin:bd,marginTop:bd,marginRight:bd,marginBottom:bd,marginLeft:bd,backgroundPositionX:bd,backgroundPositionY:bd},hm={rotate:xd,rotateX:xd,rotateY:xd,rotateZ:xd,scale:yd,scaleX:yd,scaleY:yd,scaleZ:yd,skew:xd,skewX:xd,skewY:xd,distance:bd,translateX:bd,translateY:bd,translateZ:bd,x:bd,y:bd,z:bd,perspective:bd,transformPerspective:bd,opacity:gd,originX:Sd,originY:Sd,originZ:bd},dm={...fd,transform:Math.round},mm={...um,...hm,zIndex:dm,size:bd,fillOpacity:gd,strokeOpacity:gd,numOctaves:dm},pm={...mm,color:Yd,backgroundColor:Yd,outlineColor:Yd,fill:Yd,stroke:Yd,borderColor:Yd,borderTopColor:Yd,borderRightColor:Yd,borderBottomColor:Yd,borderLeftColor:Yd,filter:cm,WebkitFilter:cm},fm=t=>pm[t];function gm(t,e){let n=fm(t);return n!==cm&&(n=rm),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const ym=new Set(["auto","none","0"]);class vm extends Bd{constructor(t,e,n,s,i){super(t,e,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let a=0;a<t.length;a++){let n=t[a];if("string"==typeof n&&(n=n.trim(),ud(n))){const s=md(n,e.current);void 0!==s&&(t[a]=s),a===t.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!Nd.has(n)||2!==t.length)return;const[s,i]=t,r=Rd(s),o=Rd(i);if(r!==o)if(jd(r)&&jd(o))for(let a=0;a<t.length;a++){const e=t[a];"string"==typeof e&&(t[a]=parseFloat(e))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let i=0;i<t.length;i++)("number"==typeof(s=t[i])?0===s:null===s||"none"===s||"0"===s||id(s))&&n.push(i);var s;n.length&&function(t,e,n){let s,i=0;for(;i<t.length&&!s;){const e=t[i];"string"==typeof e&&!ym.has(e)&&em(e).values.length&&(s=t[i]),i++}if(s&&n)for(const r of e)t[r]=gm(n,s)}(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=_d[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const s=e[e.length-1];void 0!==s&&t.getValue(n,s).jump(s,!1)}measureEndState(){var t;const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const r=s.length-1,o=s[r];s[r]=_d[n](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==o&&void 0===this.finalKeyframe&&(this.finalKeyframe=o),(null===(t=this.removedTransforms)||void 0===t?void 0:t.length)&&this.removedTransforms.forEach((([t,n])=>{e.getValue(t).set(n)})),this.resolveNoneKeyframes()}}function xm(t){return"function"==typeof t}let wm;function bm(){wm=void 0}const Tm={now:()=>(void 0===wm&&Tm.set(Kh.isProcessing||Vh?Kh.timestamp:performance.now()),wm),set:t=>{wm=t,queueMicrotask(bm)}},Em=(t,e)=>"zIndex"!==e&&(!("number"!=typeof t&&!Array.isArray(t))||!("string"!=typeof t||!rm.test(t)&&"0"!==t||t.startsWith("url(")));class Sm{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:r="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Tm.now(),this.options={autoplay:t,delay:e,type:n,repeat:s,repeatDelay:i,repeatType:r,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(Fd(),Od()),this._resolved}onKeyframesResolved(t,e){this.resolvedAt=Tm.now(),this.hasAttemptedResolve=!0;const{name:n,type:s,velocity:i,delay:r,onComplete:o,onUpdate:a,isGenerator:l}=this.options;if(!l&&!function(t,e,n,s){const i=t[0];if(null===i)return!1;if("display"===e||"visibility"===e)return!0;const r=t[t.length-1],o=Em(i,e),a=Em(r,e);return!(!o||!a)&&(function(t){const e=t[0];if(1===t.length)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}(t)||("spring"===n||xm(n))&&s)}(t,n,s,i)){if(!r)return null==a||a(Fh(t,this.options,e)),null==o||o(),void this.resolveFinishedPromise();this.options.duration=0}const c=this.initPlayback(t,e);!1!==c&&(this._resolved={keyframes:t,finalKeyframe:e,...c},this.onPostResolved())}onPostResolved(){}then(t,e){return this.currentFinishedPromise.then(t,e)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise((t=>{this.resolveFinishedPromise=t}))}}const Nm=(t,e,n)=>{const s=e-t;return 0===s?1:(n-t)/s},jm=(t,e,n=10)=>{let s="";const i=Math.max(Math.round(e/n),2);for(let r=0;r<i;r++)s+=t(Nm(0,i-1,r))+", ";return`linear(${s.substring(0,s.length-2)})`};function Cm(t,e){return e?t*(1e3/e):0}function Am(t,e,n){const s=Math.max(e-5,0);return Cm(n-t(s),e-s)}const km=100,Im=10,_m=1,Pm=0,Dm=800,Rm=.3,Mm=.3,Lm={granular:.01,default:2},Vm={granular:.005,default:.5},Om=.01,Fm=10,Bm=.05,Um=1,$m=.001;function qm({duration:t=Dm,bounce:e=Rm,velocity:n=Pm,mass:s=_m}){let i,r,o=1-e;o=pd(Bm,Um,o),t=pd(Om,Fm,_h(t)),o<1?(i=e=>{const s=e*o,i=s*t,r=s-n,a=Km(e,o),l=Math.exp(-i);return $m-r/a*l},r=e=>{const s=e*o*t,r=s*n+n,a=Math.pow(o,2)*Math.pow(e,2)*t,l=Math.exp(-s),c=Km(Math.pow(e,2),o);return(-i(e)+$m>0?-1:1)*((r-a)*l)/c}):(i=e=>Math.exp(-e*t)*((e-n)*t+1)-.001,r=e=>Math.exp(-e*t)*(t*t*(n-e)));const a=function(t,e,n){let s=n;for(let i=1;i<zm;i++)s-=t(s)/e(s);return s}(i,r,5/t);if(t=Ih(t),isNaN(a))return{stiffness:km,damping:Im,duration:t};{const e=Math.pow(a,2)*s;return{stiffness:e,damping:2*o*Math.sqrt(s*e),duration:t}}}const zm=12;function Km(t,e){return t*Math.sqrt(1-e*e)}const Gm=2e4;function Hm(t){let e=0;let n=t.next(e);for(;!n.done&&e<Gm;)e+=50,n=t.next(e);return e>=Gm?1/0:e}const Wm=["duration","bounce"],Qm=["stiffness","damping","mass"];function Ym(t,e){return e.some((e=>void 0!==t[e]))}function Xm(t=Mm,e=Rm){const n="object"!=typeof t?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:i}=n;const r=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:r},{stiffness:l,damping:c,mass:u,duration:h,velocity:d,isResolvedFromDuration:m}=function(t){let e={velocity:Pm,stiffness:km,damping:Im,mass:_m,isResolvedFromDuration:!1,...t};if(!Ym(t,Qm)&&Ym(t,Wm))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(1.2*n),i=s*s,r=2*pd(.05,1,1-t.bounce)*Math.sqrt(i);e={...e,mass:_m,stiffness:i,damping:r}}else{const n=qm(t);e={...e,...n,mass:_m},e.isResolvedFromDuration=!0}return e}({...n,velocity:-_h(n.velocity||0)}),p=d||0,f=c/(2*Math.sqrt(l*u)),g=o-r,y=_h(Math.sqrt(l/u)),v=Math.abs(g)<5;let x;if(s||(s=v?Lm.granular:Lm.default),i||(i=v?Vm.granular:Vm.default),f<1){const t=Km(y,f);x=e=>{const n=Math.exp(-f*y*e);return o-n*((p+f*y*g)/t*Math.sin(t*e)+g*Math.cos(t*e))}}else if(1===f)x=t=>o-Math.exp(-y*t)*(g+(p+y*g)*t);else{const t=y*Math.sqrt(f*f-1);x=e=>{const n=Math.exp(-f*y*e),s=Math.min(t*e,300);return o-n*((p+f*y*g)*Math.sinh(s)+t*g*Math.cosh(s))/t}}const w={calculatedDuration:m&&h||null,next:t=>{const e=x(t);if(m)a.done=t>=h;else{let n=0;f<1&&(n=0===t?Ih(p):Am(x,t,e));const r=Math.abs(n)<=s,l=Math.abs(o-e)<=i;a.done=r&&l}return a.value=a.done?o:e,a},toString:()=>{const t=Math.min(Hm(w),Gm),e=jm((e=>w.next(t*e).value),t,30);return t+"ms "+e}};return w}function Jm({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:r=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=t[0],d={done:!1,value:h},m=t=>void 0===a?l:void 0===l||Math.abs(a-t)<Math.abs(l-t)?a:l;let p=n*e;const f=h+p,g=void 0===o?f:o(f);g!==f&&(p=g-h);const y=t=>-p*Math.exp(-t/s),v=t=>g+y(t),x=t=>{const e=y(t),n=v(t);d.done=Math.abs(e)<=c,d.value=d.done?g:n};let w,b;const T=t=>{var e;(e=d.value,void 0!==a&&e<a||void 0!==l&&e>l)&&(w=t,b=Xm({keyframes:[d.value,m(d.value)],velocity:Am(v,t,d.value),damping:i,stiffness:r,restDelta:c,restSpeed:u}))};return T(0),{calculatedDuration:null,next:t=>{let e=!1;return b||void 0!==w||(e=!0,x(t),T(t)),void 0!==w&&t>=w?b.next(t-w):(!e&&x(t),d)}}}const Zm=Wh(.42,0,1,1),tp=Wh(0,0,.58,1),ep=Wh(.42,0,.58,1),np=t=>Array.isArray(t)&&"number"==typeof t[0],sp={linear:Bh,easeIn:Zm,easeInOut:ep,easeOut:tp,circIn:ed,circInOut:sd,circOut:nd,backIn:Jh,backInOut:Zh,backOut:Xh,anticipate:td},ip=t=>{if(np(t)){rd(4===t.length);const[e,n,s,i]=t;return Wh(e,n,s,i)}return"string"==typeof t?(rd(void 0!==sp[t]),sp[t]):t},rp=(t,e)=>n=>e(t(n)),op=(...t)=>t.reduce(rp),ap=(t,e,n)=>t+(e-t)*n;function lp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function cp(t,e){return n=>n>0?e:t}const up=(t,e,n)=>{const s=t*t,i=n*(e*e-s)+s;return i<0?0:Math.sqrt(i)},hp=[Wd,Hd,Qd];function dp(t){const e=(n=t,hp.find((t=>t.test(n))));var n;if(!Boolean(e))return!1;let s=e.parse(t);return e===Qd&&(s=function({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,n/=100;let i=0,r=0,o=0;if(e/=100){const s=n<.5?n*(1+e):n+e-n*e,a=2*n-s;i=lp(a,s,t+1/3),r=lp(a,s,t),o=lp(a,s,t-1/3)}else i=r=o=n;return{red:Math.round(255*i),green:Math.round(255*r),blue:Math.round(255*o),alpha:s}}(s)),s}const mp=(t,e)=>{const n=dp(t),s=dp(e);if(!n||!s)return cp(t,e);const i={...n};return t=>(i.red=up(n.red,s.red,t),i.green=up(n.green,s.green,t),i.blue=up(n.blue,s.blue,t),i.alpha=ap(n.alpha,s.alpha,t),Hd.transform(i))},pp=new Set(["none","hidden"]);function fp(t,e){return n=>ap(t,e,n)}function gp(t){return"number"==typeof t?fp:"string"==typeof t?ud(t)?cp:Yd.test(t)?mp:xp:Array.isArray(t)?yp:"object"==typeof t?Yd.test(t)?mp:vp:cp}function yp(t,e){const n=[...t],s=n.length,i=t.map(((t,n)=>gp(t)(t,e[n])));return t=>{for(let e=0;e<s;e++)n[e]=i[e](t);return n}}function vp(t,e){const n={...t,...e},s={};for(const i in n)void 0!==t[i]&&void 0!==e[i]&&(s[i]=gp(t[i])(t[i],e[i]));return t=>{for(const e in s)n[e]=s[e](t);return n}}const xp=(t,e)=>{const n=rm.createTransformer(e),s=em(t),i=em(e);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?pp.has(t)&&!i.values.length||pp.has(e)&&!s.values.length?function(t,e){return pp.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}(t,e):op(yp(function(t,e){var n;const s=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const o=e.types[r],a=t.indexes[o][i[o]],l=null!==(n=t.values[a])&&void 0!==n?n:0;s[r]=l,i[o]++}return s}(s,i),i.values),n):cp(t,e)};function wp(t,e,n){if("number"==typeof t&&"number"==typeof e&&"number"==typeof n)return ap(t,e,n);return gp(t)(t,e)}function bp(t,e,{clamp:n=!0,ease:s,mixer:i}={}){const r=t.length;if(rd(r===e.length),1===r)return()=>e[0];if(2===r&&t[0]===t[1])return()=>e[1];t[0]>t[r-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=function(t,e,n){const s=[],i=n||wp,r=t.length-1;for(let o=0;o<r;o++){let n=i(t[o],t[o+1]);if(e){const t=Array.isArray(e)?e[o]||Bh:e;n=op(t,n)}s.push(n)}return s}(e,s,i),a=o.length,l=e=>{let n=0;if(a>1)for(;n<t.length-2&&!(e<t[n+1]);n++);const s=Nm(t[n],t[n+1],e);return o[n](s)};return n?e=>l(pd(t[0],t[r-1],e)):l}function Tp(t){const e=[0];return function(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const i=Nm(0,e,s);t.push(ap(n,1,i))}}(e,t.length-1),e}function Ep({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const i=(t=>Array.isArray(t)&&"number"!=typeof t[0])(s)?s.map(ip):ip(s),r={done:!1,value:e[0]},o=function(t,e){return t.map((t=>t*e))}(n&&n.length===e.length?n:Tp(e),t),a=bp(o,e,{ease:Array.isArray(i)?i:(l=e,c=i,l.map((()=>c||ep)).splice(0,l.length-1))});var l,c;return{calculatedDuration:t,next:e=>(r.value=a(e),r.done=e>=t,r)}}const Sp=t=>{const e=({timestamp:e})=>t(e);return{start:()=>qh.update(e,!0),stop:()=>zh(e),now:()=>Kh.isProcessing?Kh.timestamp:Tm.now()}},Np={decay:Jm,inertia:Jm,tween:Ep,keyframes:Ep,spring:Xm},jp=t=>t/100;class Cp extends Sm{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();const{onStop:t}=this.options;t&&t()};const{name:e,motionValue:n,element:s,keyframes:i}=this.options,r=(null==s?void 0:s.KeyframeResolver)||Bd;this.resolver=new r(i,((t,e)=>this.onKeyframesResolved(t,e)),e,n,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:e="keyframes",repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:r=0}=this.options,o=xm(e)?e:Np[e]||Ep;let a,l;o!==Ep&&"number"!=typeof t[0]&&(a=op(jp,wp(t[0],t[1])),t=[0,100]);const c=o({...this.options,keyframes:t});"mirror"===i&&(l=o({...this.options,keyframes:[...t].reverse(),velocity:-r})),null===c.calculatedDuration&&(c.calculatedDuration=Hm(c));const{calculatedDuration:u}=c,h=u+s;return{generator:c,mirroredGenerator:l,mapPercentToKeyframes:a,calculatedDuration:u,resolvedDuration:h,totalDuration:h*(n+1)-s}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&t?this.state=this.pendingPlayState:this.pause()}tick(t,e=!1){const{resolved:n}=this;if(!n){const{keyframes:t}=this.options;return{done:!0,value:t[t.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:r,mapPercentToKeyframes:o,keyframes:a,calculatedDuration:l,totalDuration:c,resolvedDuration:u}=n;if(null===this.startTime)return i.next(0);const{delay:h,repeat:d,repeatType:m,repeatDelay:p,onUpdate:f}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-c/this.speed,this.startTime)),e?this.currentTime=t:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const g=this.currentTime-h*(this.speed>=0?1:-1),y=this.speed>=0?g<0:g>c;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=c);let v=this.currentTime,x=i;if(d){const t=Math.min(this.currentTime,c)/u;let e=Math.floor(t),n=t%1;!n&&t>=1&&(n=1),1===n&&e--,e=Math.min(e,d+1);Boolean(e%2)&&("reverse"===m?(n=1-n,p&&(n-=p/u)):"mirror"===m&&(x=r)),v=pd(0,1,n)*u}const w=y?{done:!1,value:a[0]}:x.next(v);o&&(w.value=o(w.value));let{done:b}=w;y||null===l||(b=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const T=null===this.holdTime&&("finished"===this.state||"running"===this.state&&b);return T&&void 0!==s&&(w.value=Fh(a,this.options,s)),f&&f(w.value),T&&this.finish(),w}get duration(){const{resolved:t}=this;return t?_h(t.calculatedDuration):0}get time(){return _h(this.currentTime)}set time(t){t=Ih(t),this.currentTime=t,null!==this.holdTime||0===this.speed?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=_h(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved)return void(this.pendingPlayState="running");if(this.isStopped)return;const{driver:t=Sp,onPlay:e,startTime:n}=this.options;this.driver||(this.driver=t((t=>this.tick(t)))),e&&e();const s=this.driver.now();null!==this.holdTime?this.startTime=s-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=s):this.startTime=null!=n?n:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;this._resolved?(this.state="paused",this.holdTime=null!==(t=this.currentTime)&&void 0!==t?t:0):this.pendingPlayState="paused"}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const Ap=new Set(["opacity","clipPath","filter","transform"]);function kp(t){let e;return()=>(void 0===e&&(e=t()),e)}const Ip={linearEasing:void 0};function _p(t,e){const n=kp(t);return()=>{var t;return null!==(t=Ip[e])&&void 0!==t?t:n()}}const Pp=_p((()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(t){return!1}return!0}),"linearEasing");function Dp(t){return Boolean("function"==typeof t&&Pp()||!t||"string"==typeof t&&(t in Mp||Pp())||np(t)||Array.isArray(t)&&t.every(Dp))}const Rp=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,Mp={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Rp([0,.65,.55,1]),circOut:Rp([.55,0,1,.45]),backIn:Rp([.31,.01,.66,-.59]),backOut:Rp([.33,1.53,.69,.99])};function Lp(t,e){return t?"function"==typeof t&&Pp()?jm(t,e):np(t)?Rp(t):Array.isArray(t)?t.map((t=>Lp(t,e)||Mp.easeOut)):Mp[t]:void 0}function Vp(t,e,n,{delay:s=0,duration:i=300,repeat:r=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=Lp(a,i);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:s,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:r+1,direction:"reverse"===o?"alternate":"normal"})}function Op(t,e){t.timeline=e,t.onfinish=null}const Fp=kp((()=>Object.hasOwnProperty.call(Element.prototype,"animate")));const Bp={anticipate:td,backInOut:Zh,circInOut:sd};class Up extends Sm{constructor(t){super(t);const{name:e,motionValue:n,element:s,keyframes:i}=this.options;this.resolver=new vm(i,((t,e)=>this.onKeyframesResolved(t,e)),e,n,s),this.resolver.scheduleResolve()}initPlayback(t,e){var n;let{duration:s=300,times:i,ease:r,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!(null===(n=a.owner)||void 0===n?void 0:n.current))return!1;var u;if("string"==typeof r&&Pp()&&r in Bp&&(r=Bp[r]),xm((u=this.options).type)||"spring"===u.type||!Dp(u.ease)){const{onComplete:e,onUpdate:n,motionValue:a,element:l,...c}=this.options,u=function(t,e){const n=new Cp({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:t[0]};const i=[];let r=0;for(;!s.done&&r<2e4;)s=n.sample(r),i.push(s.value),r+=10;return{times:void 0,keyframes:i,duration:r-10,ease:"linear"}}(t,c);1===(t=u.keyframes).length&&(t[1]=t[0]),s=u.duration,i=u.times,r=u.ease,o="keyframes"}const h=Vp(a.owner.current,l,t,{...this.options,duration:s,times:i,ease:r});return h.startTime=null!=c?c:this.calcStartTime(),this.pendingTimeline?(Op(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:n}=this.options;a.set(Fh(t,this.options,e)),n&&n(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:s,times:i,type:o,ease:r,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:e}=t;return _h(e)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:e}=t;return _h(e.currentTime||0)}set time(t){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.currentTime=Ih(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:e}=t;return e.playbackRate}set speed(t){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:e}=t;return e.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:e}=t;return e.startTime}attachTimeline(t){if(this._resolved){const{resolved:e}=this;if(!e)return Bh;const{animation:n}=e;Op(n,t)}else this.pendingTimeline=t;return Bh}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:e}=t;"finished"===e.playState&&this.updateFinishedPromise(),e.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:e,keyframes:n,duration:s,type:i,ease:r,times:o}=t;if("idle"===e.playState||"finished"===e.playState)return;if(this.time){const{motionValue:t,onUpdate:e,onComplete:a,element:l,...c}=this.options,u=new Cp({...c,keyframes:n,duration:s,type:i,ease:r,times:o,isGenerator:!0}),h=Ih(this.time);t.setWithVelocity(u.sample(h-10).value,u.sample(h).value,10)}const{onStop:a}=this.options;a&&a(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:e,name:n,repeatDelay:s,repeatType:i,damping:r,type:o}=t;return Fp()&&n&&Ap.has(n)&&e&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate&&!s&&"mirror"!==i&&0!==r&&"inertia"!==o}}const $p=kp((()=>void 0!==window.ScrollTimeline));class qp{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,e){return Promise.all(this.animations).then(t).catch(e)}getAll(t){return this.animations[0][t]}setAll(t,e){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=e}attachTimeline(t,e){const n=this.animations.map((n=>$p()&&n.attachTimeline?n.attachTimeline(t):e(n)));return()=>{n.forEach(((t,e)=>{t&&t(),this.animations[e].stop()}))}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let e=0;e<this.animations.length;e++)t=Math.max(t,this.animations[e].duration);return t}runAll(t){this.animations.forEach((e=>e[t]()))}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const zp=(t,e,n,s={},i,r)=>o=>{const a=Lh(s,t)||{},l=a.delay||s.delay||0;let{elapsed:c=0}=s;c-=Ih(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:t=>{e.set(t),a.onUpdate&&a.onUpdate(t)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:r?void 0:i};(function({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:r,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length})(a)||(u={...u,...Mh(t,u)}),u.duration&&(u.duration=Ih(u.duration)),u.repeatDelay&&(u.repeatDelay=Ih(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let h=!1;if((!1===u.type||0===u.duration&&!u.repeatDelay)&&(u.duration=0,0===u.delay&&(h=!0)),h&&!r&&void 0!==e.get()){const t=Fh(u.keyframes,a);if(void 0!==t)return qh.update((()=>{u.onUpdate(t),u.onComplete()})),new qp([])}return!r&&Up.supports(u)?new Up(u):new Cp(u)};function Kp(t,e){-1===t.indexOf(e)&&t.push(e)}function Gp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Hp{constructor(){this.subscriptions=[]}add(t){return Kp(this.subscriptions,t),()=>Gp(this.subscriptions,t)}notify(t,e,n){const s=this.subscriptions.length;if(s)if(1===s)this.subscriptions[0](t,e,n);else for(let i=0;i<s;i++){const s=this.subscriptions[i];s&&s(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}class Wp{constructor(t,e={}){this.version="11.12.0",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(t,e=!0)=>{const n=Tm.now();this.updatedAt!==n&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(t),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),e&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){var e;this.current=t,this.updatedAt=Tm.now(),null===this.canTrackVelocity&&void 0!==t&&(this.canTrackVelocity=(e=this.current,!isNaN(parseFloat(e))))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new Hp);const n=this.events[t].add(e);return"change"===t?()=>{n(),qh.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t,e=!0){e&&this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t,e)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Tm.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,30);return Cm(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise((e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Qp(t,e){return new Wp(t,e)}function Yp(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Qp(n))}const Xp=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Jp="data-"+Xp("framerAppearId");function Zp(t){return t.props[Jp]}const tf=t=>Boolean(t&&t.getVelocity);function ef(t,e){const n=t.getValue("willChange");if(s=n,Boolean(tf(s)&&s.add))return n.add(e);var s}function nf({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&!0!==e[n];return e[n]=!1,s}function sf(t,e,{delay:n=0,transitionOverride:s,type:i}={}){var r;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;s&&(o=s);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const e=t.getValue(h,null!==(r=t.latestValues[h])&&void 0!==r?r:null),s=l[h];if(void 0===s||u&&nf(u,h))continue;const i={delay:n,...Lh(o||{},h)};let a=!1;if(window.MotionHandoffAnimation){const e=Zp(t);if(e){const t=window.MotionHandoffAnimation(e,h,qh);null!==t&&(i.startTime=t,a=!0)}}ef(t,h),e.start(zp(h,e,s,t.shouldReduceMotion&&kh.has(h)?{type:!1}:i,t,a));const d=e.animation;d&&c.push(d)}return a&&Promise.all(c).then((()=>{qh.update((()=>{a&&function(t,e){const n=Nh(t,e);let{transitionEnd:s={},transition:i={},...r}=n||{};r={...r,...s};for(const a in r)Yp(t,a,(o=r[a],wh(o)?o[o.length-1]||0:o));var o}(t,a)}))})),c}function rf(t,e,n={}){var s;const i=Nh(t,e,"exit"===n.type?null===(s=t.presenceContext)||void 0===s?void 0:s.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(sf(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(s=0)=>{const{delayChildren:i=0,staggerChildren:o,staggerDirection:a}=r;return function(t,e,n=0,s=0,i=1,r){const o=[],a=(t.variantChildren.size-1)*s,l=1===i?(t=0)=>t*s:(t=0)=>a-t*s;return Array.from(t.variantChildren).sort(of).forEach(((t,s)=>{t.notify("AnimationStart",e),o.push(rf(t,e,{...r,delay:n+l(s)}).then((()=>t.notify("AnimationComplete",e))))})),Promise.all(o)}(t,e,i+s,o,a,n)}:()=>Promise.resolve(),{when:l}=r;if(l){const[t,e]="beforeChildren"===l?[o,a]:[a,o];return t().then((()=>e()))}return Promise.all([o(),a(n.delay)])}function of(t,e){return t.sortNodePosition(e)}const af=Ch.length;function lf(t){if(!t)return;if(!t.isControllingVariants){const e=t.parent&&lf(t.parent)||{};return void 0!==t.props.initial&&(e.initial=t.props.initial),e}const e={};for(let n=0;n<af;n++){const s=Ch[n],i=t.props[s];(Th(i)||!1===i)&&(e[s]=i)}return e}const cf=[...jh].reverse(),uf=jh.length;function hf(t){return e=>Promise.all(e.map((({animation:e,options:n})=>function(t,e,n={}){let s;if(t.notify("AnimationStart",e),Array.isArray(e)){const i=e.map((e=>rf(t,e,n)));s=Promise.all(i)}else if("string"==typeof e)s=rf(t,e,n);else{const i="function"==typeof e?Nh(t,e,n.custom):e;s=Promise.all(sf(t,i,n))}return s.then((()=>{t.notify("AnimationComplete",e)}))}(t,e,n))))}function df(t){let e=hf(t),n=ff(),s=!0;const i=e=>(n,s)=>{var i;const r=Nh(t,s,"exit"===e?null===(i=t.presenceContext)||void 0===i?void 0:i.custom:void 0);if(r){const{transition:t,transitionEnd:e,...s}=r;n={...n,...s,...e}}return n};function r(r){const{props:o}=t,a=lf(t.parent)||{},l=[],c=new Set;let u={},h=1/0;for(let e=0;e<uf;e++){const d=cf[e],m=n[d],p=void 0!==o[d]?o[d]:a[d],f=Th(p),g=d===r?m.isActive:null;!1===g&&(h=e);let y=p===a[d]&&p!==o[d]&&f;if(y&&s&&t.manuallyAnimateOnMount&&(y=!1),m.protectedKeys={...u},!m.isActive&&null===g||!p&&!m.prevProp||xh(p)||"boolean"==typeof p)continue;const v=mf(m.prevProp,p);let x=v||d===r&&m.isActive&&!y&&f||e>h&&f,w=!1;const b=Array.isArray(p)?p:[p];let T=b.reduce(i(d),{});!1===g&&(T={});const{prevResolvedValues:E={}}=m,S={...E,...T},N=e=>{x=!0,c.has(e)&&(w=!0,c.delete(e)),m.needsAnimating[e]=!0;const n=t.getValue(e);n&&(n.liveStyle=!1)};for(const t in S){const e=T[t],n=E[t];if(u.hasOwnProperty(t))continue;let s=!1;s=wh(e)&&wh(n)?!bh(e,n):e!==n,s?null!=e?N(t):c.add(t):void 0!==e&&c.has(t)?N(t):m.protectedKeys[t]=!0}m.prevProp=p,m.prevResolvedValues=T,m.isActive&&(u={...u,...T}),s&&t.blockInitialAnimation&&(x=!1);x&&(!(y&&v)||w)&&l.push(...b.map((t=>({animation:t,options:{type:d}}))))}if(c.size){const e={};c.forEach((n=>{const s=t.getBaseTarget(n),i=t.getValue(n);i&&(i.liveStyle=!0),e[n]=null!=s?s:null})),l.push({animation:e})}let d=Boolean(l.length);return!s||!1!==o.initial&&o.initial!==o.animate||t.manuallyAnimateOnMount||(d=!1),s=!1,d?e(l):Promise.resolve()}return{animateChanges:r,setActive:function(e,s){var i;if(n[e].isActive===s)return Promise.resolve();null===(i=t.variantChildren)||void 0===i||i.forEach((t=>{var n;return null===(n=t.animationState)||void 0===n?void 0:n.setActive(e,s)})),n[e].isActive=s;const o=r(e);for(const t in n)n[t].protectedKeys={};return o},setAnimateFunction:function(n){e=n(t)},getState:()=>n,reset:()=>{n=ff(),s=!0}}}function mf(t,e){return"string"==typeof e?e!==t:!!Array.isArray(e)&&!bh(e,t)}function pf(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ff(){return{animate:pf(!0),whileInView:pf(),whileHover:pf(),whileTap:pf(),whileDrag:pf(),whileFocus:pf(),exit:pf()}}class gf{constructor(t){this.isMounted=!1,this.node=t}update(){}}let yf=0;const vf={animation:{Feature:class extends gf{constructor(t){super(t),t.animationState||(t.animationState=df(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();xh(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),null===(t=this.unmountControls)||void 0===t||t.call(this)}}},exit:{Feature:class extends gf{constructor(){super(...arguments),this.id=yf++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);e&&!t&&s.then((()=>e(this.id)))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}}},xf=t=>"mouse"===t.pointerType?"number"!=typeof t.button||t.button<=0:!1!==t.isPrimary;function wf(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}function bf(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function Tf(t,e,n,s){return bf(t,e,(t=>e=>xf(e)&&t(e,wf(e)))(n),s)}const Ef=(t,e)=>Math.abs(t-e);class Sf{constructor(t,e,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const t=Cf(this.lastMoveEventInfo,this.history),e=null!==this.startEvent,n=function(t,e){const n=Ef(t.x,e.x),s=Ef(t.y,e.y);return Math.sqrt(n**2+s**2)}(t.offset,{x:0,y:0})>=3;if(!e&&!n)return;const{point:s}=t,{timestamp:i}=Kh;this.history.push({...s,timestamp:i});const{onStart:r,onMove:o}=this.handlers;e||(r&&r(this.lastMoveEvent,t),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,t)},this.handlePointerMove=(t,e)=>{this.lastMoveEvent=t,this.lastMoveEventInfo=Nf(e,this.transformPagePoint),qh.update(this.updatePoint,!0)},this.handlePointerUp=(t,e)=>{this.end();const{onEnd:n,onSessionEnd:s,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const r=Cf("pointercancel"===t.type?this.lastMoveEventInfo:Nf(e,this.transformPagePoint),this.history);this.startEvent&&n&&n(t,r),s&&s(t,r)},!xf(t))return;this.dragSnapToOrigin=i,this.handlers=e,this.transformPagePoint=n,this.contextWindow=s||window;const r=Nf(wf(t),this.transformPagePoint),{point:o}=r,{timestamp:a}=Kh;this.history=[{...o,timestamp:a}];const{onSessionStart:l}=e;l&&l(t,Cf(r,this.history)),this.removeListeners=op(Tf(this.contextWindow,"pointermove",this.handlePointerMove),Tf(this.contextWindow,"pointerup",this.handlePointerUp),Tf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),zh(this.updatePoint)}}function Nf(t,e){return e?{point:e(t.point)}:t}function jf(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Cf({point:t},e){return{point:t,delta:jf(t,kf(e)),offset:jf(t,Af(e)),velocity:If(e,.1)}}function Af(t){return t[0]}function kf(t){return t[t.length-1]}function If(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const i=kf(t);for(;n>=0&&(s=t[n],!(i.timestamp-s.timestamp>Ih(e)));)n--;if(!s)return{x:0,y:0};const r=_h(i.timestamp-s.timestamp);if(0===r)return{x:0,y:0};const o={x:(i.x-s.x)/r,y:(i.y-s.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function _f(t){let e=null;return()=>{const n=()=>{e=null};return null===e&&(e=t,n)}}const Pf=_f("dragHorizontal"),Df=_f("dragVertical");function Rf(t){let e=!1;if("y"===t)e=Df();else if("x"===t)e=Pf();else{const t=Pf(),n=Df();t&&n?e=()=>{t(),n()}:(t&&t(),n&&n())}return e}function Mf(){const t=Rf(!0);return!t||(t(),!1)}function Lf(t){return t&&"object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"current")}function Vf(t){return t.max-t.min}function Of(t,e,n,s=.5){t.origin=s,t.originPoint=ap(e.min,e.max,t.origin),t.scale=Vf(n)/Vf(e),t.translate=ap(n.min,n.max,t.origin)-t.originPoint,(t.scale>=.9999&&t.scale<=1.0001||isNaN(t.scale))&&(t.scale=1),(t.translate>=-.01&&t.translate<=.01||isNaN(t.translate))&&(t.translate=0)}function Ff(t,e,n,s){Of(t.x,e.x,n.x,s?s.originX:void 0),Of(t.y,e.y,n.y,s?s.originY:void 0)}function Bf(t,e,n){t.min=n.min+e.min,t.max=t.min+Vf(e)}function Uf(t,e,n){t.min=e.min-n.min,t.max=t.min+Vf(e)}function $f(t,e,n){Uf(t.x,e.x,n.x),Uf(t.y,e.y,n.y)}function qf(t,e,n){return{min:void 0!==e?t.min+e:void 0,max:void 0!==n?t.max+n-(t.max-t.min):void 0}}function zf(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}const Kf=.35;function Gf(t,e,n){return{min:Hf(t,e),max:Hf(t,n)}}function Hf(t,e){return"number"==typeof t?t:t[e]||0}const Wf=()=>({x:{min:0,max:0},y:{min:0,max:0}});function Qf(t){return[t("x"),t("y")]}function Yf({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function Xf(t){return void 0===t||1===t}function Jf({scale:t,scaleX:e,scaleY:n}){return!Xf(t)||!Xf(e)||!Xf(n)}function Zf(t){return Jf(t)||tg(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function tg(t){return eg(t.x)||eg(t.y)}function eg(t){return t&&"0%"!==t}function ng(t,e,n){return n+e*(t-n)}function sg(t,e,n,s,i){return void 0!==i&&(t=ng(t,i,s)),ng(t,n,s)+e}function ig(t,e=0,n=1,s,i){t.min=sg(t.min,e,n,s,i),t.max=sg(t.max,e,n,s,i)}function rg(t,{x:e,y:n}){ig(t.x,e.translate,e.scale,e.originPoint),ig(t.y,n.translate,n.scale,n.originPoint)}const og=.999999999999,ag=1.0000000000001;function lg(t,e){t.min=t.min+e,t.max=t.max+e}function cg(t,e,n,s,i=.5){ig(t,e,n,ap(t.min,t.max,i),s)}function ug(t,e){cg(t.x,e.x,e.scaleX,e.scale,e.originX),cg(t.y,e.y,e.scaleY,e.scale,e.originY)}function hg(t,e){return Yf(function(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}(t.getBoundingClientRect(),e))}const dg=({current:t})=>t?t.ownerDocument.defaultView:null,mg=new WeakMap;class pg{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=t}start(t,{snapToCursor:e=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:s}=this.getProps();this.panSession=new Sf(t,{onSessionStart:t=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(wf(t,"page").point)},onStart:(t,e)=>{const{drag:n,dragPropagation:s,onDragStart:i}=this.getProps();if(n&&!s&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Rf(n),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Qf((t=>{let e=this.getAxisMotionValue(t).get()||0;if(wd.test(e)){const{projection:n}=this.visualElement;if(n&&n.layout){const s=n.layout.layoutBox[t];if(s){e=Vf(s)*(parseFloat(e)/100)}}}this.originPoint[t]=e})),i&&qh.postRender((()=>i(t,e))),ef(this.visualElement,"transform");const{animationState:r}=this.visualElement;r&&r.setActive("whileDrag",!0)},onMove:(t,e)=>{const{dragPropagation:n,dragDirectionLock:s,onDirectionLock:i,onDrag:r}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:o}=e;if(s&&null===this.currentDirection)return this.currentDirection=function(t,e=10){let n=null;Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x");return n}(o),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",e.point,o),this.updateAxis("y",e.point,o),this.visualElement.render(),r&&r(t,e)},onSessionEnd:(t,e)=>this.stop(t,e),resumeAnimation:()=>Qf((t=>{var e;return"paused"===this.getAnimationState(t)&&(null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.play())}))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:s,contextWindow:dg(this.visualElement)})}stop(t,e){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=e;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&qh.postRender((()=>i(t,e)))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:s}=this.getProps();if(!n||!fg(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let r=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(r=function(t,{min:e,max:n},s){return void 0!==e&&t<e?t=s?ap(e,t,s.min):Math.max(t,e):void 0!==n&&t>n&&(t=s?ap(n,t,s.max):Math.min(t,n)),t}(r,this.constraints[t],this.elastic[t])),i.set(r)}resolveConstraints(){var t;const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(t=this.visualElement.projection)||void 0===t?void 0:t.layout,i=this.constraints;e&&Lf(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!e||!s)&&function(t,{top:e,left:n,bottom:s,right:i}){return{x:qf(t.x,n,i),y:qf(t.y,e,s)}}(s.layoutBox,e),this.elastic=function(t=Kf){return!1===t?t=0:!0===t&&(t=Kf),{x:Gf(t,"left","right"),y:Gf(t,"top","bottom")}}(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Qf((t=>{!1!==this.constraints&&this.getAxisMotionValue(t)&&(this.constraints[t]=function(t,e){const n={};return void 0!==e.min&&(n.min=e.min-t.min),void 0!==e.max&&(n.max=e.max-t.min),n}(s.layoutBox[t],this.constraints[t]))}))}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Lf(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=function(t,e,n){const s=hg(t,n),{scroll:i}=e;return i&&(lg(s.x,i.offset.x),lg(s.y,i.offset.y)),s}(n,s.root,this.visualElement.getTransformPagePoint());let r=function(t,e){return{x:zf(t.x,e.x),y:zf(t.y,e.y)}}(s.layout.layoutBox,i);if(e){const t=e(function({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}(r));this.hasMutatedConstraints=!!t,t&&(r=Yf(t))}return r}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:r,onDragTransitionEnd:o}=this.getProps(),a=this.constraints||{},l=Qf((o=>{if(!fg(o,e,this.currentDirection))return;let l=a&&a[o]||{};r&&(l={min:0,max:0});const c=s?200:1e6,u=s?40:1e7,h={type:"inertia",velocity:n?t[o]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(o,h)}));return Promise.all(l).then(o)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return ef(this.visualElement,t),n.start(zp(t,n,0,e,this.visualElement,!1))}stopAnimation(){Qf((t=>this.getAxisMotionValue(t).stop()))}pauseAnimation(){Qf((t=>{var e;return null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.pause()}))}getAnimationState(t){var e;return null===(e=this.getAxisMotionValue(t).animation)||void 0===e?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[e];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Qf((e=>{const{drag:n}=this.getProps();if(!fg(e,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(e);if(s&&s.layout){const{min:n,max:r}=s.layout.layoutBox[e];i.set(t[e]-ap(n,r,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!Lf(e)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Qf((t=>{const e=this.getAxisMotionValue(t);if(e&&!1!==this.constraints){const n=e.get();s[t]=function(t,e){let n=.5;const s=Vf(t),i=Vf(e);return i>s?n=Nm(e.min,e.max-s,t.min):s>i&&(n=Nm(t.min,t.max-i,e.min)),pd(0,1,n)}({min:n,max:n},this.constraints[t])}}));const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Qf((e=>{if(!fg(e,t,null))return;const n=this.getAxisMotionValue(e),{min:i,max:r}=this.constraints[e];n.set(ap(i,r,s[e]))}))}addListeners(){if(!this.visualElement.current)return;mg.set(this.visualElement,this);const t=Tf(this.visualElement.current,"pointerdown",(t=>{const{drag:e,dragListener:n=!0}=this.getProps();e&&n&&this.start(t)})),e=()=>{const{dragConstraints:t}=this.getProps();Lf(t)&&t.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,s=n.addEventListener("measure",e);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),qh.read(e);const i=bf(window,"resize",(()=>this.scalePositionWithinConstraints())),r=n.addEventListener("didUpdate",(({delta:t,hasLayoutChanged:e})=>{this.isDragging&&e&&(Qf((e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))})),this.visualElement.render())}));return()=>{i(),t(),s(),r&&r()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:r=Kf,dragMomentum:o=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:r,dragMomentum:o}}}function fg(t,e,n){return!(!0!==e&&e!==t||null!==n&&n!==t)}const gg=t=>(e,n)=>{t&&qh.postRender((()=>t(e,n)))};const yg=t.createContext(null);const vg=t.createContext({}),xg=t.createContext({}),wg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function bg(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Tg={correct:(t,e)=>{if(!e.target)return t;if("string"==typeof t){if(!bd.test(t))return t;t=parseFloat(t)}return`${bg(t,e.target.x)}% ${bg(t,e.target.y)}%`}},Eg={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,i=rm.parse(t);if(i.length>5)return s;const r=rm.createTransformer(t),o="number"!=typeof i[0]?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=ap(a,l,.5);return"number"==typeof i[2+o]&&(i[2+o]/=c),"number"==typeof i[3+o]&&(i[3+o]/=c),r(i)}},Sg={};const{schedule:Ng,cancel:jg}=$h(queueMicrotask,!1);class Cg extends t.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=t;var r;r=kg,Object.assign(Sg,r),i&&(e.group&&e.group.add(i),n&&n.register&&s&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",(()=>{this.safeToRemove()})),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),wg.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:s,isPresent:i}=this.props,r=n.projection;return r?(r.isPresent=i,s||t.layoutDependency!==e||void 0===e?r.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?r.promote():r.relegate()||qh.postRender((()=>{const t=r.getStack();t&&t.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Ng.postRender((()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Ag(e){const[n,s]=function(){const e=t.useContext(yg);if(null===e)return[!0,null];const{isPresent:n,onExitComplete:s,register:i}=e,r=t.useId();t.useEffect((()=>i(r)),[]);const o=t.useCallback((()=>s&&s(r)),[r,s]);return!n&&s?[!1,o]:[!0]}(),i=t.useContext(vg);return Q.jsx(Cg,{...e,layoutGroup:i,switchLayoutGroup:t.useContext(xg),isPresent:n,safeToRemove:s})}const kg={borderRadius:{...Tg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Tg,borderTopRightRadius:Tg,borderBottomLeftRadius:Tg,borderBottomRightRadius:Tg,boxShadow:Eg},Ig=["TopLeft","TopRight","BottomLeft","BottomRight"],_g=Ig.length,Pg=t=>"string"==typeof t?parseFloat(t):t,Dg=t=>"number"==typeof t||bd.test(t);function Rg(t,e){return void 0!==t[e]?t[e]:t.borderRadius}const Mg=Vg(0,.5,nd),Lg=Vg(.5,.95,Bh);function Vg(t,e,n){return s=>s<t?0:s>e?1:n(Nm(t,e,s))}function Og(t,e){t.min=e.min,t.max=e.max}function Fg(t,e){Og(t.x,e.x),Og(t.y,e.y)}function Bg(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Ug(t,e,n,s,i){return t=ng(t-=e,1/n,s),void 0!==i&&(t=ng(t,1/i,s)),t}function $g(t,e,[n,s,i],r,o){!function(t,e=0,n=1,s=.5,i,r=t,o=t){wd.test(e)&&(e=parseFloat(e),e=ap(o.min,o.max,e/100)-o.min);if("number"!=typeof e)return;let a=ap(r.min,r.max,s);t===r&&(a-=e),t.min=Ug(t.min,e,n,a,i),t.max=Ug(t.max,e,n,a,i)}(t,e[n],e[s],e[i],e.scale,r,o)}const qg=["x","scaleX","originX"],zg=["y","scaleY","originY"];function Kg(t,e,n,s){$g(t.x,e,qg,n?n.x:void 0,s?s.x:void 0),$g(t.y,e,zg,n?n.y:void 0,s?s.y:void 0)}function Gg(t){return 0===t.translate&&1===t.scale}function Hg(t){return Gg(t.x)&&Gg(t.y)}function Wg(t,e){return t.min===e.min&&t.max===e.max}function Qg(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Yg(t,e){return Qg(t.x,e.x)&&Qg(t.y,e.y)}function Xg(t){return Vf(t.x)/Vf(t.y)}function Jg(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Zg{constructor(){this.members=[]}add(t){Kp(this.members,t),t.scheduleRender()}remove(t){if(Gp(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(t){const e=this.members.findIndex((e=>t===e));if(0===e)return!1;let n;for(let s=e;s>=0;s--){const t=this.members[s];if(!1!==t.isPresent){n=t;break}}return!!n&&(this.promote(n),!0)}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;!1===s&&n.hide()}}exitAnimationComplete(){this.members.forEach((t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((t=>{t.instance&&t.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const ty=(t,e)=>t.depth-e.depth;class ey{constructor(){this.children=[],this.isDirty=!1}add(t){Kp(this.children,t),this.isDirty=!0}remove(t){Gp(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(ty),this.isDirty=!1,this.children.forEach(t)}}function ny(t){const e=tf(t)?t.get():t;return n=e,Boolean(n&&"object"==typeof n&&n.mix&&n.toValue)?e.toValue():e;var n}const sy={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},iy="undefined"!=typeof window&&void 0!==window.MotionDebug,ry=["","X","Y","Z"],oy={visibility:"hidden"};let ay=0;function ly(t,e,n,s){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),s&&(s[t]=0))}function cy(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Zp(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:e,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",qh,!(e||s))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&cy(s)}function uy({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(t={},n=(null==e?void 0:e())){this.id=ay++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,iy&&(sy.totalNodes=sy.resolvedTargetDeltas=sy.recalculatedProjection=0),this.nodes.forEach(my),this.nodes.forEach(wy),this.nodes.forEach(by),this.nodes.forEach(py),iy&&window.MotionDebug.record(sy)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=t,this.root=n?n.root||n:this,this.path=n?[...n.path,n]:[],this.parent=n,this.depth=n?n.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new ey)}addEventListener(t,e){return this.eventHandlers.has(t)||this.eventHandlers.set(t,new Hp),this.eventHandlers.get(t).add(e)}notifyListeners(t,...e){const n=this.eventHandlers.get(t);n&&n.notify(...e)}hasListeners(t){return this.eventHandlers.has(t)}mount(e,n=this.root.hasTreeAnimated){if(this.instance)return;var s;this.isSVG=(s=e)instanceof SVGElement&&"svg"!==s.tagName,this.instance=e;const{layoutId:i,layout:r,visualElement:o}=this.options;if(o&&!o.current&&o.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(r||i)&&(this.isLayoutDirty=!0),t){let n;const s=()=>this.root.updateBlockedByResize=!1;t(e,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(t,e){const n=Tm.now(),s=({timestamp:i})=>{const r=i-n;r>=e&&(zh(s),t(r-e))};return qh.read(s,!0),()=>zh(s)}(s,250),wg.hasAnimatedSinceResize&&(wg.hasAnimatedSinceResize=!1,this.nodes.forEach(xy))}))}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&o&&(i||r)&&this.addEventListener("didUpdate",(({delta:t,hasLayoutChanged:e,hasRelativeTargetChanged:n,layout:s})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||o.getDefaultTransition()||Cy,{onLayoutAnimationStart:r,onLayoutAnimationComplete:a}=o.getProps(),l=!this.targetLayout||!Yg(this.targetLayout,s)||n,c=!e&&n;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||c||e&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,c);const e={...Lh(i,"layout"),onPlay:r,onComplete:a};(o.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else e||xy(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=s}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const t=this.getStack();t&&t.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,zh(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ty),this.animationId++)}getTransformTemplate(){const{visualElement:t}=this.options;return t&&t.getProps().transformTemplate}willUpdate(t=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cy(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const t=this.path[i];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}const{layoutId:e,layout:n}=this.options;if(void 0===e&&!n)return;const s=this.getTransformTemplate();this.prevTransformTemplateValue=s?s(this.latestValues,""):void 0,this.updateSnapshot(),t&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(gy);this.isUpdating||this.nodes.forEach(yy),this.isUpdating=!1,this.nodes.forEach(vy),this.nodes.forEach(hy),this.nodes.forEach(dy),this.clearAllSnapshots();const t=Tm.now();Kh.delta=pd(0,1e3/60,t-Kh.timestamp),Kh.timestamp=t,Kh.isProcessing=!0,Gh.update.process(Kh),Gh.preRender.process(Kh),Gh.render.process(Kh),Kh.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ng.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(fy),this.sharedNodes.forEach(Ey)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,qh.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){qh.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const t=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:e}=this.options;e&&e.notify("LayoutMeasure",this.layout.layoutBox,t?t.layoutBox:void 0)}updateScroll(t="measure"){let e=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===t&&(e=!1),e){const e=s(this.instance);this.scroll={animationId:this.root.animationId,phase:t,isRoot:e,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:e}}}resetTransform(){if(!i)return;const t=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,e=this.projectionDelta&&!Hg(this.projectionDelta),n=this.getTransformTemplate(),s=n?n(this.latestValues,""):void 0,r=s!==this.prevTransformTemplateValue;t&&(e||Zf(this.latestValues)||r)&&(i(this.instance,s),this.shouldResetTransform=!1,this.scheduleRender())}measure(t=!0){const e=this.measurePageBox();let n=this.removeElementScroll(e);var s;return t&&(n=this.removeTransform(n)),Iy((s=n).x),Iy(s.y),{animationId:this.root.animationId,measuredBox:e,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var t;const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const n=e.measureViewportBox();if(!((null===(t=this.scroll)||void 0===t?void 0:t.wasRoot)||this.path.some(Py))){const{scroll:t}=this.root;t&&(lg(n.x,t.offset.x),lg(n.y,t.offset.y))}return n}removeElementScroll(t){var e;const n={x:{min:0,max:0},y:{min:0,max:0}};if(Fg(n,t),null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)return n;for(let s=0;s<this.path.length;s++){const e=this.path[s],{scroll:i,options:r}=e;e!==this.root&&i&&r.layoutScroll&&(i.wasRoot&&Fg(n,t),lg(n.x,i.offset.x),lg(n.y,i.offset.y))}return n}applyTransform(t,e=!1){const n={x:{min:0,max:0},y:{min:0,max:0}};Fg(n,t);for(let s=0;s<this.path.length;s++){const t=this.path[s];!e&&t.options.layoutScroll&&t.scroll&&t!==t.root&&ug(n,{x:-t.scroll.offset.x,y:-t.scroll.offset.y}),Zf(t.latestValues)&&ug(n,t.latestValues)}return Zf(this.latestValues)&&ug(n,this.latestValues),n}removeTransform(t){const e={x:{min:0,max:0},y:{min:0,max:0}};Fg(e,t);for(let n=0;n<this.path.length;n++){const t=this.path[n];if(!t.instance)continue;if(!Zf(t.latestValues))continue;Jf(t.latestValues)&&t.updateSnapshot();const s={x:{min:0,max:0},y:{min:0,max:0}};Fg(s,t.measurePageBox()),Kg(e,t.latestValues,t.snapshot?t.snapshot.layoutBox:void 0,s)}return Zf(this.latestValues)&&Kg(e,this.latestValues),e}setTargetDelta(t){this.targetDelta=t,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(t){this.options={...this.options,...t,crossfade:void 0===t.crossfade||t.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Kh.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(t=!1){var e;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const s=Boolean(this.resumingFrom)||this!==n;if(!(t||s&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:i,layoutId:r}=this.options;if(this.layout&&(i||r)){if(this.resolvedRelativeTargetAt=Kh.timestamp,!this.targetDelta&&!this.relativeTarget){const t=this.getClosestProjectingParent();t&&t.layout&&1!==this.animationProgress?(this.relativeParent=t,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},$f(this.relativeTargetOrigin,this.layout.layoutBox,t.layout.layoutBox),Fg(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var o,a,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o=this.target,a=this.relativeTarget,l=this.relativeParent.target,Bf(o.x,a.x,l.x),Bf(o.y,a.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Fg(this.target,this.layout.layoutBox),rg(this.target,this.targetDelta)):Fg(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const t=this.getClosestProjectingParent();t&&Boolean(t.resumingFrom)===Boolean(this.resumingFrom)&&!t.options.layoutScroll&&t.target&&1!==this.animationProgress?(this.relativeParent=t,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},$f(this.relativeTargetOrigin,this.target,t.target),Fg(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}iy&&sy.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Jf(this.parent.latestValues)&&!tg(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var t;const e=this.getLead(),n=Boolean(this.resumingFrom)||this!==e;let s=!0;if((this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty))&&(s=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(s=!1),this.resolvedRelativeTargetAt===Kh.timestamp&&(s=!1),s)return;const{layout:i,layoutId:r}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!i&&!r)return;Fg(this.layoutCorrected,this.layout.layoutBox);const o=this.treeScale.x,a=this.treeScale.y;!function(t,e,n,s=!1){const i=n.length;if(!i)return;let r,o;e.x=e.y=1;for(let a=0;a<i;a++){r=n[a],o=r.projectionDelta;const{visualElement:i}=r.options;i&&i.props.style&&"contents"===i.props.style.display||(s&&r.options.layoutScroll&&r.scroll&&r!==r.root&&ug(t,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,rg(t,o)),s&&Zf(r.latestValues)&&ug(t,r.latestValues))}e.x<ag&&e.x>og&&(e.x=1),e.y<ag&&e.y>og&&(e.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!e.layout||e.target||1===this.treeScale.x&&1===this.treeScale.y||(e.target=e.layout.layoutBox,e.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=e;l?(this.projectionDelta&&this.prevProjectionDelta?(Bg(this.prevProjectionDelta.x,this.projectionDelta.x),Bg(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),Ff(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===o&&this.treeScale.y===a&&Jg(this.projectionDelta.x,this.prevProjectionDelta.x)&&Jg(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),iy&&sy.recalculatedProjection++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(t=!0){var e;if(null===(e=this.options.visualElement)||void 0===e||e.scheduleRender(),t){const t=this.getStack();t&&t.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(t,e=!1){const n=this.snapshot,s=n?n.latestValues:{},i={...this.latestValues},r={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!e;const o={x:{min:0,max:0},y:{min:0,max:0}},a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(a&&!c&&!0===this.options.crossfade&&!this.path.some(jy));let h;this.animationProgress=0,this.mixTargetDelta=e=>{const n=e/1e3;var l,d,m,p,f,g;Sy(r.x,t.x,n),Sy(r.y,t.y,n),this.setTargetDelta(r),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&($f(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),m=this.relativeTarget,p=this.relativeTargetOrigin,f=o,g=n,Ny(m.x,p.x,f.x,g),Ny(m.y,p.y,f.y,g),h&&(l=this.relativeTarget,d=h,Wg(l.x,d.x)&&Wg(l.y,d.y))&&(this.isProjectionDirty=!1),h||(h={x:{min:0,max:0},y:{min:0,max:0}}),Fg(h,this.relativeTarget)),a&&(this.animationValues=i,function(t,e,n,s,i,r){i?(t.opacity=ap(0,void 0!==n.opacity?n.opacity:1,Mg(s)),t.opacityExit=ap(void 0!==e.opacity?e.opacity:1,0,Lg(s))):r&&(t.opacity=ap(void 0!==e.opacity?e.opacity:1,void 0!==n.opacity?n.opacity:1,s));for(let o=0;o<_g;o++){const i=`border${Ig[o]}Radius`;let r=Rg(e,i),a=Rg(n,i);void 0===r&&void 0===a||(r||(r=0),a||(a=0),0===r||0===a||Dg(r)===Dg(a)?(t[i]=Math.max(ap(Pg(r),Pg(a),s),0),(wd.test(a)||wd.test(r))&&(t[i]+="%")):t[i]=a)}(e.rotate||n.rotate)&&(t.rotate=ap(e.rotate||0,n.rotate||0,s))}(i,s,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(t){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(zh(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=qh.update((()=>{wg.hasAnimatedSinceResize=!0,this.currentAnimation=function(t,e,n){const s=tf(t)?t:Qp(t);return s.start(zp("",s,e,n)),s.animation}(0,1e3,{...t,onUpdate:e=>{this.mixTargetDelta(e),t.onUpdate&&t.onUpdate(e)},onComplete:()=>{t.onComplete&&t.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const t=this.getStack();t&&t.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const t=this.getLead();let{targetWithTransforms:e,target:n,layout:s,latestValues:i}=t;if(e&&n&&s){if(this!==t&&this.layout&&s&&_y(this.options.animationType,this.layout.layoutBox,s.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const e=Vf(this.layout.layoutBox.x);n.x.min=t.target.x.min,n.x.max=n.x.min+e;const s=Vf(this.layout.layoutBox.y);n.y.min=t.target.y.min,n.y.max=n.y.min+s}Fg(e,n),ug(e,i),Ff(this.projectionDeltaWithTransform,this.layoutCorrected,e,i)}}registerSharedNode(t,e){this.sharedNodes.has(t)||this.sharedNodes.set(t,new Zg);this.sharedNodes.get(t).add(e);const n=e.options.initialPromotionConfig;e.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(e):void 0})}isLead(){const t=this.getStack();return!t||t.lead===this}getLead(){var t;const{layoutId:e}=this.options;return e&&(null===(t=this.getStack())||void 0===t?void 0:t.lead)||this}getPrevLead(){var t;const{layoutId:e}=this.options;return e?null===(t=this.getStack())||void 0===t?void 0:t.prevLead:void 0}getStack(){const{layoutId:t}=this.options;if(t)return this.root.sharedNodes.get(t)}promote({needsReset:t,transition:e,preserveFollowOpacity:n}={}){const s=this.getStack();s&&s.promote(this,n),t&&(this.projectionDelta=void 0,this.needsReset=!0),e&&this.setOptions({transition:e})}relegate(){const t=this.getStack();return!!t&&t.relegate(this)}resetSkewAndRotation(){const{visualElement:t}=this.options;if(!t)return;let e=!1;const{latestValues:n}=t;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(e=!0),!e)return;const s={};n.z&&ly("z",t,s,this.animationValues);for(let i=0;i<ry.length;i++)ly(`rotate${ry[i]}`,t,s,this.animationValues),ly(`skew${ry[i]}`,t,s,this.animationValues);t.render();for(const i in s)t.setStaticValue(i,s[i]),this.animationValues&&(this.animationValues[i]=s[i]);t.scheduleRender()}getProjectionStyles(t){var e,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return oy;const s={visibility:""},i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,s.opacity="",s.pointerEvents=ny(null==t?void 0:t.pointerEvents)||"",s.transform=i?i(this.latestValues,""):"none",s;const r=this.getLead();if(!this.projectionDelta||!this.layout||!r.target){const e={};return this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=ny(null==t?void 0:t.pointerEvents)||""),this.hasProjected&&!Zf(this.latestValues)&&(e.transform=i?i({},""):"none",this.hasProjected=!1),e}const o=r.animationValues||r.latestValues;this.applyTransformsToTarget(),s.transform=function(t,e,n){let s="";const i=t.x.translate/e.x,r=t.y.translate/e.y,o=(null==n?void 0:n.z)||0;if((i||r||o)&&(s=`translate3d(${i}px, ${r}px, ${o}px) `),1===e.x&&1===e.y||(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:t,rotate:e,rotateX:i,rotateY:r,skewX:o,skewY:a}=n;t&&(s=`perspective(${t}px) ${s}`),e&&(s+=`rotate(${e}deg) `),i&&(s+=`rotateX(${i}deg) `),r&&(s+=`rotateY(${r}deg) `),o&&(s+=`skewX(${o}deg) `),a&&(s+=`skewY(${a}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return 1===a&&1===l||(s+=`scale(${a}, ${l})`),s||"none"}(this.projectionDeltaWithTransform,this.treeScale,o),i&&(s.transform=i(o,s.transform));const{x:a,y:l}=this.projectionDelta;s.transformOrigin=`${100*a.origin}% ${100*l.origin}% 0`,r.animationValues?s.opacity=r===this?null!==(n=null!==(e=o.opacity)&&void 0!==e?e:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:o.opacityExit:s.opacity=r===this?void 0!==o.opacity?o.opacity:"":void 0!==o.opacityExit?o.opacityExit:0;for(const c in Sg){if(void 0===o[c])continue;const{correct:t,applyTo:e}=Sg[c],n="none"===s.transform?o[c]:t(o[c],r);if(e){const t=e.length;for(let i=0;i<t;i++)s[e[i]]=n}else s[c]=n}return this.options.layoutId&&(s.pointerEvents=r===this?ny(null==t?void 0:t.pointerEvents)||"":"none"),s}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((t=>{var e;return null===(e=t.currentAnimation)||void 0===e?void 0:e.stop()})),this.root.nodes.forEach(gy),this.root.sharedNodes.clear()}}}function hy(t){t.updateLayout()}function dy(t){var e;const n=(null===(e=t.resumeFrom)||void 0===e?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:s}=t.layout,{animationType:i}=t.options,r=n.source!==t.layout.source;"size"===i?Qf((t=>{const s=r?n.measuredBox[t]:n.layoutBox[t],i=Vf(s);s.min=e[t].min,s.max=s.min+i})):_y(i,n.layoutBox,e)&&Qf((s=>{const i=r?n.measuredBox[s]:n.layoutBox[s],o=Vf(e[s]);i.max=i.min+o,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[s].max=t.relativeTarget[s].min+o)}));const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Ff(o,e,n.layoutBox);const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};r?Ff(a,t.applyTransform(s,!0),n.measuredBox):Ff(a,e,n.layoutBox);const l=!Hg(o);let c=!1;if(!t.resumeFrom){const s=t.getClosestProjectingParent();if(s&&!s.resumeFrom){const{snapshot:i,layout:r}=s;if(i&&r){const o={x:{min:0,max:0},y:{min:0,max:0}};$f(o,n.layoutBox,i.layoutBox);const a={x:{min:0,max:0},y:{min:0,max:0}};$f(a,e,r.layoutBox),Yg(o,a)||(c=!0),s.options.layoutRoot&&(t.relativeTarget=a,t.relativeTargetOrigin=o,t.relativeParent=s)}}}t.notifyListeners("didUpdate",{layout:e,snapshot:n,delta:a,layoutDelta:o,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(t.isLead()){const{onExitComplete:e}=t.options;e&&e()}t.options.transition=void 0}function my(t){iy&&sy.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=Boolean(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function py(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function fy(t){t.clearSnapshot()}function gy(t){t.clearMeasurements()}function yy(t){t.isLayoutDirty=!1}function vy(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function xy(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function wy(t){t.resolveTargetDelta()}function by(t){t.calcProjection()}function Ty(t){t.resetSkewAndRotation()}function Ey(t){t.removeLeadSnapshot()}function Sy(t,e,n){t.translate=ap(e.translate,0,n),t.scale=ap(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Ny(t,e,n,s){t.min=ap(e.min,n.min,s),t.max=ap(e.max,n.max,s)}function jy(t){return t.animationValues&&void 0!==t.animationValues.opacityExit}const Cy={duration:.45,ease:[.4,0,.1,1]},Ay=t=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),ky=Ay("applewebkit/")&&!Ay("chrome/")?Math.round:Bh;function Iy(t){t.min=ky(t.min),t.max=ky(t.max)}function _y(t,e,n){return"position"===t||"preserve-aspect"===t&&(s=Xg(e),i=Xg(n),r=.2,!(Math.abs(s-i)<=r));var s,i,r}function Py(t){var e;return t!==t.root&&(null===(e=t.scroll)||void 0===e?void 0:e.wasRoot)}const Dy=uy({attachResizeListener:(t,e)=>bf(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ry={current:void 0},My=uy({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ry.current){const t=new Dy({});t.mount(window),t.setOptions({layoutScroll:!0}),Ry.current=t}return Ry.current},resetTransform:(t,e)=>{t.style.transform=void 0!==e?e:"none"},checkIsScrollRoot:t=>Boolean("fixed"===window.getComputedStyle(t).position)}),Ly={pan:{Feature:class extends gf{constructor(){super(...arguments),this.removePointerDownListener=Bh}onPointerDown(t){this.session=new Sf(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:dg(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:gg(t),onStart:gg(e),onMove:n,onEnd:(t,e)=>{delete this.session,s&&qh.postRender((()=>s(t,e)))}}}mount(){this.removePointerDownListener=Tf(this.node.current,"pointerdown",(t=>this.onPointerDown(t)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends gf{constructor(t){super(t),this.removeGroupControls=Bh,this.removeListeners=Bh,this.controls=new pg(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Bh}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:My,MeasureLayout:Ag}};function Vy(t,e){const n=e?"pointerenter":"pointerleave",s=e?"onHoverStart":"onHoverEnd";return Tf(t.current,n,((n,i)=>{if("touch"===n.pointerType||Mf())return;const r=t.getProps();t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",e);const o=r[s];o&&qh.postRender((()=>o(n,i)))}),{passive:!t.getProps()[s]})}const Oy=(t,e)=>!!e&&(t===e||Oy(t,e.parentElement));function Fy(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,wf(n))}const By=new WeakMap,Uy=new WeakMap,$y=t=>{const e=By.get(t.target);e&&e(t)},qy=t=>{t.forEach($y)};function zy(t,e,n){const s=function({root:t,...e}){const n=t||document;Uy.has(n)||Uy.set(n,{});const s=Uy.get(n),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(qy,{root:t,...e})),s[i]}(e);return By.set(t,n),s.observe(t),()=>{By.delete(t),s.unobserve(t)}}const Ky={some:0,all:1};const Gy={inView:{Feature:class extends gf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:s="some",once:i}=t,r={root:e?e.current:void 0,rootMargin:n,threshold:"number"==typeof s?s:Ky[s]};return zy(this.node.current,r,(t=>{const{isIntersecting:e}=t;if(this.isInView===e)return;if(this.isInView=e,i&&!e&&this.hasEnteredView)return;e&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",e);const{onViewportEnter:n,onViewportLeave:s}=this.node.getProps(),r=e?n:s;r&&r(t)}))}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(function({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}(t,e))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends gf{constructor(){super(...arguments),this.removeStartListeners=Bh,this.removeEndListeners=Bh,this.removeAccessibleListeners=Bh,this.startPointerPress=(t,e)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),s=Tf(window,"pointerup",((t,e)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:s,globalTapTarget:i}=this.node.getProps(),r=i||Oy(this.node.current,t.target)?n:s;r&&qh.update((()=>r(t,e)))}),{passive:!(n.onTap||n.onPointerUp)}),i=Tf(window,"pointercancel",((t,e)=>this.cancelPress(t,e)),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=op(s,i),this.startPress(t,e)},this.startAccessiblePress=()=>{const t=bf(this.node.current,"keydown",(t=>{if("Enter"!==t.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=bf(this.node.current,"keyup",(t=>{"Enter"===t.key&&this.checkPressEnd()&&Fy("up",((t,e)=>{const{onTap:n}=this.node.getProps();n&&qh.postRender((()=>n(t,e)))}))})),Fy("down",((t,e)=>{this.startPress(t,e)}))})),e=bf(this.node.current,"blur",(()=>{this.isPressing&&Fy("cancel",((t,e)=>this.cancelPress(t,e)))}));this.removeAccessibleListeners=op(t,e)}}startPress(t,e){this.isPressing=!0;const{onTapStart:n,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&qh.postRender((()=>n(t,e)))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Mf()}cancelPress(t,e){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&qh.postRender((()=>n(t,e)))}mount(){const t=this.node.getProps(),e=Tf(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=bf(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=op(e,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends gf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch(e){t=!0}t&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=op(bf(this.node.current,"focus",(()=>this.onFocus())),bf(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends gf{mount(){this.unmount=op(Vy(this.node,!0),Vy(this.node,!1))}unmount(){}}}},Hy={layout:{ProjectionNode:My,MeasureLayout:Ag}},Wy=t.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Qy=t.createContext({}),Yy="undefined"!=typeof window,Xy=Yy?t.useLayoutEffect:t.useEffect,Jy=t.createContext({strict:!1});function Zy(e,n,s,i,r){var o,a;const{visualElement:l}=t.useContext(Qy),c=t.useContext(Jy),u=t.useContext(yg),h=t.useContext(Wy).reducedMotion,d=t.useRef();i=i||c.renderer,!d.current&&i&&(d.current=i(e,{visualState:n,parent:l,props:s,presenceContext:u,blockInitialAnimation:!!u&&!1===u.initial,reducedMotionConfig:h}));const m=d.current,p=t.useContext(xg);!m||m.projection||!r||"html"!==m.type&&"svg"!==m.type||function(t,e,n,s){const{layoutId:i,layout:r,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:tv(t.parent)),t.projection.setOptions({layoutId:i,layout:r,alwaysMeasureLayout:Boolean(o)||a&&Lf(a),visualElement:t,animationType:"string"==typeof r?r:"both",initialPromotionConfig:s,layoutScroll:l,layoutRoot:c})}(d.current,s,r,p);const f=t.useRef(!1);t.useInsertionEffect((()=>{m&&f.current&&m.update(s,u)}));const g=s[Jp],y=t.useRef(Boolean(g)&&!(null===(o=window.MotionHandoffIsComplete)||void 0===o?void 0:o.call(window,g))&&(null===(a=window.MotionHasOptimisedAnimation)||void 0===a?void 0:a.call(window,g)));return Xy((()=>{m&&(f.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),Ng.render(m.render),y.current&&m.animationState&&m.animationState.animateChanges())})),t.useEffect((()=>{m&&(!y.current&&m.animationState&&m.animationState.animateChanges(),y.current&&(queueMicrotask((()=>{var t;null===(t=window.MotionHandoffMarkAsComplete)||void 0===t||t.call(window,g)})),y.current=!1))})),m}function tv(t){if(t)return!1!==t.options.allowProjection?t.projection:tv(t.parent)}function ev(e,n,s){return t.useCallback((t=>{t&&e.mount&&e.mount(t),n&&(t?n.mount(t):n.unmount()),s&&("function"==typeof s?s(t):Lf(s)&&(s.current=t))}),[n])}function nv(t){return xh(t.animate)||Ch.some((e=>Th(t[e])))}function sv(t){return Boolean(nv(t)||t.variants)}function iv(e){const{initial:n,animate:s}=function(t,e){if(nv(t)){const{initial:e,animate:n}=t;return{initial:!1===e||Th(e)?e:void 0,animate:Th(n)?n:void 0}}return!1!==t.inherit?e:{}}(e,t.useContext(Qy));return t.useMemo((()=>({initial:n,animate:s})),[rv(n),rv(s)])}function rv(t){return Array.isArray(t)?t.join(" "):t}const ov={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},av={};for(const Nx in ov)av[Nx]={isEnabled:t=>ov[Nx].some((e=>!!t[e]))};const lv=Symbol.for("motionComponentSymbol");function cv({preloadedFeatures:e,createVisualElement:n,useRender:s,useVisualState:i,Component:r}){e&&function(t){for(const e in t)av[e]={...av[e],...t[e]}}(e);const o=t.forwardRef((function(e,o){let a;const l={...t.useContext(Wy),...e,layoutId:uv(e)},{isStatic:c}=l,u=iv(e),h=i(e,c);if(!c&&Yy){t.useContext(Jy).strict;const e=function(t){const{drag:e,layout:n}=av;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:(null==e?void 0:e.isEnabled(t))||(null==n?void 0:n.isEnabled(t))?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}(l);a=e.MeasureLayout,u.visualElement=Zy(r,h,l,n,e.ProjectionNode)}return Q.jsxs(Qy.Provider,{value:u,children:[a&&u.visualElement?Q.jsx(a,{visualElement:u.visualElement,...l}):null,s(r,e,ev(h,u.visualElement,o),h,c,u.visualElement)]})}));return o[lv]=r,o}function uv({layoutId:e}){const n=t.useContext(vg).id;return n&&void 0!==e?n+"-"+e:e}const hv=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function dv(t){return"string"==typeof t&&!t.includes("-")&&!!(hv.indexOf(t)>-1||/[A-Z]/u.test(t))}function mv(t,{style:e,vars:n},s,i){Object.assign(t.style,e,i&&i.getProjectionStyles(s));for(const r in n)t.style.setProperty(r,n[r])}const pv=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function fv(t,e,n,s){mv(t,e,void 0,s);for(const i in e.attrs)t.setAttribute(pv.has(i)?i:Xp(i),e.attrs[i])}function gv(t,{layout:e,layoutId:n}){return kh.has(t)||t.startsWith("origin")||(e||void 0!==n)&&(!!Sg[t]||"opacity"===t)}function yv(t,e,n){var s;const{style:i}=t,r={};for(const o in i)(tf(i[o])||e.style&&tf(e.style[o])||gv(o,t)||void 0!==(null===(s=null==n?void 0:n.getValue(o))||void 0===s?void 0:s.liveStyle))&&(r[o]=i[o]);return r}function vv(t,e,n){const s=yv(t,e,n);for(const i in t)if(tf(t[i])||tf(e[i])){s[-1!==Ah.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=t[i]}return s}const xv=e=>(n,s)=>{const i=t.useContext(Qy),r=t.useContext(yg),o=()=>function({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},s,i,r){const o={latestValues:wv(s,i,r,t),renderState:e()};return n&&(o.mount=t=>n(s,t,o)),o}(e,n,i,r);return s?o():function(e){const n=t.useRef(null);return null===n.current&&(n.current=e()),n.current}(o)};function wv(t,e,n,s){const i={},r=s(t,{});for(const d in r)i[d]=ny(r[d]);let{initial:o,animate:a}=t;const l=nv(t),c=sv(t);e&&c&&!l&&!1!==t.inherit&&(void 0===o&&(o=e.initial),void 0===a&&(a=e.animate));let u=!!n&&!1===n.initial;u=u||!1===o;const h=u?a:o;if(h&&"boolean"!=typeof h&&!xh(h)){const e=Array.isArray(h)?h:[h];for(let n=0;n<e.length;n++){const s=Sh(t,e[n]);if(s){const{transitionEnd:t,transition:e,...n}=s;for(const s in n){let t=n[s];if(Array.isArray(t)){t=t[u?t.length-1:0]}null!==t&&(i[s]=t)}for(const s in t)i[s]=t[s]}}}return i}const bv=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Tv=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),Ev=(t,e)=>e&&"number"==typeof t?e.transform(t):t,Sv={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Nv=Ah.length;function jv(t,e,n){const{style:s,vars:i,transformOrigin:r}=t;let o=!1,a=!1;for(const l in e){const t=e[l];if(kh.has(l))o=!0;else if(ld(l))i[l]=t;else{const e=Ev(t,mm[l]);l.startsWith("origin")?(a=!0,r[l]=e):s[l]=e}}if(e.transform||(o||n?s.transform=function(t,e,n){let s="",i=!0;for(let r=0;r<Nv;r++){const o=Ah[r],a=t[o];if(void 0===a)continue;let l=!0;if(l="number"==typeof a?a===(o.startsWith("scale")?1:0):0===parseFloat(a),!l||n){const t=Ev(a,mm[o]);l||(i=!1,s+=`${Sv[o]||o}(${t}) `),n&&(e[o]=t)}}return s=s.trim(),n?s=n(e,i?"":s):i&&(s="none"),s}(e,t.transform,n):s.transform&&(s.transform="none")),a){const{originX:t="50%",originY:e="50%",originZ:n=0}=r;s.transformOrigin=`${t} ${e} ${n}`}}function Cv(t,e,n){return"string"==typeof t?t:bd.transform(e+n*t)}const Av={offset:"stroke-dashoffset",array:"stroke-dasharray"},kv={offset:"strokeDashoffset",array:"strokeDasharray"};function Iv(t,{attrX:e,attrY:n,attrScale:s,originX:i,originY:r,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,h){if(jv(t,c,h),u)return void(t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox));t.attrs=t.style,t.style={};const{attrs:d,style:m,dimensions:p}=t;d.transform&&(p&&(m.transform=d.transform),delete d.transform),p&&(void 0!==i||void 0!==r||m.transform)&&(m.transformOrigin=function(t,e,n){return`${Cv(e,t.x,t.width)} ${Cv(n,t.y,t.height)}`}(p,void 0!==i?i:.5,void 0!==r?r:.5)),void 0!==e&&(d.x=e),void 0!==n&&(d.y=n),void 0!==s&&(d.scale=s),void 0!==o&&function(t,e,n=1,s=0,i=!0){t.pathLength=1;const r=i?Av:kv;t[r.offset]=bd.transform(-s);const o=bd.transform(e),a=bd.transform(n);t[r.array]=`${o} ${a}`}(d,o,a,l,!1)}const _v=t=>"string"==typeof t&&"svg"===t.toLowerCase(),Pv={useVisualState:xv({scrapeMotionValuesFromProps:vv,createRenderState:Tv,onMount:(t,e,{renderState:n,latestValues:s})=>{qh.read((()=>{try{n.dimensions="function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(t){n.dimensions={x:0,y:0,width:0,height:0}}})),qh.render((()=>{Iv(n,s,_v(e.tagName),t.transformTemplate),fv(e,n)}))}})},Dv={useVisualState:xv({scrapeMotionValuesFromProps:yv,createRenderState:bv})};function Rv(t,e,n){for(const s in e)tf(e[s])||gv(s,n)||(t[s]=e[s])}function Mv(e,n){const s={};return Rv(s,e.style||{},e),Object.assign(s,function({transformTemplate:e},n){return t.useMemo((()=>{const t={style:{},transform:{},transformOrigin:{},vars:{}};return jv(t,n,e),Object.assign({},t.vars,t.style)}),[n])}(e,n)),s}function Lv(t,e){const n={},s=Mv(t,e);return t.drag&&!1!==t.dragListener&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=!0===t.drag?"none":"pan-"+("x"===t.drag?"y":"x")),void 0===t.tabIndex&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const Vv=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ov(t){return t.startsWith("while")||t.startsWith("drag")&&"draggable"!==t||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Vv.has(t)}let Fv=t=>!Ov(t);try{(Bv=require("@emotion/is-prop-valid").default)&&(Fv=t=>t.startsWith("on")?!Ov(t):Bv(t))}catch(Sx){}var Bv;function Uv(e,n,s,i){const r=t.useMemo((()=>{const t={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return Iv(t,n,_v(i),e.transformTemplate),{...t.attrs,style:{...t.style}}}),[n]);if(e.style){const t={};Rv(t,e.style,e),r.style={...t,...r.style}}return r}function $v(e=!1){return(n,s,i,{latestValues:r},o)=>{const a=(dv(n)?Uv:Lv)(s,r,o,n),l=function(t,e,n){const s={};for(const i in t)"values"===i&&"object"==typeof t.values||(Fv(i)||!0===n&&Ov(i)||!e&&!Ov(i)||t.draggable&&i.startsWith("onDrag"))&&(s[i]=t[i]);return s}(s,"string"==typeof n,e),c=n!==t.Fragment?{...l,...a,ref:i}:{},{children:u}=s,h=t.useMemo((()=>tf(u)?u.get():u),[u]);return t.createElement(n,{...c,children:h})}}function qv(t,e){return function(n,{forwardMotionProps:s}={forwardMotionProps:!1}){return cv({...dv(n)?Pv:Dv,preloadedFeatures:t,useRender:$v(s),createVisualElement:e,Component:n})}}const zv={current:null},Kv={current:!1};const Gv=new WeakMap,Hv=[...Dd,Yd,rm],Wv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Qv{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:r},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Bd,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const t=Tm.now();this.renderScheduledAt<t&&(this.renderScheduledAt=t,qh.render(this.render,!1,!0))};const{latestValues:a,renderState:l}=r;this.latestValues=a,this.baseTarget={...a},this.initialValues=e.initial?{...a}:{},this.renderState=l,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=Boolean(i),this.isControllingVariants=nv(e),this.isVariantNode=sv(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(e,{},this);for(const h in u){const t=u[h];void 0!==a[h]&&tf(t)&&t.set(a[h],!1)}}mount(t){this.current=t,Gv.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((t,e)=>this.bindToMotionValue(e,t))),Kv.current||function(){if(Kv.current=!0,Yy)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>zv.current=t.matches;t.addListener(e),e()}else zv.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||zv.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Gv.delete(this.current),this.projection&&this.projection.unmount(),zh(this.notifyUpdate),zh(this.render),this.valueSubscriptions.forEach((t=>t())),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=kh.has(t),s=e.on("change",(e=>{this.latestValues[t]=e,this.props.onUpdate&&qh.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)})),i=e.on("renderRequest",this.scheduleRender);let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,(()=>{s(),i(),r&&r(),e.owner&&e.stop()}))}sortNodePosition(t){return this.current&&this.sortInstanceNodePosition&&this.type===t.type?this.sortInstanceNodePosition(this.current,t.current):0}updateFeatures(){let t="animation";for(t in av){const e=av[t];if(!e)continue;const{isEnabled:n,Feature:s}=e;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const e=this.features[t];e.isMounted?e.update():(e.mount(),e.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<Wv.length;n++){const e=Wv[n];this.propEventSubscriptions[e]&&(this.propEventSubscriptions[e](),delete this.propEventSubscriptions[e]);const s=t["on"+e];s&&(this.propEventSubscriptions[e]=this.on(e,s))}this.prevMotionValues=function(t,e,n){for(const s in e){const i=e[s],r=n[s];if(tf(i))t.addValue(s,i);else if(tf(r))t.addValue(s,Qp(i,{owner:t}));else if(r!==i)if(t.hasValue(s)){const e=t.getValue(s);!0===e.liveStyle?e.jump(i):e.hasAnimated||e.set(i)}else{const e=t.getStaticValue(s);t.addValue(s,Qp(void 0!==e?e:i,{owner:t}))}}for(const s in n)void 0===e[s]&&t.removeValue(s);return e}(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return void 0===n&&void 0!==e&&(n=Qp(null===e?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){var n;let s=void 0===this.latestValues[t]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,t))&&void 0!==n?n:this.readValueFromInstance(this.current,t,this.options):this.latestValues[t];var i;return null!=s&&("string"==typeof s&&(od(s)||id(s))?s=parseFloat(s):(i=s,!Hv.find(Pd(i))&&rm.test(e)&&(s=gm(t,e))),this.setBaseTarget(t,tf(s)?s.get():s)),tf(s)?s.get():s}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var e;const{initial:n}=this.props;let s;if("string"==typeof n||"object"==typeof n){const i=Sh(this.props,n,null===(e=this.presenceContext)||void 0===e?void 0:e.custom);i&&(s=i[t])}if(n&&void 0!==s)return s;const i=this.getBaseTargetFromProps(this.props,t);return void 0===i||tf(i)?void 0!==this.initialValues[t]&&void 0===s?void 0:this.baseTarget[t]:i}on(t,e){return this.events[t]||(this.events[t]=new Hp),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}}class Yv extends Qv{constructor(){super(...arguments),this.KeyframeResolver=vm}sortInstanceNodePosition(t,e){return 2&t.compareDocumentPosition(e)?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}}class Xv extends Yv{constructor(){super(...arguments),this.type="html",this.renderInstance=mv}readValueFromInstance(t,e){if(kh.has(e)){const t=fm(e);return t&&t.default||0}{const s=(n=t,window.getComputedStyle(n)),i=(ld(e)?s.getPropertyValue(e):s[e])||0;return"string"==typeof i?i.trim():i}var n}measureInstanceViewportBox(t,{transformPagePoint:e}){return hg(t,e)}build(t,e,n){jv(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return yv(t,e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;tf(t)&&(this.childSubscription=t.on("change",(t=>{this.current&&(this.current.textContent=`${t}`)})))}}class Jv extends Yv{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Wf}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(kh.has(e)){const t=fm(e);return t&&t.default||0}return e=pv.has(e)?e:Xp(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return vv(t,e,n)}build(t,e,n){Iv(t,e,this.isSVGTag,n.transformTemplate)}renderInstance(t,e,n,s){fv(t,e,0,s)}mount(t){this.isSVGTag=_v(t.tagName),super.mount(t)}}const Zv=vh(qv({...vf,...Gy,...Ly,...Hy},((e,n)=>dv(e)?new Jv(n):new Xv(n,{allowProjection:e!==t.Fragment})))),tx={Building:v,Award:f,Briefcase:x,Building2:p},ex={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.15}}};function nx(){const[e,n]=t.useState([]),[s,r]=t.useState(!0),[o,a]=t.useState(null);return t.useEffect((()=>{!async function(){try{const t=[...await dh()].sort(((t,e)=>t.year-e.year));n(t)}catch(t){a("Unable to load timeline data. Please try again later.")}finally{r(!1)}}()}),[]),s?Q.jsx("div",{className:"py-20",children:Q.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Q.jsx("div",{className:"animate-pulse space-y-8",children:[1,2,3].map((t=>Q.jsx("div",{className:"bg-gray-100 h-48 rounded-xl"},t)))})})}):o?Q.jsx("div",{className:"py-20",children:Q.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[Q.jsx("p",{className:"text-gray-600",children:o}),Q.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Try Again"})]})}):Q.jsx("section",{id:"timeline",className:"py-20",children:Q.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Q.jsxs(Zv.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-12",children:[Q.jsx(Zv.h2,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"font-playfair text-3xl sm:text-4xl lg:text-5xl font-bold mb-4",children:"Professional Journey"}),Q.jsx(Zv.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:"text-gray-600 max-w-2xl mx-auto",children:"A timeline of my architectural career and key milestones"})]}),Q.jsxs(Zv.div,{variants:ex,initial:"hidden",animate:"show",className:"relative",children:[Q.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 h-full w-0.5 bg-gray-200 md:block hidden"}),Q.jsx("div",{className:"space-y-8",children:e.map(((t,e)=>Q.jsxs(Zv.div,{variants:t,className:`relative flex items-center ${e%2==0?"md:justify-start":"md:justify-end"} md:flex-row flex-row`,children:[Q.jsx("div",{className:`md:w-5/12 w-full pl-4 sm:pl-6 md:pl-0 ${e%2==0?"md:pr-8 md:text-right":"md:pl-8 md:text-left"} text-left`,children:Q.jsxs("div",{className:"relative bg-white p-6 rounded-xl shadow-md hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 overflow-hidden group",children:[Q.jsxs("div",{className:"absolute inset-0 opacity-[0.02] group-hover:opacity-[0.04] transition-opacity duration-500",children:[Q.jsx("div",{className:"absolute -right-6 -top-6 w-32 h-32 bg-black rounded-full transform -translate-x-1/2 -translate-y-1/2"}),Q.jsx("div",{className:"absolute right-12 bottom-12 w-40 h-40 bg-black rounded-full transform translate-x-1/2 translate-y-1/2"}),Q.jsx("div",{className:"absolute left-1/2 top-1/2 w-24 h-24 bg-black rounded-full transform -translate-x-1/2 -translate-y-1/2"})]}),Q.jsx("div",{className:"absolute inset-0 opacity-[0.015] group-hover:opacity-[0.03] transition-opacity duration-500",style:{backgroundImage:"linear-gradient(to right, black 1px, transparent 1px),\n                                        linear-gradient(to bottom, black 1px, transparent 1px)",backgroundSize:"20px 20px"}}),Q.jsx("div",{className:`absolute ${e%2==0?"-left-6":"-right-6"} top-1/2 w-12 h-[1px] bg-black opacity-[0.03] group-hover:w-24 group-hover:opacity-[0.06] transition-all duration-700`}),Q.jsx("div",{className:"absolute left-1/2 -bottom-6 h-12 w-[1px] bg-black opacity-[0.03] group-hover:h-24 group-hover:opacity-[0.06] transition-all duration-700 transform -translate-x-1/2"}),Q.jsxs("div",{className:"relative",children:[Q.jsxs("div",{className:`flex items-center gap-3 mb-4 ${e%2==0?"md:justify-end":"md:justify-start"} justify-start`,children:[Q.jsxs("div",{className:`relative p-2 rounded-lg ${t.color.replace("text-","bg-").replace("600","100")} group-hover:scale-110 transition-transform duration-500`,children:[i.createElement(tx[t.icon]||v,{className:`w-5 h-5 ${t.color}`,strokeWidth:2}),Q.jsx("div",{className:"absolute inset-0 rounded-lg bg-black opacity-0 group-hover:opacity-[0.03] transition-opacity duration-500"})]}),Q.jsx("span",{className:`inline-block px-4 py-1.5 rounded-full text-sm font-medium tracking-wide transition-all duration-300 ${t.color.replace("text-","text-opacity-90 hover:text-opacity-100 ")}`,style:{backgroundColor:t.color+"15",textShadow:"0 1px 2px rgba(0,0,0,0.02)"},children:t.year})]}),Q.jsx("h3",{className:"text-xl font-bold mb-3 text-gray-800 tracking-tight group-hover:text-black transition-colors duration-300",children:t.event}),Q.jsx("p",{className:"text-gray-600 leading-relaxed group-hover:text-gray-700 transition-colors duration-300",children:t.description}),t.details&&Q.jsx("p",{className:"text-sm text-gray-500 mt-3 leading-relaxed border-t border-gray-100 pt-3 group-hover:text-gray-600 transition-colors duration-300",children:t.details})]})]})}),Q.jsxs("div",{className:"absolute md:left-1/2 transform -translate-x-1/2 flex items-center justify-center hidden md:flex",children:[Q.jsx("div",{className:"w-4 h-4 rounded-full bg-white border-4 border-gray-200 z-10"}),Q.jsx("div",{className:"absolute w-6 h-6 rounded-full bg-gray-100 animate-pulse"})]})]},e)))})]})]})})}const sx={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},ix={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}};function rx(){const[e,n]=t.useState([]),[i,r]=t.useState(!0),[o,a]=t.useState(null),[l,c]=t.useState("all"),[u,h]=t.useState([]);t.useEffect((()=>{!async function(){try{const t=(await Ju()).filter((t=>t.featured));n(t);const e=Array.from(new Set(t.map((t=>t.category))));h(["all",...e])}catch(t){a("Failed to load projects")}finally{r(!1)}}()}),[]);const m="all"===l?e:e.filter((t=>t.category===l));return i?Q.jsx("div",{className:"py-20 text-center",children:"Loading..."}):o?Q.jsx("div",{className:"py-20 text-center",children:o}):Q.jsx("section",{id:"projects",className:"py-16 sm:py-20 lg:py-24 bg-gray-50",children:Q.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Q.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-12 sm:mb-16",children:[Q.jsx(Zv.h2,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"font-playfair text-3xl sm:text-4xl lg:text-5xl font-bold text-gray-900 mb-4",children:"Featured Projects"}),Q.jsx(Zv.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.2},className:"text-gray-600 text-lg",children:"Explore my portfolio of innovative architectural designs and successful projects"})]}),Q.jsx(Zv.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"flex overflow-x-auto scrollbar-hide -mx-4 px-4 sm:mx-0 sm:px-0 sm:flex-wrap sm:justify-center mb-10 sm:mb-12",children:Q.jsx("div",{className:"flex gap-3 pb-2 sm:pb-0 sm:flex-wrap sm:justify-center",children:u.map((t=>Q.jsx("button",{onClick:()=>c(t),className:"px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap "+(l===t?"bg-black text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:t.charAt(0).toUpperCase()+t.slice(1)},t)))})}),Q.jsx(Zv.div,{variants:sx,initial:"hidden",animate:"show",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8",children:m.map((t=>Q.jsx(Zv.div,{variants:ix,children:Q.jsx(s,{to:`/projects/${t.id}`,className:"group block",children:Q.jsxs("article",{className:"relative bg-white rounded-2xl overflow-hidden transition-all duration-300 shadow-sm hover:shadow-xl",children:[Q.jsxs("div",{className:"relative aspect-[3/4] sm:aspect-[4/3] overflow-hidden",children:[Q.jsx("img",{src:t.coverImage,alt:t.title,loading:"lazy",width:800,height:600,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",onError:t=>{t.target.src="/placeholder-project.jpg"}}),Q.jsx("div",{className:"absolute top-4 left-4",children:Q.jsx("span",{className:"inline-block px-3 py-1.5 bg-white/90 backdrop-blur-sm text-xs font-medium text-gray-900 rounded-full",children:t.category.charAt(0).toUpperCase()+t.category.slice(1)})})]}),Q.jsxs("div",{className:"relative p-5 sm:p-6",children:[Q.jsxs("div",{className:"space-y-2",children:[Q.jsx("h3",{className:"font-playfair text-xl sm:text-2xl font-bold text-gray-900 group-hover:text-black",children:t.title}),Q.jsxs("p",{className:"text-sm text-gray-600",children:[t.location," • ",t.year]})]}),Q.jsx("p",{className:"mt-3 text-gray-600 text-sm line-clamp-2",children:t.description}),Q.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 flex items-center justify-between",children:[Q.jsx("span",{className:"text-sm font-medium text-gray-900",children:"View Project"}),Q.jsx("div",{className:"rounded-full p-2 bg-gray-50 group-hover:bg-gray-100 transition-colors",children:Q.jsx(d,{className:"w-4 h-4 text-gray-900"})})]})]})]})})},t.id)))}),0===m.length&&Q.jsx("div",{className:"text-center py-12",children:Q.jsx("p",{className:"text-gray-600",children:"No projects found in this category."})}),Q.jsx("div",{className:"text-center mt-12",children:Q.jsxs(s,{to:"/projects",className:"inline-flex items-center px-6 py-3 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors",children:["View All Projects",Q.jsx(d,{className:"ml-2 w-5 h-5"})]})})]})})}function ox(){const[e,n]=t.useState([]),[s,i]=t.useState(!0),[r,o]=t.useState(null);return t.useEffect((()=>{!async function(){try{const t=await(async()=>{try{return(await Pc($l(Yu,"testimonials"))).docs.map((t=>({id:t.id,...t.data()})))}catch(r){return[]}})();n(t)}catch(t){o("Failed to load testimonials")}finally{i(!1)}}()}),[]),s?Q.jsx("div",{className:"py-20 text-center",children:Q.jsx("div",{className:"animate-pulse",children:"Loading testimonials..."})}):r?Q.jsxs("div",{className:"py-20 text-center",children:[Q.jsxs("div",{className:"text-red-600",children:["Error: ",r]}),Q.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Retry"})]}):e.length?Q.jsx("section",{id:"testimonials",className:"py-20 bg-white",children:Q.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Q.jsxs("div",{className:"text-center mb-16",children:[Q.jsx("h2",{className:"font-playfair text-3xl sm:text-4xl lg:text-5xl font-bold mb-4",children:"Testimonials"}),Q.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Hear what my clients have to say about their experience working with me"})]}),Q.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map(((t,e)=>Q.jsxs("div",{className:"group relative bg-white p-8 rounded-2xl shadow-[0_8px_30px_rgb(0,0,0,0.04)] \n                       hover:shadow-[0_8px_30px_rgb(0,0,0,0.12)] transition-all duration-300 \n                       hover:-translate-y-1 overflow-hidden",children:[Q.jsx("div",{className:"absolute -right-6 -top-6 pointer-events-none opacity-5 group-hover:opacity-10 transition-opacity",children:Q.jsx(w,{className:"w-32 h-32 transform rotate-12"})}),Q.jsx("div",{className:"absolute -top-4 right-8 z-10",children:Q.jsx("div",{className:"bg-primary w-8 h-8 rounded-lg flex items-center justify-center\n                            transform -rotate-6 group-hover:rotate-0 transition-transform duration-300\n                            shadow-lg",children:Q.jsx(w,{className:"w-5 h-5 text-white"})})}),Q.jsxs("div",{className:"relative",children:[Q.jsxs("div",{className:"relative mb-8",children:[Q.jsx("span",{className:"absolute -left-2 -top-2 text-4xl text-primary opacity-20 font-serif",children:'"'}),Q.jsx("p",{className:"text-gray-700 leading-relaxed font-light italic pl-4 relative z-10",children:t.content}),Q.jsx("span",{className:"absolute -bottom-4 -right-1 text-4xl text-primary opacity-20 font-serif rotate-180",children:'"'})]}),Q.jsxs("div",{className:"flex items-center mt-8 pt-6 border-t border-gray-100",children:[Q.jsx("div",{className:"relative w-14 h-14 flex-shrink-0",children:t.image?Q.jsxs("div",{className:"relative w-full h-full",children:[Q.jsx("img",{src:t.image,alt:t.name,loading:"lazy",width:56,height:56,className:"w-full h-full rounded-full object-cover ring-4 ring-gray-50\n                                   group-hover:ring-primary/10 transition-all duration-300",onError:t=>{t.target.src="/placeholder-avatar.jpg"}}),Q.jsx("div",{className:"absolute inset-0 rounded-full ring-1 ring-black/5"})]}):Q.jsx("div",{className:"w-full h-full rounded-full bg-gray-200 ring-4 ring-gray-50\n                                    group-hover:ring-primary/10 transition-all duration-300"})}),Q.jsxs("div",{className:"ml-4",children:[Q.jsx("h3",{className:"font-semibold text-lg text-gray-900 group-hover:text-primary transition-colors",children:t.name}),Q.jsx("p",{className:"text-gray-500 text-sm group-hover:text-gray-600 transition-colors",children:t.role})]})]})]})]},t.id||e)))})]})}):Q.jsx("div",{className:"py-20 text-center",children:"No testimonials available."})}function ax(){return Q.jsxs(Q.Fragment,{children:[Q.jsx(fh,{}),Q.jsx(yh,{}),Q.jsx(nx,{}),Q.jsx(rx,{}),Q.jsx(ox,{})]})}function lx(){const[e,n]=t.useState(""),[i,r]=t.useState("all"),[o,a]=t.useState([]),[l,c]=t.useState([{id:"all",name:"All Projects"}]),[u,h]=t.useState(!0),[d,m]=t.useState(null);t.useEffect((()=>{!async function(){try{const t=await Ju();a(t);const e=new Set(t.map((t=>t.category))),n=[{id:"all",name:"All Projects"},...Array.from(e).map((t=>({id:t.toLowerCase().replace(/\s+/g,"-"),name:t})))];c(n)}catch(t){m("Failed to load projects")}finally{h(!1)}}()}),[]);const p=o.filter((t=>{const n=t.title.toLowerCase().includes(e.toLowerCase())||t.category.toLowerCase().includes(e.toLowerCase())||t.location.toLowerCase().includes(e.toLowerCase()),s="all"===i||t.category.toLowerCase().replace(/\s+/g,"-")===i;return n&&s}));return u?Q.jsx("div",{className:"min-h-screen flex items-center justify-center",children:Q.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[Q.jsx(b,{className:"w-8 h-8 animate-spin text-gray-700"}),Q.jsx("p",{className:"text-gray-600",children:"Loading projects..."})]})}):d?Q.jsx("div",{className:"min-h-screen flex items-center justify-center",children:Q.jsxs("div",{className:"text-center",children:[Q.jsx("p",{className:"text-red-600 mb-4",children:d}),Q.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-black/80 transition-colors",children:"Try Again"})]})}):Q.jsx("div",{className:"pt-24 pb-20",children:Q.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Q.jsx("h1",{className:"font-playfair text-4xl md:text-5xl font-bold mb-4",children:"My Projects"}),Q.jsx("p",{className:"text-gray-600 text-lg mb-8 max-w-2xl",children:"Explore my portfolio of innovative architectural designs and sustainable solutions"}),Q.jsx("div",{className:"flex flex-wrap gap-4 mb-8",children:l.map((t=>Q.jsx("button",{onClick:()=>r(t.id),className:"px-4 py-2 rounded-full transition-colors "+(i===t.id?"bg-black text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:t.name},t.id)))}),Q.jsxs("div",{className:"relative mb-12",children:[Q.jsx("input",{type:"text",placeholder:"Search projects by name, category, or location...",value:e,onChange:t=>n(t.target.value),className:"w-full p-4 pl-12 rounded-lg border border-gray-200 focus:outline-none focus:ring-2 focus:ring-black/5"}),Q.jsx(T,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"})]}),Q.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:p.length>0?p.map((t=>Q.jsx(s,{to:`/projects/${t.id}`,className:"group block",children:Q.jsxs("div",{className:"relative overflow-hidden rounded-lg shadow-lg",children:[Q.jsx("img",{src:t.coverImage,alt:t.title,className:"w-full h-80 object-cover transform group-hover:scale-110 transition-transform duration-500",onError:t=>{t.target.src="https://via.placeholder.com/800x600?text=Project+Image"}}),Q.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex flex-col justify-end p-6",children:[Q.jsx("div",{className:"bg-black/40 px-3 py-1 rounded-full text-white text-sm inline-block mb-2 self-start",children:t.category}),Q.jsx("h3",{className:"font-playfair text-2xl font-bold text-white mb-2",children:t.title}),Q.jsxs("div",{className:"flex items-center text-white/80 space-x-4",children:[Q.jsxs("div",{className:"flex items-center",children:[Q.jsx(E,{className:"w-4 h-4 mr-1"}),Q.jsx("span",{children:t.location})]}),Q.jsxs("div",{className:"flex items-center",children:[Q.jsx(S,{className:"w-4 h-4 mr-1"}),Q.jsx("span",{children:t.date})]})]})]})]})},t.id))):Q.jsx("div",{className:"col-span-full text-center py-12",children:Q.jsx("p",{className:"text-gray-500 text-lg",children:"No projects found matching your criteria"})})})]})})}function cx({isOpen:e,onClose:n,image:s,title:i,caption:r,onPrevious:o,onNext:a,showNavigation:l=!1,currentIndex:c=0,totalItems:h=0}){const[d,m]=t.useState(1),[p,f]=t.useState(0);t.useEffect((()=>{const t=t=>{if(e)switch(t.key){case"ArrowLeft":null==o||o();break;case"ArrowRight":null==a||a();break;case"Escape":n()}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)}),[e,o,a,n]);const g=()=>{m(1),f(0)};return e?Q.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[Q.jsx("div",{className:"absolute inset-0 bg-black/90",onClick:n}),Q.jsxs("div",{className:"relative w-full max-w-7xl px-4 sm:px-6 lg:px-8",children:[Q.jsx("button",{onClick:n,className:"absolute right-6 top-6 z-10 p-2 text-white/70 hover:text-white bg-black/20 hover:bg-black/40 rounded-full transition-colors",children:Q.jsx(u,{className:"w-6 h-6"})}),Q.jsxs("div",{className:"absolute left-6 top-6 z-10 flex space-x-2",children:[Q.jsx("button",{onClick:()=>{m((t=>Math.min(t+.25,3)))},className:"p-2 text-white/70 hover:text-white bg-black/20 hover:bg-black/40 rounded-full transition-colors",children:Q.jsx(N,{className:"w-6 h-6"})}),Q.jsx("button",{onClick:()=>{m((t=>Math.max(t-.25,.5)))},className:"p-2 text-white/70 hover:text-white bg-black/20 hover:bg-black/40 rounded-full transition-colors",children:Q.jsx(j,{className:"w-6 h-6"})}),Q.jsx("button",{onClick:()=>{f((t=>(t+90)%360))},className:"p-2 text-white/70 hover:text-white bg-black/20 hover:bg-black/40 rounded-full transition-colors",children:Q.jsx(C,{className:"w-6 h-6"})})]}),l&&Q.jsxs(Q.Fragment,{children:[Q.jsx("button",{onClick:t=>{t.stopPropagation(),g(),null==o||o()},className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 p-3 text-white/70 hover:text-white bg-black/20 hover:bg-black/40 rounded-full transition-colors",children:Q.jsx(A,{className:"w-8 h-8"})}),Q.jsx("button",{onClick:t=>{t.stopPropagation(),g(),null==a||a()},className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 p-3 text-white/70 hover:text-white bg-black/20 hover:bg-black/40 rounded-full transition-colors",children:Q.jsx(k,{className:"w-8 h-8"})})]}),Q.jsx("div",{className:"relative w-full",style:{height:"calc(100vh - 12rem)"},onClick:t=>t.stopPropagation(),children:Q.jsx("img",{src:s,alt:i||"Modal image",className:"w-full h-full object-contain transition-all duration-300",style:{transform:`scale(${d}) rotate(${p}deg)`}})}),(i||r||l&&h>1)&&Q.jsx("div",{className:"absolute bottom-6 left-6 right-6 z-10",children:Q.jsxs("div",{className:"bg-black/50 backdrop-blur-sm rounded-xl p-4 text-white",onClick:t=>t.stopPropagation(),children:[i&&Q.jsx("h3",{className:"text-lg font-semibold mb-1",children:i}),r&&Q.jsx("p",{className:"text-white/80 text-sm",children:r}),l&&h>1&&Q.jsxs("div",{className:"mt-2 text-sm text-white/60",children:[c+1," of ",h]})]})})]})]}):null}function ux(){const{id:e=""}=r(),n=o(),[i,a]=t.useState(null),[l,c]=t.useState(!0),[u,h]=t.useState(null),[d,m]=t.useState(null),[p,f]=t.useState(0);if(t.useEffect((()=>{!async function(){if(e){c(!0),h(null);try{const t=e.toLowerCase(),n=await Zu(t);if(!n)return void h("Project not found");a(n)}catch(t){h("Failed to load project")}finally{c(!1)}}else n("/projects")}()}),[e,n]),l)return Q.jsx("div",{className:"min-h-screen flex items-center justify-center",children:Q.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[Q.jsx(b,{className:"w-8 h-8 animate-spin text-gray-700"}),Q.jsx("p",{className:"text-gray-600",children:"Loading project details..."})]})});if(u||!i)return Q.jsx("div",{className:"min-h-screen flex items-center justify-center",children:Q.jsxs("div",{className:"text-center",children:[Q.jsx("p",{className:"text-red-600 mb-4",children:u||"Project not found"}),Q.jsxs(s,{to:"/projects",className:"inline-flex items-center px-4 py-2 bg-black text-white rounded-lg hover:bg-black/80 transition-colors",children:[Q.jsx(I,{className:"mr-2"}),"Back to Projects"]})]})});const g=()=>{const t=0===p?i.gallery.length-1:p-1;f(t),m(i.gallery[t])},y=()=>{const t=p===i.gallery.length-1?0:p+1;f(t),m(i.gallery[t])};return Q.jsx("div",{className:"pt-24 pb-20",onKeyDown:t=>{"ArrowLeft"===t.key?g():"ArrowRight"===t.key?y():"Escape"===t.key&&m(null)},tabIndex:0,children:Q.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Q.jsxs(s,{to:"/projects",className:"inline-flex items-center text-gray-600 hover:text-black mb-8",children:[Q.jsx(I,{className:"mr-2"}),"Back to Projects"]}),Q.jsxs("div",{className:"mb-12",children:[Q.jsx("h1",{className:"font-playfair text-4xl md:text-5xl font-bold mb-4",children:i.title}),Q.jsxs("div",{className:"flex flex-wrap gap-4 text-gray-600",children:[Q.jsx("span",{children:i.location}),Q.jsx("span",{children:"•"}),Q.jsx("span",{children:i.year}),Q.jsx("span",{children:"•"}),Q.jsx("span",{children:i.category})]})]}),Q.jsx("div",{className:"mb-12",children:Q.jsxs("div",{className:"relative cursor-pointer",onClick:()=>m({url:i.coverImage,caption:i.title}),children:[Q.jsx("img",{src:i.coverImage,alt:i.title,className:"w-full h-[70vh] object-cover rounded-lg",onError:t=>{t.target.src="https://via.placeholder.com/1200x800?text=Project+Image"}}),Q.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 hover:opacity-100 transition-opacity duration-300 rounded-lg flex items-center justify-center",children:Q.jsx("div",{className:"bg-black/50 text-white px-4 py-2 rounded-full",children:"Click to view"})})]})}),Q.jsxs("div",{className:"grid lg:grid-cols-3 gap-12 mb-16",children:[Q.jsxs("div",{className:"lg:col-span-2",children:[Q.jsx("h2",{className:"font-playfair text-2xl font-bold mb-4",children:"About the Project"}),Q.jsx("p",{className:"text-gray-600 mb-6",children:i.description}),Q.jsx("div",{className:"space-y-4",children:i.details.map(((t,e)=>Q.jsx("p",{className:"text-gray-600",children:t},e)))})]}),Q.jsxs("div",{children:[Q.jsx("h2",{className:"font-playfair text-2xl font-bold mb-4",children:"Project Details"}),Q.jsxs("dl",{className:"space-y-4",children:[Q.jsxs("div",{children:[Q.jsx("dt",{className:"font-semibold",children:"Client"}),Q.jsx("dd",{className:"text-gray-600",children:i.client})]}),Q.jsxs("div",{children:[Q.jsx("dt",{className:"font-semibold",children:"Area"}),Q.jsx("dd",{className:"text-gray-600",children:i.area})]}),Q.jsxs("div",{children:[Q.jsx("dt",{className:"font-semibold",children:"Status"}),Q.jsx("dd",{className:"text-gray-600",children:i.status})]})]})]})]}),Q.jsxs("div",{children:[Q.jsx("h2",{className:"font-playfair text-2xl font-bold mb-6",children:"Project Gallery"}),Q.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.gallery.map(((t,e)=>Q.jsxs("div",{className:"relative cursor-pointer group",onClick:()=>{m(t),f(e)},children:[Q.jsx("img",{src:t.url,alt:t.caption,className:"w-full h-64 object-cover rounded-lg",onError:t=>{t.target.src="https://via.placeholder.com/800x600?text=Gallery+Image"}}),Q.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-lg flex items-center justify-center",children:Q.jsx("div",{className:"bg-black/50 text-white px-4 py-2 rounded-full",children:"View Image"})})]},e)))})]}),Q.jsx(cx,{isOpen:!!d,onClose:()=>m(null),image:(null==d?void 0:d.url)||"",title:i.title,caption:null==d?void 0:d.caption,onPrevious:g,onNext:y,showNavigation:i.gallery.length>1,currentIndex:p,totalItems:i.gallery.length})]})})}function hx({publications:t}){return Q.jsxs("div",{className:"mb-20",children:[Q.jsx("h2",{className:"font-playfair text-3xl sm:text-4xl lg:text-5xl font-bold mb-4 text-center",children:"Publications"}),Q.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto text-center mb-12",children:"Research and writings contributing to architectural discourse"}),Q.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((t=>Q.jsx("div",{className:"group",children:Q.jsxs("div",{className:"relative bg-white p-8 rounded-xl shadow-md hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 overflow-hidden h-full",children:[Q.jsxs("div",{className:"absolute inset-0 opacity-[0.02] group-hover:opacity-[0.04] transition-opacity duration-500",children:[Q.jsx("div",{className:"absolute -right-6 -top-6 w-32 h-32 bg-black rounded-full transform -translate-x-1/2 -translate-y-1/2"}),Q.jsx("div",{className:"absolute right-12 bottom-12 w-40 h-40 bg-black rounded-full transform translate-x-1/2 translate-y-1/2"}),Q.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"linear-gradient(to right, rgb(0, 0, 0) 1px, transparent 1px),\n                      linear-gradient(to bottom, rgb(0, 0, 0) 1px, transparent 1px)",backgroundSize:"20px 20px"}})]}),Q.jsxs("div",{className:"relative",children:[Q.jsx("div",{className:"mb-6 aspect-video overflow-hidden rounded-lg",children:Q.jsx("img",{src:t.coverImage,alt:t.title,className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500"})}),Q.jsxs("div",{className:"space-y-4",children:[Q.jsx("h3",{className:"text-xl font-semibold leading-tight group-hover:text-black/80 transition-colors duration-300",children:t.title}),Q.jsx("p",{className:"text-black/60 text-sm",children:t.authors.join(", ")}),Q.jsxs("p",{className:"text-black/60 text-sm",children:[t.journal," • ",t.year]}),t.doi&&Q.jsxs("p",{className:"text-black/60 text-sm",children:["DOI: ",t.doi]}),Q.jsx("p",{className:"text-black/70 text-sm line-clamp-4 mt-2",children:t.abstract}),Q.jsx("div",{className:"pt-4",children:Q.jsxs("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-sm text-black/70 hover:text-black transition-colors duration-300",children:[Q.jsx("span",{className:"mr-2",children:"Read Publication"}),Q.jsx(_,{className:"w-4 h-4"})]})})]})]})]})},t.id)))})]})}function dx({awards:t}){return Q.jsxs("div",{className:"mb-20",children:[Q.jsx("h2",{className:"font-playfair text-3xl sm:text-4xl lg:text-5xl font-bold mb-4 text-center",children:"Awards & Recognition"}),Q.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto text-center mb-12",children:"Celebrating excellence and innovation in architecture"}),Q.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((t=>Q.jsx("div",{className:"group",children:Q.jsxs("div",{className:"relative bg-white p-8 rounded-xl shadow-md hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 overflow-hidden h-full",children:[Q.jsxs("div",{className:"absolute inset-0 opacity-[0.02] group-hover:opacity-[0.04] transition-opacity duration-500",children:[Q.jsx("div",{className:"absolute -right-6 -top-6 w-32 h-32 bg-black rounded-full transform -translate-x-1/2 -translate-y-1/2"}),Q.jsx("div",{className:"absolute right-12 bottom-12 w-40 h-40 bg-black rounded-full transform translate-x-1/2 translate-y-1/2"})]}),Q.jsxs("div",{className:"relative",children:[Q.jsx("div",{className:"mb-6 aspect-video overflow-hidden rounded-lg",children:Q.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500"})}),Q.jsxs("div",{className:"space-y-4",children:[Q.jsxs("div",{className:"flex items-start gap-4",children:[Q.jsx(P,{className:"w-6 h-6 text-black/70 flex-shrink-0 mt-1"}),Q.jsx("h3",{className:"text-xl font-semibold leading-tight group-hover:text-black/80 transition-colors duration-300",children:t.title})]}),Q.jsx("p",{className:"text-black/60 text-sm",children:t.organization}),Q.jsx("p",{className:"text-black/60 text-sm",children:t.year}),Q.jsx("p",{className:"text-black/70 text-sm line-clamp-4",children:t.description}),Q.jsx("div",{className:"pt-2",children:Q.jsx("span",{className:"inline-block px-3 py-1 text-xs font-medium text-black/60 bg-black/5 rounded-full capitalize",children:t.category.charAt(0).toUpperCase()+t.category.slice(1)})})]})]})]})},t.id)))})]})}function mx(){const[e,n]=t.useState(null),[s,i]=t.useState([]),[r,o]=t.useState([]),[a,l]=t.useState(null),[c,u]=t.useState(!0),[h,d]=t.useState(null),[m,x]=t.useState(null),[w,T]=t.useState(0),E=t.useRef(null),[S,N]=t.useState([]),[j,C]=t.useState([]),[A,k]=t.useState([]);t.useEffect((()=>{(async()=>{try{u(!0);const[t,e,s,r,a,c,h]=await Promise.all([eh(),th(),sh(),nh(),ih(),rh(),oh()]);t&&n(t),i(e),o(s),r&&l(r),N(a.sort(((t,e)=>e.order-t.order))),C(c),k(h),d(null)}catch(t){d("Failed to load data. Please try again later.")}finally{u(!1)}})()}),[]);return c?Q.jsx("div",{className:"min-h-screen flex items-center justify-center",children:Q.jsx(b,{className:"w-8 h-8 animate-spin"})}):h||!e?Q.jsx("div",{className:"min-h-screen flex items-center justify-center",children:Q.jsxs("div",{className:"text-center",children:[Q.jsx("p",{className:"text-red-500 mb-4",children:h}),Q.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-black text-white rounded-lg hover:bg-gray-800",children:"Try Again"})]})}):Q.jsxs("div",{className:"pt-24 pb-20",children:[Q.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Q.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center mb-20",children:[Q.jsxs("div",{children:[Q.jsx("h1",{className:"font-playfair text-3xl sm:text-4xl lg:text-5xl font-bold mb-6",children:"About Me"}),Q.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Transforming spaces with innovative architectural solutions"}),Q.jsx("p",{className:"text-gray-600 leading-relaxed mb-8",children:e.description}),Q.jsxs("div",{className:"flex flex-wrap gap-4",children:[Q.jsxs("a",{href:e.resume,className:"inline-flex items-center px-6 py-3 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors",target:"_blank",rel:"noopener noreferrer",children:[Q.jsx(y,{className:"w-5 h-5 mr-2"}),"Download CV"]}),Q.jsxs("a",{href:"/contact",className:"inline-flex items-center px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[Q.jsx(D,{className:"w-5 h-5 mr-2"}),"Contact Me"]})]})]}),Q.jsx("div",{children:Q.jsx("img",{src:e.image,alt:"Profile",className:"rounded-2xl shadow-2xl"})})]}),Q.jsxs("div",{className:"mb-20 text-center",children:[Q.jsx("h2",{className:"font-playfair text-3xl sm:text-4xl lg:text-5xl font-bold mb-4",children:"By the Numbers"}),Q.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto mb-12",children:"A snapshot of my architectural journey and achievements"}),Q.jsx("div",{className:"max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8",children:null==a?void 0:a.items.map(((t,e)=>{const n="Building2"===t.icon?p:"Building"===t.icon?v:"Award"===t.icon?f:"Users"===t.icon?g:p;return Q.jsx("div",{className:"group",children:Q.jsxs("div",{className:"relative bg-white p-8 rounded-xl shadow-md hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-100 overflow-hidden",children:[Q.jsxs("div",{className:"absolute inset-0 opacity-[0.02] group-hover:opacity-[0.04] transition-opacity duration-500",children:[Q.jsx("div",{className:"absolute -right-6 -top-6 w-32 h-32 bg-black rounded-full transform -translate-x-1/2 -translate-y-1/2"}),Q.jsx("div",{className:"absolute right-12 bottom-12 w-40 h-40 bg-black rounded-full transform translate-x-1/2 translate-y-1/2"}),Q.jsx("div",{className:"absolute left-1/2 top-1/2 w-24 h-24 bg-black rounded-full transform -translate-x-1/2 -translate-y-1/2"})]}),Q.jsx("div",{className:"absolute inset-0 opacity-[0.015] group-hover:opacity-[0.03] transition-opacity duration-500",style:{backgroundImage:"linear-gradient(to right, black 1px, transparent 1px),\n                                        linear-gradient(to bottom, black 1px, transparent 1px)",backgroundSize:"20px 20px"}}),Q.jsxs("div",{className:"relative flex flex-col items-center text-center",children:[Q.jsx("div",{className:"mb-4 p-3 rounded-full bg-black/5 group-hover:bg-black/10 transition-colors duration-300",children:Q.jsx(n,{className:"w-6 h-6 text-black/70"})}),Q.jsxs("div",{className:"relative mb-2",children:[Q.jsx("div",{className:"text-5xl font-playfair text-black/80 group-hover:text-black transition-colors duration-500",children:t.value}),Q.jsx("div",{className:"absolute bottom-0 left-1/2 w-12 h-[1px] bg-black/10 group-hover:w-24 group-hover:bg-black/20 transform -translate-x-1/2 transition-all duration-700"})]}),Q.jsx("div",{className:"text-base font-medium text-black/60 group-hover:text-black/70 transition-colors duration-500",children:t.label})]})]})},e)}))})]}),Q.jsxs("div",{className:"mb-20",children:[Q.jsx("h2",{className:"font-playfair text-3xl sm:text-4xl lg:text-5xl font-bold mb-4 text-center",children:"Professional Certifications"}),Q.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto text-center mb-8",children:"Recognized achievements and professional development milestones"}),Q.jsx("div",{className:"relative",children:Q.jsx("div",{ref:E,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 px-4",children:r.map(((t,e)=>Q.jsxs("div",{onClick:()=>{x(t),T(e)},className:"group relative overflow-hidden rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer aspect-[4/5]",children:[Q.jsxs("div",{className:"absolute inset-0",children:[Q.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500"}),Q.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent"}),Q.jsx("div",{className:"absolute inset-0 opacity-5",style:{backgroundImage:"linear-gradient(to right, rgb(0, 0, 0) 1px, transparent 1px),\n                          linear-gradient(to bottom, rgb(0, 0, 0) 1px, transparent 1px)",backgroundSize:"20px 20px"}})]}),Q.jsxs("div",{className:"relative h-full p-6 flex flex-col justify-end",children:[Q.jsxs("div",{className:"flex items-start mb-4",children:[t.verified&&Q.jsx(R,{className:"w-6 h-6 text-green-400 mr-2 flex-shrink-0 mt-1"}),Q.jsxs("div",{children:[Q.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:t.title}),Q.jsx("p",{className:"text-white/80 text-sm",children:t.organization})]})]}),Q.jsx("p",{className:"text-white/70 text-sm mb-3 line-clamp-2",children:t.description}),Q.jsxs("div",{className:"flex items-center justify-between",children:[Q.jsx("span",{className:"text-white/60 text-sm",children:t.year}),t.verified&&Q.jsx("span",{className:"px-3 py-1 bg-white/10 rounded-full text-white/90 text-sm backdrop-blur-sm",children:"Verified"})]})]})]},t.id||e)))})})]}),j.length>0&&Q.jsx(hx,{publications:j}),A.length>0&&Q.jsx(dx,{awards:A}),Q.jsxs("div",{className:"mb-40",children:[Q.jsxs("div",{className:"text-center mb-24",children:[Q.jsx("h2",{className:"font-playfair text-3xl sm:text-4xl lg:text-5xl font-bold mb-4",children:"Skills & Expertise"}),Q.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"My diverse skill set allows me to handle projects from concept to completion, ensuring excellence at every stage of the architectural process."})]}),Q.jsxs("div",{className:"grid lg:grid-cols-12 gap-20",children:[Q.jsx("div",{className:"lg:col-span-8",children:Q.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-y-16 gap-x-20",children:s.map(((t,e)=>Q.jsxs("div",{className:"group relative",children:[Q.jsx("div",{className:"absolute -top-3 left-0 w-6 h-[1px] bg-black/10 group-hover:w-full group-hover:bg-black/30 transition-all duration-700"}),Q.jsxs("div",{className:"pt-6",children:[Q.jsxs("div",{className:"flex items-baseline justify-between mb-6",children:[Q.jsx("h3",{className:"text-sm tracking-[0.2em] text-[#333] group-hover:text-black transition-colors duration-500",children:t.toUpperCase()}),Q.jsx("span",{className:"text-xs tracking-wider text-black/40 group-hover:text-black/60 transition-colors duration-500 tabular-nums",children:Math.floor(15*Math.random()+85)})]}),Q.jsxs("div",{className:"relative h-px",children:[Q.jsx("div",{className:"absolute inset-0 w-full bg-black/5"}),Q.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/40 transition-all duration-700 ease-out",style:{width:15*Math.random()+85+"%"}})]})]})]},e)))})}),Q.jsx("div",{className:"lg:col-span-4",children:Q.jsxs("div",{className:"relative bg-black text-white p-8 rounded-xl shadow-xl overflow-hidden group h-full",children:[Q.jsxs("div",{className:"absolute inset-0 opacity-[0.1] group-hover:opacity-[0.15] transition-opacity duration-500",children:[Q.jsx("div",{className:"absolute -right-6 -top-6 w-32 h-32 bg-white rounded-full transform -translate-x-1/2 -translate-y-1/2"}),Q.jsx("div",{className:"absolute right-12 bottom-12 w-40 h-40 bg-white rounded-full transform translate-x-1/2 translate-y-1/2"}),Q.jsx("div",{className:"absolute left-1/2 top-1/2 w-24 h-24 bg-white rounded-full transform -translate-x-1/2 -translate-y-1/2"})]}),Q.jsx("div",{className:"absolute inset-0 opacity-[0.05] group-hover:opacity-[0.08] transition-opacity duration-500",style:{backgroundImage:"linear-gradient(to right, white 1px, transparent 1px),\n                                    linear-gradient(to bottom, white 1px, transparent 1px)",backgroundSize:"20px 20px"}}),Q.jsxs("div",{className:"relative h-full flex flex-col",children:[Q.jsx("h3",{className:"font-playfair text-2xl sm:text-3xl font-bold mb-8",children:"Professional Affiliations"}),Q.jsx("div",{className:"grid grid-cols-1 gap-y-6 flex-grow",children:S.map(((t,e)=>Q.jsxs("div",{className:"group flex items-start space-x-4 p-3 rounded-lg hover:bg-white/5 transition-colors duration-300",children:[Q.jsx("div",{className:"p-2 rounded-lg bg-white/10 group-hover:bg-white/15 transition-colors duration-300",children:Q.jsx(t.icon,{className:"w-5 h-5 text-white"})}),Q.jsxs("div",{className:"flex flex-col",children:[Q.jsx("span",{className:"text-white/90 group-hover:text-white transition-colors duration-300 font-medium text-sm leading-tight",children:t.name}),Q.jsx("span",{className:"text-white/80 group-hover:text-white/90 transition-colors duration-300 text-sm mt-0.5",children:t.role}),t.acronym&&Q.jsx("span",{className:"text-white/50 group-hover:text-white/70 transition-colors duration-300 text-xs mt-1",children:t.acronym}),Q.jsx("span",{className:"text-white/50 group-hover:text-white/70 transition-colors duration-300 text-xs mt-1",children:t.place}),Q.jsx("span",{className:"text-white/50 group-hover:text-white/70 transition-colors duration-300 text-xs",children:t.timeline})]})]},e)))})]})]})})]})]}),Q.jsxs("div",{className:"mb-20",children:[Q.jsxs("div",{className:"text-center mb-12",children:[Q.jsx("h2",{className:"font-playfair text-3xl sm:text-4xl lg:text-5xl font-bold mb-4",children:"Let's Work Together"}),Q.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Have a project in mind? Let's create something extraordinary together."})]}),Q.jsxs("div",{className:"flex justify-center space-x-6",children:[Q.jsxs("a",{href:`mailto:${e.email}`,className:"flex items-center text-gray-600 hover:text-black",children:[Q.jsx(D,{className:"w-5 h-5 mr-2"}),"Email"]}),Q.jsxs("a",{href:`tel:${e.phone}`,className:"flex items-center text-gray-600 hover:text-black",children:[Q.jsx(M,{className:"w-5 h-5 mr-2"}),"Call"]}),Q.jsxs("a",{href:e.linkedin,className:"flex items-center text-gray-600 hover:text-black",target:"_blank",rel:"noopener noreferrer",children:[Q.jsx(L,{className:"w-5 h-5 mr-2"}),"LinkedIn"]})]})]})]}),Q.jsx(cx,{isOpen:!!m,onClose:()=>{x(null),T(0)},image:(null==m?void 0:m.image)||"",title:null==m?void 0:m.title,caption:`${null==m?void 0:m.organization} • ${null==m?void 0:m.year}`,onPrevious:()=>{if(0===r.length)return;const t=0===w?r.length-1:w-1;T(t);const e=r[t];e&&x(e)},onNext:()=>{if(0===r.length)return;const t=w===r.length-1?0:w+1;T(t);const e=r[t];e&&x(e)},showNavigation:r.length>1,currentIndex:w,totalItems:r.length})]})}function px(){const[e,n]=t.useState(null),[s,i]=t.useState({firstName:"",lastName:"",email:"",projectType:"",customProjectType:"",message:""}),[r,o]=t.useState({type:"idle"});t.useEffect((()=>{!async function(){const t=await eh();n(t)}()}),[]);const a=t=>{const{name:e,value:n}=t.target;i((t=>({...t,[e]:n})))};return Q.jsx("div",{className:"pt-24 pb-20",children:Q.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20",children:[Q.jsxs("div",{className:"text-center mb-12",children:[Q.jsx("h2",{className:"text-4xl font-bold font-playfair mb-4",children:"Let's Talk"}),Q.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Have a project in mind? I'd love to hear about it. Let's discuss how we can work together to bring your vision to life."})]}),Q.jsxs("div",{className:"grid lg:grid-cols-2 gap-16",children:[Q.jsx("div",{children:Q.jsxs("form",{onSubmit:async t=>{t.preventDefault(),o({type:"loading"});try{const t=await(async t=>{try{const e=$l(Yu,"contact"),n={...t,createdAt:new Date};return await Dc(e,n),{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"An error occurred while submitting your message"}}})({firstName:s.firstName,lastName:s.lastName,email:s.email,projectType:"Other"===s.projectType?s.customProjectType:s.projectType,message:s.message});t.success?(o({type:"success",message:"Thank you for your message! I will get back to you soon."}),i({firstName:"",lastName:"",email:"",projectType:"",customProjectType:"",message:""})):o({type:"error",message:t.error||"Something went wrong. Please try again."})}catch(e){o({type:"error",message:"Failed to send message. Please try again."})}},className:"space-y-6",children:[Q.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Q.jsxs("div",{children:[Q.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),Q.jsx("input",{type:"text",name:"firstName",value:s.firstName,onChange:a,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-black/5 focus:outline-none",placeholder:"Jane",required:!0})]}),Q.jsxs("div",{children:[Q.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),Q.jsx("input",{type:"text",name:"lastName",value:s.lastName,onChange:a,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-black/5 focus:outline-none",placeholder:"Smith"})]})]}),Q.jsxs("div",{children:[Q.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),Q.jsx("input",{type:"email",name:"email",value:s.email,onChange:a,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-black/5 focus:outline-none",placeholder:"jane@example.com",required:!0})]}),Q.jsxs("div",{children:[Q.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Type *"}),Q.jsxs("select",{name:"projectType",value:s.projectType,onChange:a,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-black/5 focus:outline-none",required:!0,children:[Q.jsx("option",{value:"",children:"Select a project type"}),Q.jsx("option",{value:"Residential",children:"Residential"}),Q.jsx("option",{value:"Commercial",children:"Commercial"}),Q.jsx("option",{value:"Interior",children:"Interior Design"}),Q.jsx("option",{value:"Landscape",children:"Landscape"}),Q.jsx("option",{value:"Employment",children:"Employment"}),Q.jsx("option",{value:"Other",children:"Other"})]})]}),"Other"===s.projectType&&Q.jsxs("div",{children:[Q.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Specify Project Type *"}),Q.jsx("input",{type:"text",name:"customProjectType",value:s.customProjectType,onChange:a,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-black/5 focus:outline-none",placeholder:"Please specify your project type",required:!0})]}),Q.jsxs("div",{children:[Q.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message *"}),Q.jsx("textarea",{name:"message",value:s.message,onChange:a,rows:6,className:"w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-black/5 focus:outline-none resize-none",placeholder:"Tell me about your project...",required:!0})]}),r.message&&Q.jsx("div",{className:"p-4 rounded-lg "+("success"===r.type?"bg-green-50 text-green-800":"error"===r.type?"bg-red-50 text-red-800":""),children:r.message}),Q.jsx("button",{type:"submit",disabled:"loading"===r.type,className:"w-full flex items-center justify-center px-8 py-4 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors "+("loading"===r.type?"opacity-50 cursor-not-allowed":""),children:"loading"===r.type?Q.jsx("span",{children:"Sending..."}):Q.jsxs(Q.Fragment,{children:[Q.jsx("span",{children:"Send Message"}),Q.jsx(V,{className:"w-5 h-5 ml-2"})]})})]})}),Q.jsxs("div",{className:"space-y-8",children:[Q.jsxs("div",{children:[Q.jsx("h3",{className:"text-xl font-playfair font-bold mb-6",children:"Contact Information"}),Q.jsxs("div",{className:"space-y-6",children:[Q.jsxs("div",{className:"flex items-start space-x-3",children:[Q.jsx(E,{className:"w-5 h-5 mt-1 flex-shrink-0 text-gray-600"}),Q.jsxs("div",{className:"text-gray-600",children:[Q.jsx("p",{children:null==e?void 0:e.address}),Q.jsxs("p",{children:[null==e?void 0:e.city,", ",null==e?void 0:e.country]})]})]}),Q.jsxs("div",{className:"flex items-center space-x-3",children:[Q.jsx(D,{className:"w-5 h-5 flex-shrink-0 text-gray-600"}),Q.jsx("a",{href:`mailto:${null==e?void 0:e.email}`,className:"text-gray-600 hover:text-black transition-colors",children:null==e?void 0:e.email})]}),Q.jsxs("div",{className:"flex items-center space-x-3",children:[Q.jsx(M,{className:"w-5 h-5 flex-shrink-0 text-gray-600"}),Q.jsx("a",{href:`tel:${null==e?void 0:e.phone}`,className:"text-gray-600 hover:text-black transition-colors",children:null==e?void 0:e.phone})]})]})]}),Q.jsxs("div",{children:[Q.jsx("h3",{className:"text-xl font-playfair font-bold mb-6",children:"Follow Me"}),Q.jsxs("div",{className:"flex space-x-4",children:[Q.jsx("a",{href:null==e?void 0:e.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-black transition-colors","aria-label":"LinkedIn",children:Q.jsx(L,{className:"w-5 h-5"})}),Q.jsx("a",{href:null==e?void 0:e.instagram,target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-black transition-colors","aria-label":"Instagram",children:Q.jsx(O,{className:"w-5 h-5"})})]})]})]})]})]})})}function fx(){const[e,n]=t.useState(null),[i,r]=t.useState(!0);return t.useEffect((()=>{!async function(){try{const t=await eh();n(t)}catch(t){}finally{r(!1)}}()}),[]),Q.jsxs("footer",{className:"relative bg-black text-white mt-auto overflow-hidden",children:[Q.jsxs("div",{className:"absolute inset-0 opacity-[0.1]",children:[Q.jsx("div",{className:"absolute -right-20 -top-20 w-96 h-96 bg-white rounded-full transform -translate-x-1/2 -translate-y-1/2"}),Q.jsx("div",{className:"absolute -left-20 bottom-0 w-80 h-80 bg-white rounded-full transform translate-y-1/2"})]}),Q.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:"linear-gradient(to right, white 1px, transparent 1px),\n                          linear-gradient(to bottom, white 1px, transparent 1px)",backgroundSize:"32px 32px"}}),Q.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[Q.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[Q.jsxs("div",{children:[Q.jsx("h3",{className:"font-playfair text-xl font-bold mb-4",children:null==e?void 0:e.name}),Q.jsx("p",{className:"text-gray-400 mb-4",children:null==e?void 0:e.shortDescription}),Q.jsxs("div",{className:"flex items-center space-x-4",children:[Q.jsx("a",{href:`mailto:${null==e?void 0:e.email}`,className:"text-gray-400 hover:text-white transition-colors","aria-label":"Email",children:Q.jsx(D,{className:"w-5 h-5"})}),Q.jsx("a",{href:null==e?void 0:e.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors","aria-label":"LinkedIn",children:Q.jsx(L,{className:"w-5 h-5"})}),Q.jsx("a",{href:null==e?void 0:e.instagram,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors","aria-label":"Instagram",children:Q.jsx(O,{className:"w-5 h-5"})})]})]}),Q.jsxs("div",{children:[Q.jsx("h4",{className:"font-playfair text-lg font-semibold mb-4",children:"Quick Links"}),Q.jsxs("ul",{className:"space-y-2",children:[Q.jsx("li",{children:Q.jsx(s,{to:"/",className:"text-gray-400 hover:text-white transition-colors",children:"Home"})}),Q.jsx("li",{children:Q.jsx(s,{to:"/projects",className:"text-gray-400 hover:text-white transition-colors",children:"Projects"})}),Q.jsx("li",{children:Q.jsx(s,{to:"/about",className:"text-gray-400 hover:text-white transition-colors",children:"About"})}),Q.jsx("li",{children:Q.jsx(s,{to:"/contact",className:"text-gray-400 hover:text-white transition-colors",children:"Contact"})})]})]}),Q.jsxs("div",{children:[Q.jsx("h4",{className:"font-playfair text-lg font-semibold mb-4",children:"Services"}),Q.jsx("ul",{className:"space-y-2",children:(null==e?void 0:e.services)?e.services.map(((t,e)=>Q.jsx("li",{className:"text-gray-400 hover:text-white transition-colors",children:t},e))):Q.jsxs(Q.Fragment,{children:[Q.jsx("li",{className:"text-gray-400",children:"Site Layouts"}),Q.jsx("li",{className:"text-gray-400",children:"Interior Design"}),Q.jsx("li",{className:"text-gray-400",children:"3D Rendering"}),Q.jsx("li",{className:"text-gray-400",children:"Construction Docs"})]})})]}),Q.jsxs("div",{children:[Q.jsx("h4",{className:"font-playfair text-lg font-semibold mb-4",children:"Contact Me"}),Q.jsxs("div",{className:"space-y-4",children:[(null==e?void 0:e.email)&&Q.jsxs("a",{href:`mailto:${e.email}`,className:"flex items-center group text-gray-400 hover:text-white transition-colors",children:[Q.jsx("div",{className:"w-12 flex justify-center",children:Q.jsx(D,{className:"w-5 h-5",strokeWidth:1.5})}),Q.jsx("span",{className:"text-sm",children:e.email})]}),(null==e?void 0:e.phone)&&Q.jsxs("a",{href:`tel:${e.phone}`,className:"flex items-center group text-gray-400 hover:text-white transition-colors",children:[Q.jsx("div",{className:"w-12 flex justify-center",children:Q.jsx(M,{className:"w-5 h-5",strokeWidth:1.5})}),Q.jsx("span",{className:"text-sm",children:e.phone})]}),(null==e?void 0:e.city)&&(null==e?void 0:e.country)&&Q.jsxs("div",{className:"flex items-center group text-gray-400",children:[Q.jsx("div",{className:"w-12 flex justify-center",children:Q.jsx(E,{className:"w-5 h-5",strokeWidth:1.5})}),Q.jsxs("span",{className:"text-sm",children:[e.city,", ",e.country]})]})]})]})]}),Q.jsx("div",{className:"border-t border-gray-800 mt-12 pt-8",children:Q.jsx("div",{className:"text-center",children:Q.jsxs("p",{className:"text-gray-400 text-sm",children:["© ",(new Date).getFullYear()," ",null==e?void 0:e.name,", All rights reserved."]})})})]})]})}function gx(){const{pathname:e}=n();return t.useEffect((()=>{window.scrollTo(0,0)}),[e]),null}function yx({title:e="Professional Architect | Innovative Design Solutions",description:s="Explore a portfolio of innovative architectural designs, sustainable solutions, and transformative spaces.",image:i="/og-image.png",type:r="website"}){const o=n(),a="https://singhpragya.netlify.app",l=`${a}${o.pathname}`.replace(/\/+/g,"/").replace("http:/","http://").replace("https:/","https://");return t.useEffect((()=>{document.title=e;const t=document.querySelector('meta[name="description"]');t&&t.setAttribute("content",s);const n=document.querySelector('meta[property="og:url"]');n&&n.setAttribute("content",l);const r=document.querySelector('meta[property="og:title"]');r&&r.setAttribute("content",e);const o=document.querySelector('meta[property="og:description"]');o&&o.setAttribute("content",s);const c=document.querySelector('meta[property="og:image"]');c&&c.setAttribute("content",`${a}${i}`);const u=document.querySelector('meta[property="twitter:url"]');u&&u.setAttribute("content",l);const h=document.querySelector('meta[property="twitter:title"]');h&&h.setAttribute("content",e);const d=document.querySelector('meta[property="twitter:description"]');d&&d.setAttribute("content",s);const m=document.querySelector('meta[property="twitter:image"]');m&&m.setAttribute("content",`${a}${i}`);const p=document.querySelector('link[rel="canonical"]');p&&p.setAttribute("href",l)}),[e,s,i,l,a]),null}function vx({data:e}){return t.useEffect((()=>{let t=document.querySelector("#structured-data");t||(t=document.createElement("script"),t.setAttribute("id","structured-data"),t.setAttribute("type","application/ld+json"),document.head.appendChild(t)),t.textContent=JSON.stringify(e)}),[e]),null}const xx=t=>({"@context":"https://schema.org","@type":"ProfessionalService","@id":"https://singhpragya.netlify.app/",name:(null==t?void 0:t.name)||"Professional Architect",description:(null==t?void 0:t.shortDescription)||"Professional architecture portfolio showcasing innovative design and sustainable solutions",url:"https://singhpragya.netlify.app/",sameAs:[null==t?void 0:t.linkedin,null==t?void 0:t.instagram,null==t?void 0:t.behance].filter(Boolean),image:null==t?void 0:t.profileImage,address:{"@type":"PostalAddress",addressLocality:(null==t?void 0:t.location)||"Manchester",addressCountry:"UK"},priceRange:"$$",openingHours:"Mo-Fr 09:00-18:00",telephone:null==t?void 0:t.phone,email:null==t?void 0:t.email,areaServed:{"@type":"GeoCircle",geoMidpoint:{"@type":"GeoCoordinates",latitude:53.4808,longitude:-2.2426},geoRadius:"100000"}});function wx(){const[e,n]=t.useState(!1),[s,i]=t.useState(null);return t.useEffect((()=>{!async function(){try{const t=await eh();i(t)}catch(t){}}()}),[]),Q.jsxs(a,{children:[Q.jsx(yx,{}),Q.jsx(vx,{data:xx(s)}),Q.jsx(gx,{}),Q.jsxs("div",{className:"min-h-screen flex flex-col",children:[Q.jsx(lh,{isMenuOpen:e,setIsMenuOpen:n}),Q.jsx("main",{className:"flex-grow",children:Q.jsxs(l,{children:[Q.jsx(c,{path:"/",element:Q.jsx(ax,{})}),Q.jsx(c,{path:"/projects",element:Q.jsx(lx,{})}),Q.jsx(c,{path:"/projects/:id",element:Q.jsx(ux,{})}),Q.jsx(c,{path:"/about",element:Q.jsx(mx,{})}),Q.jsx(c,{path:"/contact",element:Q.jsx(px,{})})]})}),Q.jsx(fx,{})]})]})}const bx={};const Tx=function(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:s,onRegistered:i,onRegisteredSW:r,onRegisterError:o}=t;let a,l;return l=async function(){if("serviceWorker"in navigator){if(a=await function(t,e){let n=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),s=(null==t?void 0:t.nonce)||(null==t?void 0:t.getAttribute("nonce"));n=Promise.allSettled(e.map((t=>{if((t=function(t){return"/"+t}(t))in bx)return;bx[t]=!0;const e=t.endsWith(".css"),n=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${n}`))return;const i=document.createElement("link");return i.rel=e?"stylesheet":"modulepreload",e||(i.as="script"),i.crossOrigin="",i.href=t,s&&i.setAttribute("nonce",s),document.head.appendChild(i),e?new Promise(((e,n)=>{i.addEventListener("load",e),i.addEventListener("error",(()=>n(new Error(`Unable to preload CSS for ${t}`))))})):void 0})))}function s(t){const e=new Event("vite:preloadError",{cancelable:!0});if(e.payload=t,window.dispatchEvent(e),!e.defaultPrevented)throw t}return n.then((e=>{for(const t of e||[])"rejected"===t.status&&s(t.reason);return t().catch(s)}))}((async()=>{const{Workbox:t}=await import("./workbox-window.prod.es5-p40uij6f.js");return{Workbox:t}}),[]).then((({Workbox:t})=>new t("/sw.js",{scope:"/",type:"classic"}))).catch((t=>{null==o||o(t)})),!a)return;a.addEventListener("activated",(t=>{(t.isUpdate||t.isExternal)&&window.location.reload()})),a.addEventListener("installed",(t=>{t.isUpdate||null==s||s()})),a.register({immediate:e}).then((t=>{r?r("/sw.js",t):null==i||i(t)})).catch((t=>{null==o||o(t)}))}}(),async(t=!0)=>{await l}}({onNeedRefresh(){confirm("New content available. Reload?")&&Tx()},onOfflineReady(){}}),Ex=document.getElementById("root");if(!Ex)throw new Error("Failed to find the root element");W(Ex).render(Q.jsx(i.StrictMode,{children:Q.jsx(wx,{})}));
//# sourceMappingURL=index-riW75giW.js.map
